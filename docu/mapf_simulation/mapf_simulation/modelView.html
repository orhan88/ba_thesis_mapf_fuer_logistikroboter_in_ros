<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 14.1.0"/>
    <title>mapf_simulation.modelView API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../mapf_simulation.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;mapf_simulation</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="variable" href="#PUBLISH">PUBLISH</a>
            </li>
            <li>
                    <a class="variable" href="#WAIT">WAIT</a>
            </li>
            <li>
                    <a class="variable" href="#EXEC">EXEC</a>
            </li>
            <li>
                    <a class="class" href="#MainScene">MainScene</a>
                            <ul class="memberlist">
                </ul>

            </li>
            <li>
                    <a class="class" href="#ModelView">ModelView</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ModelView.set_model">set_model</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.get_model">get_model</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.wheelEvent">wheelEvent</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.zoom_event">zoom_event</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.resizeEvent">resizeEvent</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.resize_to_fit">resize_to_fit</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.mousePressEvent">mousePressEvent</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.event">event</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.contextMenuEvent">contextMenuEvent</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.start_timer">start_timer</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.adjust_timer">adjust_timer</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.switch_timer">switch_timer</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.stop_timer">stop_timer</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.speed_up_timer">speed_up_timer</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.speed_down_timer">speed_down_timer</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.is_timer_running">is_timer_running</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.update_windows">update_windows</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.add_window">add_window</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.update">update</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.update_model">update_model</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.do_model">do_model</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.undo_model">undo_model</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.clear">clear</a>
                        </li>
                        <li>
                                <a class="function" href="#ModelView.get_next_ros_timeout">get_next_ros_timeout</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../mapf_simulation.html">mapf_simulation</a><wbr>.modelView    </h1>

                
                        <input id="mod-modelView-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-modelView-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="kn">from</span> <span class="nn">PyQt5.QtCore</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="kn">from</span> <span class="nn">PyQt5.QtGui</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="kn">from</span> <span class="nn">mapf_simulation.configuration</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="kn">from</span> <span class="nn">mapf_simulation.model</span> <span class="kn">import</span> <span class="o">*</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="kn">import</span> <span class="nn">time</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="c1"># Different possible states of ModelView</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="n">PUBLISH</span>  <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="sd">= state of the simulation at the begin of every cycle. Here the simulation publishes all information </span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="sd">(1xmapf_interfaces/MapInfo.msg and for every robot 1xmapf_interfaces/RobotInfo.msg).</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="n">WAIT</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="sd">= state of the simulation after it has published all information and is waiting until </span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="sd">it has received all information from the CONTROLLER   </span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="sd">(for every robot 1xmapf_interfaces/RobotAction.msg).</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="n">EXEC</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a><span class="sd">= state of the simulation after it has received all information from the CONTROLLER. </span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="sd">Here the simulation executes the given actions for every robot.</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a><span class="k">class</span> <span class="nc">MainScene</span><span class="p">(</span><span class="n">QGraphicsScene</span><span class="p">):</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a>        <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="k">class</span> <span class="nc">ModelView</span><span class="p">(</span><span class="n">QGraphicsView</span><span class="p">):</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a><span class="sd">    This class is responsible for the visualization the simulation.</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a><span class="sd">    To update the simulation a timer is created. </span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="sd">    After the time is up the window is updated with the new positions of the items(robots) in the map. </span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a><span class="sd">    Items are moved to their new position step by step.   </span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a><span class="sd">    For a complete execution of the action for a robot per default 10 timers are created. So every</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="sd">    time the timer is up the robots are moved incrementally (around 10%).  </span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a><span class="sd">    After the running out of the 10 timers the robots have reached their new final position. Then the model </span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a><span class="sd">    is updated with the new positions of the robots.</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a>        <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span> <span class="o">=</span> <span class="n">MainScene</span><span class="p">()</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setScene</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="p">)</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_windows</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span>  <span class="o">=</span> <span class="n">PUBLISH</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a>        
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_object_size</span> <span class="o">=</span> <span class="mi">35</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_screen_width</span>  <span class="o">=</span> <span class="mi">600</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_screen_height</span> <span class="o">=</span> <span class="mi">600</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span> <span class="o">=</span> <span class="mi">3</span>             <span class="c1">#the size of the borders of the grid</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span> <span class="o">=</span> <span class="mi">60</span>             <span class="c1">#the size of one grid cell</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span> <span class="o">=</span> <span class="mi">60</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_line_hlength</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_line_vlength</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_display_mode</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">=</span> <span class="mf">1.0</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_lines</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_step_time</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_time</span><span class="p">()</span>  <span class="c1">#2000.0</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setDragMode</span><span class="p">(</span><span class="n">QGraphicsView</span><span class="o">.</span><span class="n">ScrollHandDrag</span><span class="p">)</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setContextMenuPolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DefaultContextMenu</span><span class="p">)</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setHorizontalScrollBarPolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ScrollBarAlwaysOn</span><span class="p">)</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setVerticalScrollBarPolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ScrollBarAlwaysOn</span><span class="p">)</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_screen_width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_screen_height</span><span class="p">)</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span> <span class="o">=</span> <span class="n">QMenu</span><span class="p">()</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">setParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s1">&#39;tooltip&#39;</span><span class="p">)</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a>        
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a>    <span class="k">def</span> <span class="nf">set_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">remove_window</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">=</span> <span class="n">model</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">add_window</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">resize_to_fit</span><span class="p">()</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a>    <span class="k">def</span> <span class="nf">get_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a>    <span class="c1">#EVENTS</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a>    <span class="k">def</span> <span class="nf">wheelEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_event</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">angleDelta</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a>    <span class="k">def</span> <span class="nf">zoom_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a>        <span class="n">zoom</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">angle</span><span class="o">/</span><span class="mf">1440.0</span><span class="p">)</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span><span class="p">(</span><span class="n">zoom</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a>        
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a>    <span class="k">def</span> <span class="nf">resizeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a>        <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">resizeEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">oldSize</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">1</span> 
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a>            <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">oldSize</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">1</span> 
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a>            <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">1</span> 
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a>            <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>            <span class="k">return</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_screen_width</span>  <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_screen_height</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a>        <span class="n">scaling</span> <span class="o">=</span> <span class="p">((</span><span class="nb">float</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">_screen_width</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">oldSize</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()),</span> 
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>                    <span class="p">(</span><span class="nb">float</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">_screen_height</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">oldSize</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()))</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span><span class="p">(</span><span class="n">scaling</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">scaling</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a>    <span class="k">def</span> <span class="nf">resize_to_fit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span> 
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>            <span class="k">return</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a>        <span class="n">zoom</span> <span class="o">=</span> <span class="p">((</span><span class="nb">float</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">_screen_width</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_line_hlength</span><span class="o">*</span><span class="mf">1.04</span><span class="p">),</span> 
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a>                <span class="p">(</span><span class="nb">float</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">_screen_height</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_line_vlength</span><span class="o">*</span><span class="mf">1.04</span><span class="p">))</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span><span class="p">(</span><span class="n">zoom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">zoom</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">setSceneRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_line_hlength</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_line_vlength</span><span class="o">*</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a>    <span class="k">def</span> <span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">LeftButton</span> <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">MiddleButton</span><span class="p">:</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a>        <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">mousePressEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a>    <span class="k">def</span> <span class="nf">event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="p">()</span> <span class="o">==</span> <span class="n">QEvent</span><span class="o">.</span><span class="n">ToolTip</span><span class="p">:</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>            <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapToScene</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">pos</span><span class="p">())</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>            <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene_coordinates_to_node</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a>            <span class="k">if</span> <span class="n">pos</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>                <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a>            <span class="n">ss</span> <span class="o">=</span> <span class="s1">&#39;node(&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_node_id</span><span class="p">(</span><span class="n">pos</span><span class="p">))</span> <span class="o">+</span><span class="s1">&#39;) at &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">filter_items</span><span class="p">(</span><span class="n">position</span> <span class="o">=</span> <span class="n">pos</span><span class="p">):</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>                <span class="n">ss</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">item</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get_id</span><span class="p">())</span> <span class="o">+</span><span class="s1">&#39;)&#39;</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="n">ss</span><span class="p">)</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>    <span class="c1">#CONTEXTMENU</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>    <span class="k">def</span> <span class="nf">contextMenuEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a><span class="sd">        This function creates the contextmenu by right click in the simulation window.</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a><span class="sd">        For the moment only two options defined: &quot;enable node&quot; and &quot;disable node&quot;</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a>            <span class="k">return</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>        <span class="n">point</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapToScene</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene_coordinates_to_grid</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">point</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>        <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>            <span class="k">return</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>        <span class="n">x</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a>        <span class="n">y</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_editable</span><span class="p">():</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a>            <span class="k">return</span> 
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span> 
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">is_node</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a>            <span class="n">action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="s1">&#39;disable node&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a>            <span class="n">action</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="s1">&#39;Ctrl + N&#39;</span><span class="p">)</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a>            <span class="n">action</span><span class="o">.</span><span class="n">setStatusTip</span><span class="p">(</span><span class="s1">&#39;Disables the selected node&#39;</span><span class="p">)</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a>            <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remove_node</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>   
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>            <span class="n">action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="s1">&#39;enable node&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a>            <span class="n">action</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="s1">&#39;Ctrl + N&#39;</span><span class="p">)</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a>            <span class="n">action</span><span class="o">.</span><span class="n">setStatusTip</span><span class="p">(</span><span class="s1">&#39;Enables the selected node&#39;</span><span class="p">)</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a>            <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_node</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span> 
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a><span class="w">        </span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a><span class="sd">        robot = self._model.filter_items(&#39;robot_ros&#39;, position = (x,y), return_first = True)[0]</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a><span class="sd">        if robot is not None:</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a><span class="sd">            action = QAction(&#39;remove robot&#39;, self)</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + R&#39;)</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a><span class="sd">            action.setStatusTip(&#39;Removes a robot from the selected node&#39;)</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a><span class="sd">            action.triggered.connect(lambda: self._remove_item(robot))</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a><span class="sd">            self._menu.addAction(action)</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a><span class="sd">        elif self._model.is_node(x,y):</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a><span class="sd">            action = QAction(&#39;add robot&#39;, self)</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + R&#39;)</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a><span class="sd">            action.setStatusTip(&#39;Adds a robot to the selected node&#39;)</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a><span class="sd">            action.triggered.connect(lambda: self._add_item(&#39;robot_ros&#39;, x, y))</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a><span class="sd">            self._menu.addAction(action)</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">popup</span><span class="p">(</span><span class="n">QPoint</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span><span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">()))</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a>    <span class="k">def</span> <span class="nf">_add_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a><span class="sd">        This function adds a specific node (a cell in the map with x,y coordinates) to the model. </span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a><span class="sd">        The function is used by the context menu to enable a node.</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">update_windows</span><span class="p">()</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a>    
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a>    <span class="k">def</span> <span class="nf">_remove_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a><span class="sd">        This function removes a specific node (a cell in the map with x,y coordinates) from the model. </span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a><span class="sd">        The function is used by the context menu to disable a node.</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">remove_node</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">update_windows</span><span class="p">()</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a>    <span class="k">def</span> <span class="nf">_add_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kind</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a><span class="sd">        This function adds a specific item (robot or checkpoint) to the model. </span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a><span class="sd">        The function could be used by the context menu and is not used at the moment.</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a>        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">create_item</span><span class="p">(</span><span class="n">kind</span><span class="p">,</span> <span class="n">add_immediately</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a>        <span class="n">item</span><span class="o">.</span><span class="n">set_starting_position</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a>        <span class="n">item</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">update_windows</span><span class="p">()</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a>    
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a>    <span class="k">def</span> <span class="nf">_remove_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a><span class="sd">        This function removes a specific item (robot or checkpoint) from the model. </span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a><span class="sd">        The function could be used by the context menu and is not used at the moment.</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">remove_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">update_windows</span><span class="p">()</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a>    <span class="c1">#TIMER</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a>    <span class="k">def</span> <span class="nf">start_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a><span class="sd">        This function stops the previous timer and starts a new one. </span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_timer</span><span class="p">()</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="o">=</span> <span class="n">QTimer</span><span class="p">()</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_model</span><span class="p">(</span><span class="kc">False</span><span class="p">))</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">adjust_timer</span><span class="p">()</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">PUBLISH</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a>        
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a>    <span class="k">def</span> <span class="nf">adjust_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a><span class="sd">        This function sets the timeout for the timer.   </span>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a><span class="sd">        Timeout = time to execute the complete step / number of intermediate steps  </span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a><span class="sd">        Example: the duration of one complete step schould be 1 sec. with 10 intermediate steps. </span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a><span class="sd">        Then every timer should run for = 1sec/10 = 0.1seconds.</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a>        <span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_step_time</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a>        <span class="k">if</span> <span class="n">timeout</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a>            <span class="n">timeout</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a>    <span class="k">def</span> <span class="nf">switch_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a><span class="sd">        This function switches the timer  </span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a><span class="sd">        (start the timer if there is no timer running / stop the timer if there is a timer running).</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">start_timer</span><span class="p">()</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">stop_timer</span><span class="p">()</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a>    <span class="k">def</span> <span class="nf">stop_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a><span class="sd">        This function stops the timer if there is a timer running.</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>    <span class="k">def</span> <span class="nf">speed_up_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a><span class="sd">        This function decreases the time for completion of one complete step.</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a><span class="sd">        Following values are allowed (in milliseconds):  </span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a><span class="sd">        2000 (intermediate steps=20), 1000 (10), 500 (10), 250(5), 0(0)</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a><span class="sd">        By decreasing the time the value is moved from left to right  </span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a><span class="sd">        (example: old value 500, new value 250)</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a><span class="sd">        </span>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a><span class="sd">        The timeout for one timer is defined by &quot;time for completion of one step&quot; / &quot;intermediate steps&quot;</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a><span class="sd">        (example: value 2000, then 20 intermediate steps with every timer running for 100 millisec.)</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>        <span class="n">values_time</span> <span class="o">=</span>  <span class="p">[</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a>        <span class="n">values_count</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span>   <span class="mi">10</span><span class="p">,</span>   <span class="mi">10</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>   <span class="mi">1</span><span class="p">]</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a>        
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_time</span><span class="p">):</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_time</span><span class="p">)</span> 
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_step_time</span> <span class="o">=</span> <span class="n">values_time</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span> <span class="o">=</span> <span class="n">values_count</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">adjust_timer</span><span class="p">()</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a>    <span class="k">def</span> <span class="nf">speed_down_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a><span class="sd">        This function increaes the time for completion of one complete step.</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a><span class="sd">        Following values are allowed (in milliseconds):  </span>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a><span class="sd">        2000 (intermediate steps=20), 1000 (10), 500 (10), 250(5), 0(0)</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a><span class="sd">        By increasing the time the value is moved from right to left  </span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a><span class="sd">        (example: old value 250, new value 500)</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a><span class="sd">        </span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a><span class="sd">        The timeout for one timer is defined by &quot;time for completion of one step&quot; / &quot;intermediate steps&quot;</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a><span class="sd">        (example: value 250, then 5 intermediate steps with every timer running for 50 millisec.)</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a>        <span class="n">values_time</span> <span class="o">=</span>  <span class="p">[</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a>        <span class="n">values_count</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span>   <span class="mi">10</span><span class="p">,</span>   <span class="mi">10</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>   <span class="mi">1</span><span class="p">]</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a>        
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_time</span><span class="p">):</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_time</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_step_time</span> <span class="o">=</span> <span class="n">values_time</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span> <span class="o">=</span> <span class="n">values_count</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">adjust_timer</span><span class="p">()</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a>    <span class="k">def</span> <span class="nf">is_timer_running</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a><span class="sd">        This function checks whether the timer is running.</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a><span class="sd">        :return: **True**, if a timer is running   </span>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a><span class="sd">        **False**, otherwise</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="ow">is</span> <span class="kc">None</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a>    <span class="k">def</span> <span class="nf">get_timer_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a><span class="sd">        @private</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a>    <span class="k">def</span> <span class="nf">get_step_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a><span class="sd">        @private</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a>        <span class="n">values_time</span> <span class="o">=</span>  <span class="p">[</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a>        <span class="n">values_count</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span>   <span class="mi">10</span><span class="p">,</span>   <span class="mi">10</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>   <span class="mi">1</span><span class="p">]</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a>        <span class="k">return</span> <span class="n">values_time</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">values_count</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a>    
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a>    <span class="c1">#UPDATE WINDOW</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a>    <span class="k">def</span> <span class="nf">update_windows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a><span class="sd">        This function updates all registered windows. </span>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a>        <span class="k">for</span> <span class="n">window</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_windows</span><span class="p">:</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a>            <span class="n">window</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a>    
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a>    <span class="k">def</span> <span class="nf">add_window</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">window</span><span class="p">):</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a><span class="sd">        This function adds a widget to the list of widgets which should be updated every time the function update_windows(self) is called.</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a><span class="sd">        This could be the robot table (RightSideWidget) or widgets from the left side.</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a><span class="sd">        This widgets can then be updated all together if the model view has changed. </span>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a>
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a><span class="sd">        :param window: PyQt5.QtWidgets.QWidget - widget which should be added to the list</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a><span class="sd">        </span>
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a>        <span class="k">if</span> <span class="n">window</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_windows</span><span class="p">:</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_windows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a><span class="sd">        This function draws the map, the items and other elements in the window. </span>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a>
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a><span class="sd">        Following elements will be plotted:</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a><span class="sd">        -   vertical and horizontal lines</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a><span class="sd">        -   disabled nodes (=blocked spots)</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a><span class="sd">        -   every graphic item in the model</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos">390</span></a>
</span><span id="L-391"><a href="#L-391"><span class="linenos">391</span></a><span class="sd">        Following elements are optional and will be plotted only if activated by the user:</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos">392</span></a><span class="sd">        -   start points of the items</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos">393</span></a><span class="sd">        -   driven path by the items</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos">394</span></a><span class="sd">        -   future/calculated path for the items</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos">395</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos">396</span></a>
</span><span id="L-397"><a href="#L-397"><span class="linenos">397</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> 
</span><span id="L-398"><a href="#L-398"><span class="linenos">398</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos">399</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">mapf_get_filename_map</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos">400</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos">401</span></a>
</span><span id="L-402"><a href="#L-402"><span class="linenos">402</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_line_hlength</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos">403</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_line_vlength</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos">404</span></a>
</span><span id="L-405"><a href="#L-405"><span class="linenos">405</span></a>        <span class="k">for</span> <span class="n">item_dic</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">iterate_graphic_dictionaries</span><span class="p">():</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos">406</span></a>            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">item_dic</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos">407</span></a>                <span class="n">color_id</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos">408</span></a>                <span class="n">hex_color</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_&#39;</span> <span class="o">+</span> <span class="n">item</span><span class="o">.</span><span class="n">get_kind_name</span><span class="p">()</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">color_id</span><span class="p">))</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos">409</span></a>                <span class="k">while</span><span class="p">(</span><span class="n">hex_color</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos">410</span></a>                    <span class="n">item</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">hex_color</span><span class="p">),</span> <span class="n">color_id</span><span class="p">)</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos">411</span></a>                    <span class="n">color_id</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos">412</span></a>                    <span class="n">hex_color</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_&#39;</span> <span class="o">+</span> <span class="n">item</span><span class="o">.</span><span class="n">get_kind_name</span><span class="p">()</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">color_id</span><span class="p">))</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos">413</span></a>
</span><span id="L-414"><a href="#L-414"><span class="linenos">414</span></a>        <span class="n">pen</span> <span class="o">=</span> <span class="n">QPen</span><span class="p">()</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos">415</span></a>        <span class="n">pen</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="p">)</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos">416</span></a>        <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DotLine</span><span class="p">)</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos">417</span></a>        <span class="n">brush_disabled_node</span> <span class="o">=</span> <span class="n">QBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_disabled_node&#39;</span><span class="p">)))</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos">418</span></a>        <span class="n">brush_start_point</span> <span class="o">=</span> <span class="n">QBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_start_node&#39;</span><span class="p">)))</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos">419</span></a>        <span class="n">brush_start_point_highlighted</span> <span class="o">=</span> <span class="n">QBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_start_node_highlighted&#39;</span><span class="p">)))</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos">420</span></a>        <span class="n">color_travelled_path_highlighted</span> <span class="o">=</span> <span class="n">QColor</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_travelled_path_highlighted&#39;</span><span class="p">))</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos">421</span></a>        <span class="n">color_future_path_highlighted</span> <span class="o">=</span> <span class="n">QColor</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_future_path_highlighted&#39;</span><span class="p">))</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos">422</span></a>
</span><span id="L-423"><a href="#L-423"><span class="linenos">423</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos">424</span></a>
</span><span id="L-425"><a href="#L-425"><span class="linenos">425</span></a>        <span class="c1">#---------------------------------------draw vertival lines---------------------------------------</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos">426</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos">427</span></a>            <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addLine</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos">428</span></a>                                        <span class="bp">self</span><span class="o">.</span><span class="n">_line_hlength</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="p">,</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos">429</span></a>                                        <span class="n">i</span> <span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">),</span> <span class="n">pen</span><span class="p">)</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos">430</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos">431</span></a>
</span><span id="L-432"><a href="#L-432"><span class="linenos">432</span></a>        <span class="c1">#---------------------------------------draw horizontal lines---------------------------------------</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos">433</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos">434</span></a>            <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addLine</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span> 
</span><span id="L-435"><a href="#L-435"><span class="linenos">435</span></a>                                        <span class="mi">0</span><span class="p">,</span> <span class="n">i</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">),</span> 
</span><span id="L-436"><a href="#L-436"><span class="linenos">436</span></a>                                        <span class="bp">self</span><span class="o">.</span><span class="n">_line_vlength</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="p">,</span> <span class="n">pen</span><span class="p">)</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos">437</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos">438</span></a>
</span><span id="L-439"><a href="#L-439"><span class="linenos">439</span></a>        <span class="c1">#---------------------------------------draw disabled nodes---------------------------------------</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos">440</span></a>        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_blocked_nodes</span><span class="p">():</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos">441</span></a>            <span class="n">xPos</span> <span class="o">=</span> <span class="p">(</span><span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos">442</span></a>            <span class="n">yPos</span> <span class="o">=</span> <span class="p">(</span><span class="n">node</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos">443</span></a>            
</span><span id="L-444"><a href="#L-444"><span class="linenos">444</span></a>            <span class="n">rect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addRect</span><span class="p">(</span> <span class="p">(</span><span class="n">xPos</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="mf">0.1</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span> 
</span><span id="L-445"><a href="#L-445"><span class="linenos">445</span></a>                                        <span class="p">(</span><span class="n">yPos</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="mf">0.1</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span> 
</span><span id="L-446"><a href="#L-446"><span class="linenos">446</span></a>                                        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="mf">0.8</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span> 
</span><span id="L-447"><a href="#L-447"><span class="linenos">447</span></a>                                        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="mf">0.8</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span> 
</span><span id="L-448"><a href="#L-448"><span class="linenos">448</span></a>                                        <span class="n">pen</span><span class="p">,</span> <span class="n">brush_disabled_node</span><span class="p">)</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos">449</span></a><span class="w">            </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos">450</span></a><span class="sd">            rect = self._scene.addRect( xPos*self._scaling, </span>
</span><span id="L-451"><a href="#L-451"><span class="linenos">451</span></a><span class="sd">                                        yPos*self._scaling, </span>
</span><span id="L-452"><a href="#L-452"><span class="linenos">452</span></a><span class="sd">                                        self._w_distance*self._scaling, </span>
</span><span id="L-453"><a href="#L-453"><span class="linenos">453</span></a><span class="sd">                                        self._h_distance*self._scaling, </span>
</span><span id="L-454"><a href="#L-454"><span class="linenos">454</span></a><span class="sd">                                        pen, brush_disabled_node)</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos">455</span></a><span class="sd">            &#39;&#39;&#39;</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos">456</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos">457</span></a>
</span><span id="L-458"><a href="#L-458"><span class="linenos">458</span></a>        <span class="c1">#---------------------------------------draw items---------------------------------------</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos">459</span></a>        <span class="k">for</span> <span class="n">item_dic</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">iterate_graphic_dictionaries</span><span class="p">():</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos">460</span></a>            <span class="n">count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">item_dic</span><span class="p">)</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos">461</span></a>            <span class="n">number</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos">462</span></a>            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">item_dic</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos">463</span></a>                <span class="n">item</span><span class="o">.</span><span class="n">set_display_mode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_display_mode</span><span class="p">)</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos">464</span></a>                <span class="c1">#item.set_display_mode(0)</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos">465</span></a>                <span class="n">x_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_position</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos">466</span></a>                <span class="n">y_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_position</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos">467</span></a>                <span class="n">action</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_action</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_current_step</span><span class="p">())</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos">468</span></a>                <span class="k">if</span> <span class="n">action</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos">469</span></a>                    <span class="n">action_name</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos">470</span></a>                    <span class="n">action_value</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos">471</span></a>                    <span class="k">if</span> <span class="n">action_name</span> <span class="o">==</span> <span class="s1">&#39;move&#39;</span><span class="p">:</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos">472</span></a>                        <span class="n">action_x</span> <span class="o">=</span> <span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">number</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos">473</span></a>                        <span class="n">action_y</span> <span class="o">=</span> <span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">number</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos">474</span></a>                        <span class="n">x_pos</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">x_pos</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">action_x</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span><span class="p">))))</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos">475</span></a>                        <span class="n">y_pos</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">y_pos</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">action_y</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span><span class="p">))))</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos">476</span></a>                <span class="n">x_pos</span> <span class="o">=</span> <span class="n">x_pos</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">/</span><span class="mi">2</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos">477</span></a>                <span class="n">y_pos</span> <span class="o">=</span> <span class="n">y_pos</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">/</span><span class="mi">2</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos">478</span></a>                <span class="n">item</span><span class="o">.</span><span class="n">set_rect</span><span class="p">(</span><span class="n">QRect</span><span class="p">(</span><span class="n">x_pos</span><span class="p">,</span> <span class="n">y_pos</span><span class="p">,</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos">479</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos">480</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">))</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos">481</span></a>                
</span><span id="L-482"><a href="#L-482"><span class="linenos">482</span></a>                <span class="n">item</span><span class="o">.</span><span class="n">determine_color</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos">483</span></a>                
</span><span id="L-484"><a href="#L-484"><span class="linenos">484</span></a>                <span class="c1">#---------------------------------------draw start point---------------------------------------</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos">485</span></a>                <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get_draw_startpoint</span><span class="p">():</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos">486</span></a>
</span><span id="L-487"><a href="#L-487"><span class="linenos">487</span></a>                    <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="o">*</span><span class="mf">0.5</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos">488</span></a>                    <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="o">*</span><span class="mf">0.5</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos">489</span></a>                                           
</span><span id="L-490"><a href="#L-490"><span class="linenos">490</span></a>                    <span class="n">x_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_start_position</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos">491</span></a>                    <span class="n">y_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_start_position</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos">492</span></a>                    <span class="n">x_pos</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">x_pos</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos">493</span></a>                    <span class="n">y_pos</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">y_pos</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos">494</span></a>
</span><span id="L-495"><a href="#L-495"><span class="linenos">495</span></a>                    <span class="n">pen</span> <span class="o">=</span> <span class="n">QPen</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get_color</span><span class="p">())</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos">496</span></a>                    <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get_highlighted</span><span class="p">():</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos">497</span></a>                        <span class="n">startpoint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addEllipse</span><span class="p">(</span><span class="n">x_pos</span><span class="o">-</span><span class="mf">0.75</span><span class="o">*</span><span class="n">w</span><span class="p">,</span> 
</span><span id="L-498"><a href="#L-498"><span class="linenos">498</span></a>                                                  <span class="n">y_pos</span><span class="o">-</span><span class="mf">0.75</span><span class="o">*</span><span class="n">h</span><span class="p">,</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos">499</span></a>                                                  <span class="mf">1.5</span><span class="o">*</span><span class="n">w</span><span class="p">,</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos">500</span></a>                                                  <span class="mf">1.5</span><span class="o">*</span><span class="n">h</span><span class="p">,</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos">501</span></a>                                                  <span class="n">pen</span><span class="p">,</span> <span class="n">brush_start_point_highlighted</span><span class="p">)</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos">502</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">startpoint</span><span class="p">)</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos">503</span></a>
</span><span id="L-504"><a href="#L-504"><span class="linenos">504</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos">505</span></a>                        <span class="n">startpoint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addEllipse</span><span class="p">(</span><span class="n">x_pos</span><span class="o">-</span><span class="n">w</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span> 
</span><span id="L-506"><a href="#L-506"><span class="linenos">506</span></a>                                                  <span class="n">y_pos</span><span class="o">-</span><span class="n">h</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos">507</span></a>                                                  <span class="n">w</span><span class="p">,</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos">508</span></a>                                                  <span class="n">h</span><span class="p">,</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos">509</span></a>                                                  <span class="n">pen</span><span class="p">,</span> <span class="n">brush_start_point</span><span class="p">)</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos">510</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">startpoint</span><span class="p">)</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos">511</span></a>                                 
</span><span id="L-512"><a href="#L-512"><span class="linenos">512</span></a>                <span class="c1">#---------------------------------------draw path---------------------------------------</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos">513</span></a>                <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get_draw_path</span><span class="p">():</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos">514</span></a>
</span><span id="L-515"><a href="#L-515"><span class="linenos">515</span></a>                    <span class="n">x_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_start_position</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos">516</span></a>                    <span class="n">y_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_start_position</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos">517</span></a>                    <span class="n">pen</span> <span class="o">=</span> <span class="n">QPen</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get_color</span><span class="p">())</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos">518</span></a>                    <span class="n">pen</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos">519</span></a>                    <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get_highlighted</span><span class="p">():</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos">520</span></a>                        <span class="n">pen</span> <span class="o">=</span> <span class="n">QPen</span><span class="p">(</span><span class="n">color_travelled_path_highlighted</span><span class="p">)</span>      
</span><span id="L-521"><a href="#L-521"><span class="linenos">521</span></a>                        <span class="n">pen</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">*</span><span class="mi">4</span><span class="p">)</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos">522</span></a>
</span><span id="L-523"><a href="#L-523"><span class="linenos">523</span></a>                    <span class="k">if</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos">524</span></a>                        <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DotLine</span><span class="p">)</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos">525</span></a>                    <span class="k">elif</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos">526</span></a>                        <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DashDotDotLine</span><span class="p">)</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos">527</span></a>                    <span class="k">elif</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos">528</span></a>                        <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DashDotLine</span><span class="p">)</span>           
</span><span id="L-529"><a href="#L-529"><span class="linenos">529</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos">530</span></a>                        <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DashLine</span><span class="p">)</span>           
</span><span id="L-531"><a href="#L-531"><span class="linenos">531</span></a>
</span><span id="L-532"><a href="#L-532"><span class="linenos">532</span></a>                    <span class="n">cc</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos">533</span></a>                    <span class="k">while</span><span class="p">(</span><span class="n">cc</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_num_steps</span><span class="p">()):</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos">534</span></a>                        <span class="n">action</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_action</span><span class="p">(</span><span class="n">cc</span><span class="p">)</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos">535</span></a>                        <span class="k">if</span> <span class="n">action</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos">536</span></a>                            
</span><span id="L-537"><a href="#L-537"><span class="linenos">537</span></a>                            <span class="k">if</span> <span class="n">action</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;move&#39;</span><span class="p">:</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos">538</span></a>                                <span class="n">action_value</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos">539</span></a>                                
</span><span id="L-540"><a href="#L-540"><span class="linenos">540</span></a>                                <span class="n">x_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_pos</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos">541</span></a>                                <span class="n">y_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_pos</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos">542</span></a>                                <span class="n">x2_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_pos</span><span class="o">+</span><span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">number</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos">543</span></a>                                <span class="n">y2_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_pos</span><span class="o">+</span><span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">number</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos">544</span></a>                                
</span><span id="L-545"><a href="#L-545"><span class="linenos">545</span></a>                                <span class="k">if</span> <span class="p">(</span><span class="n">cc</span> <span class="o">==</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_num_steps</span><span class="p">())</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos">546</span></a>
</span><span id="L-547"><a href="#L-547"><span class="linenos">547</span></a>                                    <span class="n">x2_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_pos</span><span class="o">+</span><span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">number</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span><span class="p">))</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos">548</span></a>                                            <span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos">549</span></a>                                    <span class="n">y2_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_pos</span><span class="o">+</span><span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">number</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span><span class="p">))</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos">550</span></a>                                            <span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos">551</span></a>                                
</span><span id="L-552"><a href="#L-552"><span class="linenos">552</span></a>                                <span class="n">x_pos</span> <span class="o">=</span> <span class="n">x_pos</span> <span class="o">+</span> <span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">number</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos">553</span></a>                                <span class="n">y_pos</span> <span class="o">=</span> <span class="n">y_pos</span> <span class="o">+</span> <span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">number</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos">554</span></a>
</span><span id="L-555"><a href="#L-555"><span class="linenos">555</span></a>                                <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addLine</span><span class="p">(</span><span class="n">x_posf</span><span class="p">,</span> <span class="n">y_posf</span><span class="p">,</span> <span class="n">x2_posf</span><span class="p">,</span> <span class="n">y2_posf</span><span class="p">,</span> <span class="n">pen</span><span class="p">)</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos">556</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos">557</span></a>                        <span class="n">cc</span> <span class="o">=</span> <span class="n">cc</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos">558</span></a>                        
</span><span id="L-559"><a href="#L-559"><span class="linenos">559</span></a>                <span class="c1">#---------------------------------------draw future path---------------------------------------</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos">560</span></a>                <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get_draw_future_path</span><span class="p">():</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos">561</span></a>                    <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get_future_path</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos">562</span></a>                        <span class="n">x_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_future_path</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pos_x</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos">563</span></a>                        <span class="n">y_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_future_path</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pos_y</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos">564</span></a>
</span><span id="L-565"><a href="#L-565"><span class="linenos">565</span></a>                        <span class="n">pen</span> <span class="o">=</span> <span class="n">QPen</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get_color</span><span class="p">())</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos">566</span></a>                        <span class="n">pen</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="p">)</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos">567</span></a>                        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get_highlighted</span><span class="p">():</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos">568</span></a>                            <span class="n">pen</span> <span class="o">=</span> <span class="n">QPen</span><span class="p">(</span><span class="n">color_future_path_highlighted</span><span class="p">)</span>      
</span><span id="L-569"><a href="#L-569"><span class="linenos">569</span></a>                            <span class="n">pen</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos">570</span></a>
</span><span id="L-571"><a href="#L-571"><span class="linenos">571</span></a>                        <span class="k">if</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos">572</span></a>                            <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DotLine</span><span class="p">)</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos">573</span></a>                        <span class="k">elif</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos">574</span></a>                            <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DashDotDotLine</span><span class="p">)</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos">575</span></a>                        <span class="k">elif</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos">576</span></a>                            <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DashDotLine</span><span class="p">)</span>           
</span><span id="L-577"><a href="#L-577"><span class="linenos">577</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos">578</span></a>                            <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DashLine</span><span class="p">)</span>           
</span><span id="L-579"><a href="#L-579"><span class="linenos">579</span></a>
</span><span id="L-580"><a href="#L-580"><span class="linenos">580</span></a>                        <span class="n">first</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos">581</span></a>                        <span class="k">for</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">get_future_path</span><span class="p">()[</span><span class="mi">1</span><span class="p">:]:</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos">582</span></a>
</span><span id="L-583"><a href="#L-583"><span class="linenos">583</span></a>                            <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos">584</span></a>                                <span class="k">break</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos">585</span></a>
</span><span id="L-586"><a href="#L-586"><span class="linenos">586</span></a>                            <span class="n">x2_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">position</span><span class="o">.</span><span class="n">pos_x</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos">587</span></a>                            <span class="n">y2_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">position</span><span class="o">.</span><span class="n">pos_y</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos">588</span></a>                        
</span><span id="L-589"><a href="#L-589"><span class="linenos">589</span></a>                            <span class="k">if</span> <span class="n">first</span><span class="p">:</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos">590</span></a>                                <span class="n">first</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos">591</span></a>                                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos">592</span></a>                                    <span class="n">x_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_pos</span><span class="o">-</span><span class="mf">0.5</span><span class="o">+</span><span class="p">(</span><span class="n">position</span><span class="o">.</span><span class="n">pos_x</span><span class="o">-</span><span class="n">x_pos</span><span class="p">)</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span><span class="p">)</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos">593</span></a>                                                                                        <span class="p">))</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos">594</span></a>                                    <span class="n">y_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_pos</span><span class="o">-</span><span class="mf">0.5</span><span class="o">+</span><span class="p">(</span><span class="n">position</span><span class="o">.</span><span class="n">pos_y</span><span class="o">-</span><span class="n">y_pos</span><span class="p">)</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span><span class="p">)</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos">595</span></a>                                                                                        <span class="p">))</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos">596</span></a>                                <span class="k">else</span><span class="p">:</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos">597</span></a>                                    <span class="n">x_posf</span> <span class="o">=</span> <span class="n">x2_posf</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos">598</span></a>                                    <span class="n">y_posf</span> <span class="o">=</span> <span class="n">y2_posf</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos">599</span></a>                                
</span><span id="L-600"><a href="#L-600"><span class="linenos">600</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos">601</span></a>                                <span class="n">x_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_pos</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos">602</span></a>                                <span class="n">y_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_pos</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos">603</span></a>
</span><span id="L-604"><a href="#L-604"><span class="linenos">604</span></a>                            <span class="n">x_pos</span> <span class="o">=</span> <span class="n">position</span><span class="o">.</span><span class="n">pos_x</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos">605</span></a>                            <span class="n">y_pos</span> <span class="o">=</span> <span class="n">position</span><span class="o">.</span><span class="n">pos_y</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos">606</span></a>                            
</span><span id="L-607"><a href="#L-607"><span class="linenos">607</span></a>                            <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addLine</span><span class="p">(</span><span class="n">x_posf</span><span class="p">,</span> <span class="n">y_posf</span><span class="p">,</span> <span class="n">x2_posf</span><span class="p">,</span> <span class="n">y2_posf</span><span class="p">,</span> <span class="n">pen</span><span class="p">)</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos">608</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos">609</span></a>                            <span class="n">first</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos">610</span></a>
</span><span id="L-611"><a href="#L-611"><span class="linenos">611</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos">612</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos">613</span></a>                <span class="n">number</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos">614</span></a>                
</span><span id="L-615"><a href="#L-615"><span class="linenos">615</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_windows</span><span class="p">()</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos">616</span></a>
</span><span id="L-617"><a href="#L-617"><span class="linenos">617</span></a>    <span class="k">def</span> <span class="nf">update_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">forced</span><span class="p">):</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos">618</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos">619</span></a><span class="sd">        This function will be called every time the timer is running out. </span>
</span><span id="L-620"><a href="#L-620"><span class="linenos">620</span></a><span class="sd">        The function changes the state of this class depending on </span>
</span><span id="L-621"><a href="#L-621"><span class="linenos">621</span></a><span class="sd">        the actual state of this class and the data received by the model through ROS2. </span>
</span><span id="L-622"><a href="#L-622"><span class="linenos">622</span></a><span class="sd">        Depending on the state of this class different actions will be performed by the model.</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos">623</span></a><span class="sd">        </span>
</span><span id="L-624"><a href="#L-624"><span class="linenos">624</span></a><span class="sd">        Following states are accepted: </span>
</span><span id="L-625"><a href="#L-625"><span class="linenos">625</span></a><span class="sd">        -   PUBLISH: model sends information about the map (MapInfo.msg) and every robot (RobotInfo.msg) to the CONTROLLER</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos">626</span></a><span class="sd">        -   WAIT:    no action until the model has received all information about the next actions from the CONTROLLER</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos">627</span></a><span class="sd">        -   EXEC:    modelView executes all received actions from the CONTROLLER by the model for the next step incrementally.</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos">628</span></a><span class="sd">                     After completing the step by the modelview the model will be updated with new positions of the robots and </span>
</span><span id="L-629"><a href="#L-629"><span class="linenos">629</span></a><span class="sd">                     the simulation changes it&#39;s state to PUBLISH again!</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos">630</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos">631</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> 
</span><span id="L-632"><a href="#L-632"><span class="linenos">632</span></a>            <span class="k">return</span>        
</span><span id="L-633"><a href="#L-633"><span class="linenos">633</span></a>                
</span><span id="L-634"><a href="#L-634"><span class="linenos">634</span></a>        <span class="c1">#STATE 0: PUBLISH ROS MESSAGES</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos">635</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="n">PUBLISH</span><span class="p">:</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos">636</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MODE: PUBLISH INFO (MapInfo.msg and RobotInfo.msg)&quot;</span><span class="p">)</span>    
</span><span id="L-637"><a href="#L-637"><span class="linenos">637</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">mapf_init_next_step</span><span class="p">()</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos">638</span></a>            <span class="c1">#set time for next timeout, after timeout come back</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos">639</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timeout_end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_next_ros_timeout</span><span class="p">()</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos">640</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">WAIT</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos">641</span></a>            
</span><span id="L-642"><a href="#L-642"><span class="linenos">642</span></a>        <span class="c1">#STATE 1: UPDATE, WAIT</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos">643</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="n">WAIT</span><span class="p">:</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos">644</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MODE: WAITING (for RobotAction.msg)&quot;</span><span class="p">)</span>    
</span><span id="L-645"><a href="#L-645"><span class="linenos">645</span></a>            <span class="n">simulation_ready</span><span class="p">,</span> <span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">mapf_spin_once</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timeout_end</span><span class="p">)</span>        
</span><span id="L-646"><a href="#L-646"><span class="linenos">646</span></a>            <span class="k">if</span> <span class="n">simulation_ready</span><span class="p">:</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos">647</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">EXEC</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos">648</span></a>            <span class="k">elif</span> <span class="n">timeout</span><span class="p">:</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos">649</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">PUBLISH</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos">650</span></a>                
</span><span id="L-651"><a href="#L-651"><span class="linenos">651</span></a>        <span class="c1">#STATE 2: EXECUTE ONE STEP</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos">652</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="n">EXEC</span><span class="p">:</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos">653</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MODE: EXEC (moving robots)&quot;</span><span class="p">)</span>    
</span><span id="L-654"><a href="#L-654"><span class="linenos">654</span></a>            <span class="c1">#if self._timer_count &gt;= 10 or forced:</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos">655</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span> <span class="ow">or</span> <span class="n">forced</span><span class="p">:</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos">656</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos">657</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos">658</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_timeout_end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_next_ros_timeout</span><span class="p">()</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos">659</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">PUBLISH</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos">660</span></a>            <span class="k">else</span><span class="p">:</span> 
</span><span id="L-661"><a href="#L-661"><span class="linenos">661</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos">662</span></a>    
</span><span id="L-663"><a href="#L-663"><span class="linenos">663</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos">664</span></a>
</span><span id="L-665"><a href="#L-665"><span class="linenos">665</span></a>    <span class="k">def</span> <span class="nf">do_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos">666</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos">667</span></a><span class="sd">        This function performs a step forward when the button &quot;&gt;&quot; in the GUI was pressed</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos">668</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos">669</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> 
</span><span id="L-670"><a href="#L-670"><span class="linenos">670</span></a>            <span class="k">return</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos">671</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">redo</span><span class="p">()</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos">672</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span> 
</span><span id="L-673"><a href="#L-673"><span class="linenos">673</span></a>
</span><span id="L-674"><a href="#L-674"><span class="linenos">674</span></a>    <span class="k">def</span> <span class="nf">undo_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos">675</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos">676</span></a><span class="sd">        This function performs a step back when the button &quot;&lt;&quot; in the GUI was pressed</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos">677</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos">678</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> 
</span><span id="L-679"><a href="#L-679"><span class="linenos">679</span></a>            <span class="k">return</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos">680</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">undo</span><span class="p">()</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos">681</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos">682</span></a> 
</span><span id="L-683"><a href="#L-683"><span class="linenos">683</span></a>    <span class="k">def</span> <span class="nf">_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale_x</span><span class="p">,</span> <span class="n">scale_y</span><span class="p">):</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos">684</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos">685</span></a><span class="sd">        This function sets the scale factors for painting the elements in the visualization.</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos">686</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos">687</span></a>        <span class="n">old_zoom</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos">688</span></a>        <span class="n">new_zoom</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">scale_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">scale_y</span><span class="p">)</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos">689</span></a>        <span class="n">scale</span> <span class="o">=</span> <span class="n">new_zoom</span><span class="o">/</span><span class="n">old_zoom</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos">690</span></a>        <span class="k">if</span> <span class="n">old_zoom</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="p">:</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos">691</span></a>            <span class="n">scale</span> <span class="o">=</span> <span class="n">new_zoom</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos">692</span></a>        <span class="k">if</span>  <span class="n">new_zoom</span> <span class="o">&gt;=</span> <span class="mf">1.0</span><span class="p">:</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos">693</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos">694</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_display_mode</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-695"><a href="#L-695"><span class="linenos">695</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">=</span> <span class="mf">1.0</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos">696</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos">697</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos">698</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_display_mode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos">699</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="n">old_zoom</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="n">old_zoom</span><span class="p">)</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos">700</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_display_mode</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos">701</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">scale_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">scale_y</span><span class="p">)</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos">702</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos">703</span></a>            <span class="k">if</span> <span class="n">new_zoom</span> <span class="o">&lt;</span> <span class="mf">0.5</span><span class="p">:</span>
</span><span id="L-704"><a href="#L-704"><span class="linenos">704</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span> <span class="o">=</span> <span class="mi">1</span>                
</span><span id="L-705"><a href="#L-705"><span class="linenos">705</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">scale_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">scale_y</span><span class="p">)</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos">706</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos">707</span></a>
</span><span id="L-708"><a href="#L-708"><span class="linenos">708</span></a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos">709</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos">710</span></a><span class="sd">        This function removes the items from the window which belong to the previous paint. </span>
</span><span id="L-711"><a href="#L-711"><span class="linenos">711</span></a><span class="sd">        Every time the visualization is updated all old elements are removed from the window. </span>
</span><span id="L-712"><a href="#L-712"><span class="linenos">712</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos">713</span></a>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lines</span><span class="p">:</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos">714</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos">715</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_lines</span> <span class="o">=</span> <span class="p">[]</span>        
</span><span id="L-716"><a href="#L-716"><span class="linenos">716</span></a>
</span><span id="L-717"><a href="#L-717"><span class="linenos">717</span></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="p">:</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos">718</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos">719</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos">720</span></a>        <span class="c1">#self._scene.clear()</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos">721</span></a>
</span><span id="L-722"><a href="#L-722"><span class="linenos">722</span></a>    <span class="k">def</span> <span class="nf">scene_coordinates_to_grid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos">723</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos">724</span></a><span class="sd">        @private</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos">725</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos">726</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span> 
</span><span id="L-727"><a href="#L-727"><span class="linenos">727</span></a>            <span class="ow">or</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_line_hlength</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> 
</span><span id="L-728"><a href="#L-728"><span class="linenos">728</span></a>            <span class="ow">or</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_line_vlength</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">):</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos">729</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos">730</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos">731</span></a>                    <span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos">732</span></a>        <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos">733</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos">734</span></a>        <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos">735</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos">736</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos">737</span></a>
</span><span id="L-738"><a href="#L-738"><span class="linenos">738</span></a>    <span class="k">def</span> <span class="nf">scene_coordinates_to_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos">739</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos">740</span></a><span class="sd">        @private</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos">741</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos">742</span></a>        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene_coordinates_to_grid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos">743</span></a>        <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos">744</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-745"><a href="#L-745"><span class="linenos">745</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">is_node</span><span class="p">(</span><span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">node</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos">746</span></a>            <span class="k">return</span> <span class="n">node</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos">747</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos">748</span></a>
</span><span id="L-749"><a href="#L-749"><span class="linenos">749</span></a>    <span class="k">def</span> <span class="nf">get_next_ros_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos">750</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos">751</span></a><span class="sd">        This function returns the next timeout for ROS2 after which the simulation should move back to the mode PUBLISH.  </span>
</span><span id="L-752"><a href="#L-752"><span class="linenos">752</span></a><span class="sd">        </span>
</span><span id="L-753"><a href="#L-753"><span class="linenos">753</span></a><span class="sd">        This timeout is needed in the case the simulation has not received the needed information from the controller after </span>
</span><span id="L-754"><a href="#L-754"><span class="linenos">754</span></a><span class="sd">        a specific time. In this case the complete cycle should be restarted. </span>
</span><span id="L-755"><a href="#L-755"><span class="linenos">755</span></a><span class="sd">        This done by the simulation publishing the information about the map and the items once again.</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos">756</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos">757</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="mi">60</span><span class="p">)</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos">758</span></a>
</span><span id="L-759"><a href="#L-759"><span class="linenos">759</span></a>
</span><span id="L-760"><a href="#L-760"><span class="linenos">760</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos">761</span></a><span class="sd">    self._grid_size_x = 1  </span>
</span><span id="L-762"><a href="#L-762"><span class="linenos">762</span></a><span class="sd">    self._grid_size_y = 1  </span>
</span><span id="L-763"><a href="#L-763"><span class="linenos">763</span></a><span class="sd">    </span>
</span><span id="L-764"><a href="#L-764"><span class="linenos">764</span></a><span class="sd">    def restart_model(self):</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos">765</span></a><span class="sd">        if self._model is None: </span>
</span><span id="L-766"><a href="#L-766"><span class="linenos">766</span></a><span class="sd">            return</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos">767</span></a><span class="sd">        self._model.restart()</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos">768</span></a><span class="sd">        self.update()</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos">769</span></a><span class="sd">    </span>
</span><span id="L-770"><a href="#L-770"><span class="linenos">770</span></a><span class="sd">    def get_timer_speedup(self):</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos">771</span></a><span class="sd">        return self._timer_scale</span>
</span><span id="L-772"><a href="#L-772"><span class="linenos">772</span></a><span class="sd">    </span>
</span><span id="L-773"><a href="#L-773"><span class="linenos">773</span></a><span class="sd">    def _pickup(self, robot, shelf):</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos">774</span></a><span class="sd">        robot.set_initial_carries(shelf)</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos">775</span></a><span class="sd">        robot.set_carries(shelf)</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos">776</span></a><span class="sd">        self._menu.hide()</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos">777</span></a><span class="sd">        self._model.update_windows()</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos">778</span></a>
</span><span id="L-779"><a href="#L-779"><span class="linenos">779</span></a><span class="sd">    def _add_highway(self, x, y):</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos">780</span></a><span class="sd">        self._model.add_highway(x, y)</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos">781</span></a><span class="sd">        self._menu.hide()</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos">782</span></a><span class="sd">        self._model.update_windows()</span>
</span><span id="L-783"><a href="#L-783"><span class="linenos">783</span></a><span class="sd">    </span>
</span><span id="L-784"><a href="#L-784"><span class="linenos">784</span></a><span class="sd">    def _remove_highway(self, x, y):</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos">785</span></a><span class="sd">        self._model.remove_highway(x, y)</span>
</span><span id="L-786"><a href="#L-786"><span class="linenos">786</span></a><span class="sd">        self._menu.hide()</span>
</span><span id="L-787"><a href="#L-787"><span class="linenos">787</span></a><span class="sd">        self._model.update_windows()</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos">788</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos">789</span></a>
</span><span id="L-790"><a href="#L-790"><span class="linenos">790</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;    </span>
</span><span id="L-791"><a href="#L-791"><span class="linenos">791</span></a><span class="sd">    def enable_drag(self, enable):</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos">792</span></a><span class="sd">        for item in self.get_model().iterate_graphic_items():</span>
</span><span id="L-793"><a href="#L-793"><span class="linenos">793</span></a><span class="sd">            item.enable_drag(enable)</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos">794</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-795"><a href="#L-795"><span class="linenos">795</span></a>
</span><span id="L-796"><a href="#L-796"><span class="linenos">796</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos">797</span></a><span class="sd">    def contextMenuEvent(self, event):</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos">798</span></a><span class="sd">        if self._model == None:</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos">799</span></a><span class="sd">            return</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos">800</span></a>
</span><span id="L-801"><a href="#L-801"><span class="linenos">801</span></a><span class="sd">        point = self.mapToScene(event.x(), event.y())</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos">802</span></a><span class="sd">        node = self.scene_coordinates_to_grid(point.x(), point.y())</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos">803</span></a><span class="sd">        if node is None:</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos">804</span></a><span class="sd">            return</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos">805</span></a><span class="sd">        x = node[0]</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos">806</span></a><span class="sd">        y = node[1]</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos">807</span></a>
</span><span id="L-808"><a href="#L-808"><span class="linenos">808</span></a><span class="sd">        if not self._model.get_editable():</span>
</span><span id="L-809"><a href="#L-809"><span class="linenos">809</span></a><span class="sd">            return </span>
</span><span id="L-810"><a href="#L-810"><span class="linenos">810</span></a>
</span><span id="L-811"><a href="#L-811"><span class="linenos">811</span></a><span class="sd">        self._menu.clear() </span>
</span><span id="L-812"><a href="#L-812"><span class="linenos">812</span></a>
</span><span id="L-813"><a href="#L-813"><span class="linenos">813</span></a><span class="sd">        if self._model.is_node(x,y):</span>
</span><span id="L-814"><a href="#L-814"><span class="linenos">814</span></a><span class="sd">            action = QAction(&#39;disable node&#39;, self)</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos">815</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + N&#39;)</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos">816</span></a><span class="sd">            action.setStatusTip(&#39;Disables the selected node&#39;)</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos">817</span></a><span class="sd">            action.triggered.connect(lambda: self._remove_node(x, y))</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos">818</span></a><span class="sd">            self._menu.addAction(action)   </span>
</span><span id="L-819"><a href="#L-819"><span class="linenos">819</span></a><span class="sd">        else:</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos">820</span></a><span class="sd">            action = QAction(&#39;enable node&#39;, self)</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos">821</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + N&#39;)</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos">822</span></a><span class="sd">            action.setStatusTip(&#39;Enables the selected node&#39;)</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos">823</span></a><span class="sd">            action.triggered.connect(lambda: self._add_node(x, y))</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos">824</span></a><span class="sd">            self._menu.addAction(action) </span>
</span><span id="L-825"><a href="#L-825"><span class="linenos">825</span></a><span class="sd">        </span>
</span><span id="L-826"><a href="#L-826"><span class="linenos">826</span></a><span class="sd">        if self._model.is_highway(x,y):</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos">827</span></a><span class="sd">            action = QAction(&#39;remove highway&#39;, self)</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos">828</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + H&#39;)</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos">829</span></a><span class="sd">            action.setStatusTip(&#39;Removes a highway from the selected node&#39;)</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos">830</span></a><span class="sd">            action.triggered.connect(lambda: self._remove_highway(x,y))</span>
</span><span id="L-831"><a href="#L-831"><span class="linenos">831</span></a><span class="sd">            self._menu.addAction(action)                 </span>
</span><span id="L-832"><a href="#L-832"><span class="linenos">832</span></a><span class="sd">        elif self._model.is_node(x,y):</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos">833</span></a><span class="sd">            action = QAction(&#39;add highway&#39;, self)</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos">834</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + H&#39;)</span>
</span><span id="L-835"><a href="#L-835"><span class="linenos">835</span></a><span class="sd">            action.setStatusTip(&#39;Adds a highway to the selected node&#39;)</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos">836</span></a><span class="sd">            action.triggered.connect(lambda: self._add_highway(x,y))</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos">837</span></a><span class="sd">            self._menu.addAction(action)                   </span>
</span><span id="L-838"><a href="#L-838"><span class="linenos">838</span></a>
</span><span id="L-839"><a href="#L-839"><span class="linenos">839</span></a><span class="sd">        robot = self._model.filter_items(&#39;robot&#39;, position = (x,y), return_first = True)[0]</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos">840</span></a><span class="sd">        shelf = self._model.filter_items(&#39;shelf&#39;, position = (x,y), return_first = True)[0]</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos">841</span></a>
</span><span id="L-842"><a href="#L-842"><span class="linenos">842</span></a><span class="sd">        if robot is not None:</span>
</span><span id="L-843"><a href="#L-843"><span class="linenos">843</span></a><span class="sd">            if shelf is not None: </span>
</span><span id="L-844"><a href="#L-844"><span class="linenos">844</span></a><span class="sd">                if robot.get_initial_carries() is not None:</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos">845</span></a><span class="sd">                    action = QAction(&#39;putdown&#39;, self)</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos">846</span></a><span class="sd">                    action.setShortcut(&#39;Ctrl + P&#39;)</span>
</span><span id="L-847"><a href="#L-847"><span class="linenos">847</span></a><span class="sd">                    action.setStatusTip(&#39;The robot in the selected node puts down the carried shelf&#39;)</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos">848</span></a><span class="sd">                    action.triggered.connect(lambda: self._pickup(robot, None))</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos">849</span></a><span class="sd">                    self._menu.addAction(action)</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos">850</span></a><span class="sd">                else:</span>
</span><span id="L-851"><a href="#L-851"><span class="linenos">851</span></a><span class="sd">                    action = QAction(&#39;pickup&#39;, self)</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos">852</span></a><span class="sd">                    action.setShortcut(&#39;Ctrl + P&#39;)</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos">853</span></a><span class="sd">                    action.setStatusTip(&#39;The robot in the selected node picks up the shelf in the selcted node&#39;)</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos">854</span></a><span class="sd">                    action.triggered.connect(lambda: self._pickup(robot, shelf))</span>
</span><span id="L-855"><a href="#L-855"><span class="linenos">855</span></a><span class="sd">                    self._menu.addAction(action)</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos">856</span></a>
</span><span id="L-857"><a href="#L-857"><span class="linenos">857</span></a><span class="sd">                    action = QAction(&#39;remove robot&#39;, self)</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos">858</span></a><span class="sd">                    action.setShortcut(&#39;Ctrl + R&#39;)</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos">859</span></a><span class="sd">                    action.setStatusTip(&#39;Removes a robot from the selected node&#39;)</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos">860</span></a><span class="sd">                    action.triggered.connect(lambda: self._remove_item(robot))</span>
</span><span id="L-861"><a href="#L-861"><span class="linenos">861</span></a><span class="sd">                    self._menu.addAction(action)</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos">862</span></a><span class="sd">            else:</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos">863</span></a><span class="sd">                action = QAction(&#39;remove robot&#39;, self)</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos">864</span></a><span class="sd">                action.setShortcut(&#39;Ctrl + R&#39;)</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos">865</span></a><span class="sd">                action.setStatusTip(&#39;Removes a robot from the selected node&#39;)</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos">866</span></a><span class="sd">                action.triggered.connect(lambda: self._remove_item(robot))</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos">867</span></a><span class="sd">                self._menu.addAction(action)</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos">868</span></a>
</span><span id="L-869"><a href="#L-869"><span class="linenos">869</span></a><span class="sd">        elif self._model.is_node(x,y):</span>
</span><span id="L-870"><a href="#L-870"><span class="linenos">870</span></a><span class="sd">            action = QAction(&#39;add robot&#39;, self)</span>
</span><span id="L-871"><a href="#L-871"><span class="linenos">871</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + R&#39;)</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos">872</span></a><span class="sd">            action.setStatusTip(&#39;Adds a robot to the selected node&#39;)</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos">873</span></a><span class="sd">            action.triggered.connect(lambda: self._add_item(&#39;robot&#39;, x, y))</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos">874</span></a><span class="sd">            self._menu.addAction(action)</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos">875</span></a>
</span><span id="L-876"><a href="#L-876"><span class="linenos">876</span></a><span class="sd">        if shelf is not None:</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos">877</span></a><span class="sd">            action = QAction(&#39;remove shelf&#39;, self)</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos">878</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + S&#39;)</span>
</span><span id="L-879"><a href="#L-879"><span class="linenos">879</span></a><span class="sd">            action.setStatusTip(&#39;Removes a shelf from the selected node&#39;)</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos">880</span></a><span class="sd">            action.triggered.connect(lambda: self._remove_item(shelf))</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos">881</span></a><span class="sd">            self._menu.addAction(action)</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos">882</span></a><span class="sd">        elif self._model.is_node(x,y):</span>
</span><span id="L-883"><a href="#L-883"><span class="linenos">883</span></a><span class="sd">            action = QAction(&#39;add shelf&#39;, self)</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos">884</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + S&#39;)</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos">885</span></a><span class="sd">            action.setStatusTip(&#39;Adds a shelf to the selected node&#39;)</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos">886</span></a><span class="sd">            action.triggered.connect(lambda: self._add_item(&#39;shelf&#39;, x, y))</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos">887</span></a><span class="sd">            self._menu.addAction(action)</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos">888</span></a>
</span><span id="L-889"><a href="#L-889"><span class="linenos">889</span></a><span class="sd">        station = self._model.filter_items(&#39;pickingStation&#39;, position = (x,y), return_first = True)[0]</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos">890</span></a><span class="sd">        if station is not None:</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos">891</span></a><span class="sd">            action = QAction(&#39;remove picking station&#39;, self)</span>
</span><span id="L-892"><a href="#L-892"><span class="linenos">892</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + I&#39;)</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos">893</span></a><span class="sd">            action.setStatusTip(&#39;Removes a picking station from the selected node&#39;)</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos">894</span></a><span class="sd">            action.triggered.connect(lambda: self._remove_item(station))</span>
</span><span id="L-895"><a href="#L-895"><span class="linenos">895</span></a><span class="sd">            self._menu.addAction(action)</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos">896</span></a><span class="sd">        elif self._model.is_node(x,y):</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos">897</span></a><span class="sd">            action = QAction(&#39;add picking station&#39;, self)</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos">898</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + I&#39;)</span>
</span><span id="L-899"><a href="#L-899"><span class="linenos">899</span></a><span class="sd">            action.setStatusTip(&#39;Adds a picking Station to the selected node&#39;)</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos">900</span></a><span class="sd">            action.triggered.connect(lambda: self._add_item(&#39;pickingStation&#39;, x, y))</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos">901</span></a><span class="sd">            self._menu.addAction(action)           </span>
</span><span id="L-902"><a href="#L-902"><span class="linenos">902</span></a>
</span><span id="L-903"><a href="#L-903"><span class="linenos">903</span></a><span class="sd">        station2 = self._model.filter_items(&#39;chargingStation&#39;, position = (x,y), return_first = True)[0]</span>
</span><span id="L-904"><a href="#L-904"><span class="linenos">904</span></a><span class="sd">        if station is not None:</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos">905</span></a><span class="sd">            action = QAction(&#39;remove charging station&#39;, self)</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos">906</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + B&#39;)</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos">907</span></a><span class="sd">            action.setStatusTip(&#39;Removes a charging station from the selected node&#39;)</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos">908</span></a><span class="sd">            action.triggered.connect(lambda: self._remove_item(station))</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos">909</span></a><span class="sd">            self._menu.addAction(action)</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos">910</span></a><span class="sd">        elif self._model.is_node(x,y):</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos">911</span></a><span class="sd">            action = QAction(&#39;add charging station&#39;, self)</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos">912</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + B&#39;)</span>
</span><span id="L-913"><a href="#L-913"><span class="linenos">913</span></a><span class="sd">            action.setStatusTip(&#39;Adds a charging Station to the selected node&#39;)</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos">914</span></a><span class="sd">            action.triggered.connect(lambda: self._add_item(&#39;chargingStation&#39;, x, y))</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos">915</span></a><span class="sd">            self._menu.addAction(action)</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos">916</span></a>
</span><span id="L-917"><a href="#L-917"><span class="linenos">917</span></a><span class="sd">        self._menu.popup(QPoint(event.x(),event.y()))</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos">918</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-919"><a href="#L-919"><span class="linenos">919</span></a>
</span><span id="L-920"><a href="#L-920"><span class="linenos">920</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos">921</span></a><span class="sd">    def speed_up_timer(self, speed_up):</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos">922</span></a><span class="sd">        self._timer_scale *= 1 - speed_up</span>
</span><span id="L-923"><a href="#L-923"><span class="linenos">923</span></a><span class="sd">        if self._timer_scale &lt;= 0.1:</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos">924</span></a><span class="sd">            self._timer_scale = 0.1</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos">925</span></a><span class="sd">        self.adjust_timer()</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos">926</span></a><span class="sd">    </span>
</span><span id="L-927"><a href="#L-927"><span class="linenos">927</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos">928</span></a>
</span><span id="L-929"><a href="#L-929"><span class="linenos">929</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos">930</span></a><span class="sd">        #STATE 0: PUBLISH MESSAGES</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos">931</span></a><span class="sd">        if self._mode == PUB:</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos">932</span></a>
</span><span id="L-933"><a href="#L-933"><span class="linenos">933</span></a><span class="sd">        </span>
</span><span id="L-934"><a href="#L-934"><span class="linenos">934</span></a><span class="sd">        #STATE 1: UPDATE, WAIT </span>
</span><span id="L-935"><a href="#L-935"><span class="linenos">935</span></a><span class="sd">        if self._mode == WAIT:</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos">936</span></a><span class="sd">            simulation_ready, self._just_started, reset_time = self._model.mapf_spin_once(self._just_started, </span>
</span><span id="L-937"><a href="#L-937"><span class="linenos">937</span></a><span class="sd">                                                                                          self._timeout_end)        </span>
</span><span id="L-938"><a href="#L-938"><span class="linenos">938</span></a><span class="sd">            #reset timeout(only if not all needed ros messages received(e.g. RobotAction.msg) after a certain time</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos">939</span></a><span class="sd">            if reset_time:</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos">940</span></a><span class="sd">                self._timeout_end = self.get_next_ros_timeout()</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos">941</span></a>
</span><span id="L-942"><a href="#L-942"><span class="linenos">942</span></a><span class="sd">            #if simulation ready then change to the EXECUTION mode</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos">943</span></a><span class="sd">            if simulation_ready:</span>
</span><span id="L-944"><a href="#L-944"><span class="linenos">944</span></a><span class="sd">                self._mode == EXEC</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos">945</span></a><span class="sd">                </span>
</span><span id="L-946"><a href="#L-946"><span class="linenos">946</span></a><span class="sd">        #STATE 2: EXECUTE ONE STEP</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos">947</span></a><span class="sd">        elif self._mode == EXEC:</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos">948</span></a><span class="sd">            if self._timer_count &gt;= 10 or forced:</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos">949</span></a><span class="sd">                self._model.update()</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos">950</span></a><span class="sd">                self._timer_count = 0</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos">951</span></a><span class="sd">                self._timeout_end = self.get_next_ros_timeout()</span>
</span><span id="L-952"><a href="#L-952"><span class="linenos">952</span></a><span class="sd">                self._mode == PUB</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos">953</span></a><span class="sd">            else: </span>
</span><span id="L-954"><a href="#L-954"><span class="linenos">954</span></a><span class="sd">                self._timer_count += 1</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos">955</span></a>
</span><span id="L-956"><a href="#L-956"><span class="linenos">956</span></a><span class="sd">            self.update()</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos">957</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos">958</span></a>
</span><span id="L-959"><a href="#L-959"><span class="linenos">959</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos">960</span></a><span class="sd">    #at first run init step</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos">961</span></a><span class="sd">    if self._just_started == True:</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos">962</span></a><span class="sd">        print(&quot;RESET ALL AND PUBLISH INFO&quot;)</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos">963</span></a><span class="sd">        self._model.mapf_init_next_step()</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos">964</span></a><span class="sd">        self._just_started = False</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos">965</span></a><span class="sd">        </span>
</span><span id="L-966"><a href="#L-966"><span class="linenos">966</span></a><span class="sd">    #process all ros messages from callback functions</span>
</span><span id="L-967"><a href="#L-967"><span class="linenos">967</span></a><span class="sd">    self._model.mapf_ros_spin_once()</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos">968</span></a>
</span><span id="L-969"><a href="#L-969"><span class="linenos">969</span></a><span class="sd">    #init step again if no ros messages received from controller (e.g. RobotAction.msg) after a certain time</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos">970</span></a><span class="sd">    #if not self._model.mapf_all_ros_msg_received() and (time.time() &gt; self._timeout_end): </span>
</span><span id="L-971"><a href="#L-971"><span class="linenos">971</span></a><span class="sd">    if not simulation_ready and (time.time() &gt; self._timeout_end): </span>
</span><span id="L-972"><a href="#L-972"><span class="linenos">972</span></a><span class="sd">        print(&quot;RESET ALL AND PUBLISH INFO after TIMEOUT and NO ACTIONS RECEIVED&quot;)</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos">973</span></a><span class="sd">        self._model.mapf_init_next_step()</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos">974</span></a><span class="sd">        self._timeout_end = self.get_next_ros_timeout()</span>
</span><span id="L-975"><a href="#L-975"><span class="linenos">975</span></a><span class="sd">        return</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos">976</span></a>
</span><span id="L-977"><a href="#L-977"><span class="linenos">977</span></a><span class="sd">    #return if not all messages received for the next step</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos">978</span></a><span class="sd">    #if not self._model.mapf_all_ros_msg_received():</span>
</span><span id="L-979"><a href="#L-979"><span class="linenos">979</span></a><span class="sd">    if not simulation_ready:</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos">980</span></a><span class="sd">        self._timer_count = 0</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos">981</span></a><span class="sd">        return </span>
</span><span id="L-982"><a href="#L-982"><span class="linenos">982</span></a><span class="sd">    </span>
</span><span id="L-983"><a href="#L-983"><span class="linenos">983</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span></pre></div>


            </section>
                <section id="PUBLISH">
                    <div class="attr variable">
            <span class="name">PUBLISH</span>        =
<span class="default_value">0</span>

        
    </div>
    <a class="headerlink" href="#PUBLISH"></a>
    
            <div class="docstring"><p>= state of the simulation at the begin of every cycle. Here the simulation publishes all information 
(1xmapf_interfaces/MapInfo.msg and for every robot 1xmapf_interfaces/RobotInfo.msg).</p>
</div>


                </section>
                <section id="WAIT">
                    <div class="attr variable">
            <span class="name">WAIT</span>        =
<span class="default_value">1</span>

        
    </div>
    <a class="headerlink" href="#WAIT"></a>
    
            <div class="docstring"><p>= state of the simulation after it has published all information and is waiting until 
it has received all information from the CONTROLLER <br />
(for every robot 1xmapf_interfaces/RobotAction.msg).</p>
</div>


                </section>
                <section id="EXEC">
                    <div class="attr variable">
            <span class="name">EXEC</span>        =
<span class="default_value">2</span>

        
    </div>
    <a class="headerlink" href="#EXEC"></a>
    
            <div class="docstring"><p>= state of the simulation after it has received all information from the CONTROLLER. 
Here the simulation executes the given actions for every robot.</p>
</div>


                </section>
                <section id="MainScene">
                            <input id="MainScene-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">MainScene</span><wbr>(<span class="base">PyQt5.QtWidgets.QGraphicsScene</span>):

                <label class="view-source-button" for="MainScene-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MainScene"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MainScene-27"><a href="#MainScene-27"><span class="linenos">27</span></a><span class="k">class</span> <span class="nc">MainScene</span><span class="p">(</span><span class="n">QGraphicsScene</span><span class="p">):</span>
</span><span id="MainScene-28"><a href="#MainScene-28"><span class="linenos">28</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="MainScene-29"><a href="#MainScene-29"><span class="linenos">29</span></a>        <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>QGraphicsScene(parent: QObject = None)
QGraphicsScene(QRectF, parent: QObject = None)
QGraphicsScene(float, float, float, float, parent: QObject = None)</p>
</div>


                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>PyQt5.QtWidgets.QGraphicsScene</dt>
                                <dd id="MainScene.ItemIndexMethod" class="class">ItemIndexMethod</dd>
                <dd id="MainScene.SceneLayer" class="class">SceneLayer</dd>
                <dd id="MainScene.SceneLayers" class="class">SceneLayers</dd>
                <dd id="MainScene.activePanel" class="function">activePanel</dd>
                <dd id="MainScene.activeWindow" class="function">activeWindow</dd>
                <dd id="MainScene.addEllipse" class="function">addEllipse</dd>
                <dd id="MainScene.addItem" class="function">addItem</dd>
                <dd id="MainScene.addLine" class="function">addLine</dd>
                <dd id="MainScene.addPath" class="function">addPath</dd>
                <dd id="MainScene.addPixmap" class="function">addPixmap</dd>
                <dd id="MainScene.addPolygon" class="function">addPolygon</dd>
                <dd id="MainScene.addRect" class="function">addRect</dd>
                <dd id="MainScene.addSimpleText" class="function">addSimpleText</dd>
                <dd id="MainScene.addText" class="function">addText</dd>
                <dd id="MainScene.addWidget" class="function">addWidget</dd>
                <dd id="MainScene.advance" class="function">advance</dd>
                <dd id="MainScene.backgroundBrush" class="function">backgroundBrush</dd>
                <dd id="MainScene.bspTreeDepth" class="function">bspTreeDepth</dd>
                <dd id="MainScene.clear" class="function">clear</dd>
                <dd id="MainScene.clearFocus" class="function">clearFocus</dd>
                <dd id="MainScene.clearSelection" class="function">clearSelection</dd>
                <dd id="MainScene.collidingItems" class="function">collidingItems</dd>
                <dd id="MainScene.contextMenuEvent" class="function">contextMenuEvent</dd>
                <dd id="MainScene.createItemGroup" class="function">createItemGroup</dd>
                <dd id="MainScene.destroyItemGroup" class="function">destroyItemGroup</dd>
                <dd id="MainScene.dragEnterEvent" class="function">dragEnterEvent</dd>
                <dd id="MainScene.dragLeaveEvent" class="function">dragLeaveEvent</dd>
                <dd id="MainScene.dragMoveEvent" class="function">dragMoveEvent</dd>
                <dd id="MainScene.drawBackground" class="function">drawBackground</dd>
                <dd id="MainScene.drawForeground" class="function">drawForeground</dd>
                <dd id="MainScene.dropEvent" class="function">dropEvent</dd>
                <dd id="MainScene.event" class="function">event</dd>
                <dd id="MainScene.eventFilter" class="function">eventFilter</dd>
                <dd id="MainScene.focusInEvent" class="function">focusInEvent</dd>
                <dd id="MainScene.focusItem" class="function">focusItem</dd>
                <dd id="MainScene.focusNextPrevChild" class="function">focusNextPrevChild</dd>
                <dd id="MainScene.focusOnTouch" class="function">focusOnTouch</dd>
                <dd id="MainScene.focusOutEvent" class="function">focusOutEvent</dd>
                <dd id="MainScene.font" class="function">font</dd>
                <dd id="MainScene.foregroundBrush" class="function">foregroundBrush</dd>
                <dd id="MainScene.hasFocus" class="function">hasFocus</dd>
                <dd id="MainScene.height" class="function">height</dd>
                <dd id="MainScene.helpEvent" class="function">helpEvent</dd>
                <dd id="MainScene.inputMethodEvent" class="function">inputMethodEvent</dd>
                <dd id="MainScene.inputMethodQuery" class="function">inputMethodQuery</dd>
                <dd id="MainScene.invalidate" class="function">invalidate</dd>
                <dd id="MainScene.isActive" class="function">isActive</dd>
                <dd id="MainScene.itemAt" class="function">itemAt</dd>
                <dd id="MainScene.itemIndexMethod" class="function">itemIndexMethod</dd>
                <dd id="MainScene.items" class="function">items</dd>
                <dd id="MainScene.itemsBoundingRect" class="function">itemsBoundingRect</dd>
                <dd id="MainScene.keyPressEvent" class="function">keyPressEvent</dd>
                <dd id="MainScene.keyReleaseEvent" class="function">keyReleaseEvent</dd>
                <dd id="MainScene.minimumRenderSize" class="function">minimumRenderSize</dd>
                <dd id="MainScene.mouseDoubleClickEvent" class="function">mouseDoubleClickEvent</dd>
                <dd id="MainScene.mouseGrabberItem" class="function">mouseGrabberItem</dd>
                <dd id="MainScene.mouseMoveEvent" class="function">mouseMoveEvent</dd>
                <dd id="MainScene.mousePressEvent" class="function">mousePressEvent</dd>
                <dd id="MainScene.mouseReleaseEvent" class="function">mouseReleaseEvent</dd>
                <dd id="MainScene.palette" class="function">palette</dd>
                <dd id="MainScene.removeItem" class="function">removeItem</dd>
                <dd id="MainScene.render" class="function">render</dd>
                <dd id="MainScene.sceneRect" class="function">sceneRect</dd>
                <dd id="MainScene.selectedItems" class="function">selectedItems</dd>
                <dd id="MainScene.selectionArea" class="function">selectionArea</dd>
                <dd id="MainScene.sendEvent" class="function">sendEvent</dd>
                <dd id="MainScene.setActivePanel" class="function">setActivePanel</dd>
                <dd id="MainScene.setActiveWindow" class="function">setActiveWindow</dd>
                <dd id="MainScene.setBackgroundBrush" class="function">setBackgroundBrush</dd>
                <dd id="MainScene.setBspTreeDepth" class="function">setBspTreeDepth</dd>
                <dd id="MainScene.setFocus" class="function">setFocus</dd>
                <dd id="MainScene.setFocusItem" class="function">setFocusItem</dd>
                <dd id="MainScene.setFocusOnTouch" class="function">setFocusOnTouch</dd>
                <dd id="MainScene.setFont" class="function">setFont</dd>
                <dd id="MainScene.setForegroundBrush" class="function">setForegroundBrush</dd>
                <dd id="MainScene.setItemIndexMethod" class="function">setItemIndexMethod</dd>
                <dd id="MainScene.setMinimumRenderSize" class="function">setMinimumRenderSize</dd>
                <dd id="MainScene.setPalette" class="function">setPalette</dd>
                <dd id="MainScene.setSceneRect" class="function">setSceneRect</dd>
                <dd id="MainScene.setSelectionArea" class="function">setSelectionArea</dd>
                <dd id="MainScene.setStickyFocus" class="function">setStickyFocus</dd>
                <dd id="MainScene.setStyle" class="function">setStyle</dd>
                <dd id="MainScene.stickyFocus" class="function">stickyFocus</dd>
                <dd id="MainScene.style" class="function">style</dd>
                <dd id="MainScene.update" class="function">update</dd>
                <dd id="MainScene.views" class="function">views</dd>
                <dd id="MainScene.wheelEvent" class="function">wheelEvent</dd>
                <dd id="MainScene.width" class="function">width</dd>
                <dd id="MainScene.AllLayers" class="variable">AllLayers</dd>
                <dd id="MainScene.BackgroundLayer" class="variable">BackgroundLayer</dd>
                <dd id="MainScene.BspTreeIndex" class="variable">BspTreeIndex</dd>
                <dd id="MainScene.ForegroundLayer" class="variable">ForegroundLayer</dd>
                <dd id="MainScene.ItemLayer" class="variable">ItemLayer</dd>
                <dd id="MainScene.NoIndex" class="variable">NoIndex</dd>
                <dd id="MainScene.focusItemChanged" class="function">focusItemChanged</dd>
                <dd id="MainScene.selectionChanged" class="function">selectionChanged</dd>
                <dd id="MainScene.sceneRectChanged" class="function">sceneRectChanged</dd>
                <dd id="MainScene.changed" class="function">changed</dd>

            </div>
            <div><dt>PyQt5.QtCore.QObject</dt>
                                <dd id="MainScene.blockSignals" class="function">blockSignals</dd>
                <dd id="MainScene.childEvent" class="function">childEvent</dd>
                <dd id="MainScene.children" class="function">children</dd>
                <dd id="MainScene.connectNotify" class="function">connectNotify</dd>
                <dd id="MainScene.customEvent" class="function">customEvent</dd>
                <dd id="MainScene.deleteLater" class="function">deleteLater</dd>
                <dd id="MainScene.disconnect" class="function">disconnect</dd>
                <dd id="MainScene.disconnectNotify" class="function">disconnectNotify</dd>
                <dd id="MainScene.dumpObjectInfo" class="function">dumpObjectInfo</dd>
                <dd id="MainScene.dumpObjectTree" class="function">dumpObjectTree</dd>
                <dd id="MainScene.dynamicPropertyNames" class="function">dynamicPropertyNames</dd>
                <dd id="MainScene.findChild" class="function">findChild</dd>
                <dd id="MainScene.findChildren" class="function">findChildren</dd>
                <dd id="MainScene.inherits" class="function">inherits</dd>
                <dd id="MainScene.installEventFilter" class="function">installEventFilter</dd>
                <dd id="MainScene.isSignalConnected" class="function">isSignalConnected</dd>
                <dd id="MainScene.isWidgetType" class="function">isWidgetType</dd>
                <dd id="MainScene.isWindowType" class="function">isWindowType</dd>
                <dd id="MainScene.killTimer" class="function">killTimer</dd>
                <dd id="MainScene.metaObject" class="function">metaObject</dd>
                <dd id="MainScene.moveToThread" class="function">moveToThread</dd>
                <dd id="MainScene.objectName" class="function">objectName</dd>
                <dd id="MainScene.parent" class="function">parent</dd>
                <dd id="MainScene.property" class="function">property</dd>
                <dd id="MainScene.pyqtConfigure" class="function">pyqtConfigure</dd>
                <dd id="MainScene.receivers" class="function">receivers</dd>
                <dd id="MainScene.removeEventFilter" class="function">removeEventFilter</dd>
                <dd id="MainScene.sender" class="function">sender</dd>
                <dd id="MainScene.senderSignalIndex" class="function">senderSignalIndex</dd>
                <dd id="MainScene.setObjectName" class="function">setObjectName</dd>
                <dd id="MainScene.setParent" class="function">setParent</dd>
                <dd id="MainScene.setProperty" class="function">setProperty</dd>
                <dd id="MainScene.signalsBlocked" class="function">signalsBlocked</dd>
                <dd id="MainScene.startTimer" class="function">startTimer</dd>
                <dd id="MainScene.thread" class="function">thread</dd>
                <dd id="MainScene.timerEvent" class="function">timerEvent</dd>
                <dd id="MainScene.tr" class="function">tr</dd>
                <dd id="MainScene.staticMetaObject" class="variable">staticMetaObject</dd>
                <dd id="MainScene.objectNameChanged" class="function">objectNameChanged</dd>
                <dd id="MainScene.destroyed" class="function">destroyed</dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="ModelView">
                            <input id="ModelView-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ModelView</span><wbr>(<span class="base">PyQt5.QtWidgets.QGraphicsView</span>):

                <label class="view-source-button" for="ModelView-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView-31"><a href="#ModelView-31"><span class="linenos"> 31</span></a><span class="k">class</span> <span class="nc">ModelView</span><span class="p">(</span><span class="n">QGraphicsView</span><span class="p">):</span>
</span><span id="ModelView-32"><a href="#ModelView-32"><span class="linenos"> 32</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-33"><a href="#ModelView-33"><span class="linenos"> 33</span></a><span class="sd">    This class is responsible for the visualization the simulation.</span>
</span><span id="ModelView-34"><a href="#ModelView-34"><span class="linenos"> 34</span></a>
</span><span id="ModelView-35"><a href="#ModelView-35"><span class="linenos"> 35</span></a><span class="sd">    To update the simulation a timer is created. </span>
</span><span id="ModelView-36"><a href="#ModelView-36"><span class="linenos"> 36</span></a><span class="sd">    After the time is up the window is updated with the new positions of the items(robots) in the map. </span>
</span><span id="ModelView-37"><a href="#ModelView-37"><span class="linenos"> 37</span></a><span class="sd">    Items are moved to their new position step by step.   </span>
</span><span id="ModelView-38"><a href="#ModelView-38"><span class="linenos"> 38</span></a><span class="sd">    For a complete execution of the action for a robot per default 10 timers are created. So every</span>
</span><span id="ModelView-39"><a href="#ModelView-39"><span class="linenos"> 39</span></a><span class="sd">    time the timer is up the robots are moved incrementally (around 10%).  </span>
</span><span id="ModelView-40"><a href="#ModelView-40"><span class="linenos"> 40</span></a><span class="sd">    After the running out of the 10 timers the robots have reached their new final position. Then the model </span>
</span><span id="ModelView-41"><a href="#ModelView-41"><span class="linenos"> 41</span></a><span class="sd">    is updated with the new positions of the robots.</span>
</span><span id="ModelView-42"><a href="#ModelView-42"><span class="linenos"> 42</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="ModelView-43"><a href="#ModelView-43"><span class="linenos"> 43</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView-44"><a href="#ModelView-44"><span class="linenos"> 44</span></a>        <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="ModelView-45"><a href="#ModelView-45"><span class="linenos"> 45</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span> <span class="o">=</span> <span class="n">MainScene</span><span class="p">()</span>
</span><span id="ModelView-46"><a href="#ModelView-46"><span class="linenos"> 46</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setScene</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="p">)</span>
</span><span id="ModelView-47"><a href="#ModelView-47"><span class="linenos"> 47</span></a>
</span><span id="ModelView-48"><a href="#ModelView-48"><span class="linenos"> 48</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ModelView-49"><a href="#ModelView-49"><span class="linenos"> 49</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_windows</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ModelView-50"><a href="#ModelView-50"><span class="linenos"> 50</span></a>
</span><span id="ModelView-51"><a href="#ModelView-51"><span class="linenos"> 51</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span>  <span class="o">=</span> <span class="n">PUBLISH</span>
</span><span id="ModelView-52"><a href="#ModelView-52"><span class="linenos"> 52</span></a>        
</span><span id="ModelView-53"><a href="#ModelView-53"><span class="linenos"> 53</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_object_size</span> <span class="o">=</span> <span class="mi">35</span>
</span><span id="ModelView-54"><a href="#ModelView-54"><span class="linenos"> 54</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_screen_width</span>  <span class="o">=</span> <span class="mi">600</span>
</span><span id="ModelView-55"><a href="#ModelView-55"><span class="linenos"> 55</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_screen_height</span> <span class="o">=</span> <span class="mi">600</span>
</span><span id="ModelView-56"><a href="#ModelView-56"><span class="linenos"> 56</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span> <span class="o">=</span> <span class="mi">3</span>             <span class="c1">#the size of the borders of the grid</span>
</span><span id="ModelView-57"><a href="#ModelView-57"><span class="linenos"> 57</span></a>
</span><span id="ModelView-58"><a href="#ModelView-58"><span class="linenos"> 58</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span> <span class="o">=</span> <span class="mi">60</span>             <span class="c1">#the size of one grid cell</span>
</span><span id="ModelView-59"><a href="#ModelView-59"><span class="linenos"> 59</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span> <span class="o">=</span> <span class="mi">60</span>
</span><span id="ModelView-60"><a href="#ModelView-60"><span class="linenos"> 60</span></a>
</span><span id="ModelView-61"><a href="#ModelView-61"><span class="linenos"> 61</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_line_hlength</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span>
</span><span id="ModelView-62"><a href="#ModelView-62"><span class="linenos"> 62</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_line_vlength</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span>
</span><span id="ModelView-63"><a href="#ModelView-63"><span class="linenos"> 63</span></a>
</span><span id="ModelView-64"><a href="#ModelView-64"><span class="linenos"> 64</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_display_mode</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ModelView-65"><a href="#ModelView-65"><span class="linenos"> 65</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">=</span> <span class="mf">1.0</span>
</span><span id="ModelView-66"><a href="#ModelView-66"><span class="linenos"> 66</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
</span><span id="ModelView-67"><a href="#ModelView-67"><span class="linenos"> 67</span></a>
</span><span id="ModelView-68"><a href="#ModelView-68"><span class="linenos"> 68</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_lines</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ModelView-69"><a href="#ModelView-69"><span class="linenos"> 69</span></a>
</span><span id="ModelView-70"><a href="#ModelView-70"><span class="linenos"> 70</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ModelView-71"><a href="#ModelView-71"><span class="linenos"> 71</span></a>
</span><span id="ModelView-72"><a href="#ModelView-72"><span class="linenos"> 72</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ModelView-73"><a href="#ModelView-73"><span class="linenos"> 73</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ModelView-74"><a href="#ModelView-74"><span class="linenos"> 74</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="ModelView-75"><a href="#ModelView-75"><span class="linenos"> 75</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_step_time</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_step_time</span><span class="p">()</span>  <span class="c1">#2000.0</span>
</span><span id="ModelView-76"><a href="#ModelView-76"><span class="linenos"> 76</span></a>
</span><span id="ModelView-77"><a href="#ModelView-77"><span class="linenos"> 77</span></a>
</span><span id="ModelView-78"><a href="#ModelView-78"><span class="linenos"> 78</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setDragMode</span><span class="p">(</span><span class="n">QGraphicsView</span><span class="o">.</span><span class="n">ScrollHandDrag</span><span class="p">)</span>
</span><span id="ModelView-79"><a href="#ModelView-79"><span class="linenos"> 79</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setContextMenuPolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DefaultContextMenu</span><span class="p">)</span>
</span><span id="ModelView-80"><a href="#ModelView-80"><span class="linenos"> 80</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setHorizontalScrollBarPolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ScrollBarAlwaysOn</span><span class="p">)</span>
</span><span id="ModelView-81"><a href="#ModelView-81"><span class="linenos"> 81</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setVerticalScrollBarPolicy</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">ScrollBarAlwaysOn</span><span class="p">)</span>
</span><span id="ModelView-82"><a href="#ModelView-82"><span class="linenos"> 82</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_screen_width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_screen_height</span><span class="p">)</span>
</span><span id="ModelView-83"><a href="#ModelView-83"><span class="linenos"> 83</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span> <span class="o">=</span> <span class="n">QMenu</span><span class="p">()</span>
</span><span id="ModelView-84"><a href="#ModelView-84"><span class="linenos"> 84</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">setParent</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ModelView-85"><a href="#ModelView-85"><span class="linenos"> 85</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s1">&#39;tooltip&#39;</span><span class="p">)</span>
</span><span id="ModelView-86"><a href="#ModelView-86"><span class="linenos"> 86</span></a>        
</span><span id="ModelView-87"><a href="#ModelView-87"><span class="linenos"> 87</span></a>
</span><span id="ModelView-88"><a href="#ModelView-88"><span class="linenos"> 88</span></a>    <span class="k">def</span> <span class="nf">set_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
</span><span id="ModelView-89"><a href="#ModelView-89"><span class="linenos"> 89</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView-90"><a href="#ModelView-90"><span class="linenos"> 90</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">remove_window</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ModelView-91"><a href="#ModelView-91"><span class="linenos"> 91</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">=</span> <span class="n">model</span>
</span><span id="ModelView-92"><a href="#ModelView-92"><span class="linenos"> 92</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView-93"><a href="#ModelView-93"><span class="linenos"> 93</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">add_window</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ModelView-94"><a href="#ModelView-94"><span class="linenos"> 94</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">resize_to_fit</span><span class="p">()</span>
</span><span id="ModelView-95"><a href="#ModelView-95"><span class="linenos"> 95</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="ModelView-96"><a href="#ModelView-96"><span class="linenos"> 96</span></a>
</span><span id="ModelView-97"><a href="#ModelView-97"><span class="linenos"> 97</span></a>    <span class="k">def</span> <span class="nf">get_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView-98"><a href="#ModelView-98"><span class="linenos"> 98</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span>
</span><span id="ModelView-99"><a href="#ModelView-99"><span class="linenos"> 99</span></a>
</span><span id="ModelView-100"><a href="#ModelView-100"><span class="linenos">100</span></a>
</span><span id="ModelView-101"><a href="#ModelView-101"><span class="linenos">101</span></a>    <span class="c1">#EVENTS</span>
</span><span id="ModelView-102"><a href="#ModelView-102"><span class="linenos">102</span></a>    <span class="k">def</span> <span class="nf">wheelEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="ModelView-103"><a href="#ModelView-103"><span class="linenos">103</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_event</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">angleDelta</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
</span><span id="ModelView-104"><a href="#ModelView-104"><span class="linenos">104</span></a>
</span><span id="ModelView-105"><a href="#ModelView-105"><span class="linenos">105</span></a>    <span class="k">def</span> <span class="nf">zoom_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
</span><span id="ModelView-106"><a href="#ModelView-106"><span class="linenos">106</span></a>        <span class="n">zoom</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">angle</span><span class="o">/</span><span class="mf">1440.0</span><span class="p">)</span>
</span><span id="ModelView-107"><a href="#ModelView-107"><span class="linenos">107</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span><span class="p">(</span><span class="n">zoom</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>
</span><span id="ModelView-108"><a href="#ModelView-108"><span class="linenos">108</span></a>        
</span><span id="ModelView-109"><a href="#ModelView-109"><span class="linenos">109</span></a>    <span class="k">def</span> <span class="nf">resizeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="ModelView-110"><a href="#ModelView-110"><span class="linenos">110</span></a>        <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">resizeEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span><span id="ModelView-111"><a href="#ModelView-111"><span class="linenos">111</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">oldSize</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">1</span> 
</span><span id="ModelView-112"><a href="#ModelView-112"><span class="linenos">112</span></a>            <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">oldSize</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">1</span> 
</span><span id="ModelView-113"><a href="#ModelView-113"><span class="linenos">113</span></a>            <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">1</span> 
</span><span id="ModelView-114"><a href="#ModelView-114"><span class="linenos">114</span></a>            <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="ModelView-115"><a href="#ModelView-115"><span class="linenos">115</span></a>            <span class="k">return</span>
</span><span id="ModelView-116"><a href="#ModelView-116"><span class="linenos">116</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_screen_width</span>  <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()</span>
</span><span id="ModelView-117"><a href="#ModelView-117"><span class="linenos">117</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_screen_height</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
</span><span id="ModelView-118"><a href="#ModelView-118"><span class="linenos">118</span></a>        <span class="n">scaling</span> <span class="o">=</span> <span class="p">((</span><span class="nb">float</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">_screen_width</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">oldSize</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()),</span> 
</span><span id="ModelView-119"><a href="#ModelView-119"><span class="linenos">119</span></a>                    <span class="p">(</span><span class="nb">float</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">_screen_height</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">oldSize</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()))</span>
</span><span id="ModelView-120"><a href="#ModelView-120"><span class="linenos">120</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span><span class="p">(</span><span class="n">scaling</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">scaling</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ModelView-121"><a href="#ModelView-121"><span class="linenos">121</span></a>
</span><span id="ModelView-122"><a href="#ModelView-122"><span class="linenos">122</span></a>    <span class="k">def</span> <span class="nf">resize_to_fit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView-123"><a href="#ModelView-123"><span class="linenos">123</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span> 
</span><span id="ModelView-124"><a href="#ModelView-124"><span class="linenos">124</span></a>            <span class="k">return</span>
</span><span id="ModelView-125"><a href="#ModelView-125"><span class="linenos">125</span></a>        <span class="n">zoom</span> <span class="o">=</span> <span class="p">((</span><span class="nb">float</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">_screen_width</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_line_hlength</span><span class="o">*</span><span class="mf">1.04</span><span class="p">),</span> 
</span><span id="ModelView-126"><a href="#ModelView-126"><span class="linenos">126</span></a>                <span class="p">(</span><span class="nb">float</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">_screen_height</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_line_vlength</span><span class="o">*</span><span class="mf">1.04</span><span class="p">))</span>
</span><span id="ModelView-127"><a href="#ModelView-127"><span class="linenos">127</span></a>
</span><span id="ModelView-128"><a href="#ModelView-128"><span class="linenos">128</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span><span class="p">(</span><span class="n">zoom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">zoom</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ModelView-129"><a href="#ModelView-129"><span class="linenos">129</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">setSceneRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_line_hlength</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_line_vlength</span><span class="o">*</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ModelView-130"><a href="#ModelView-130"><span class="linenos">130</span></a>
</span><span id="ModelView-131"><a href="#ModelView-131"><span class="linenos">131</span></a>    <span class="k">def</span> <span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="ModelView-132"><a href="#ModelView-132"><span class="linenos">132</span></a>        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">LeftButton</span> <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">MiddleButton</span><span class="p">:</span>
</span><span id="ModelView-133"><a href="#ModelView-133"><span class="linenos">133</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
</span><span id="ModelView-134"><a href="#ModelView-134"><span class="linenos">134</span></a>        <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">mousePressEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span><span id="ModelView-135"><a href="#ModelView-135"><span class="linenos">135</span></a>
</span><span id="ModelView-136"><a href="#ModelView-136"><span class="linenos">136</span></a>    <span class="k">def</span> <span class="nf">event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="ModelView-137"><a href="#ModelView-137"><span class="linenos">137</span></a>        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="p">()</span> <span class="o">==</span> <span class="n">QEvent</span><span class="o">.</span><span class="n">ToolTip</span><span class="p">:</span>
</span><span id="ModelView-138"><a href="#ModelView-138"><span class="linenos">138</span></a>            <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapToScene</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">pos</span><span class="p">())</span>
</span><span id="ModelView-139"><a href="#ModelView-139"><span class="linenos">139</span></a>            <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene_coordinates_to_node</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
</span><span id="ModelView-140"><a href="#ModelView-140"><span class="linenos">140</span></a>            <span class="k">if</span> <span class="n">pos</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView-141"><a href="#ModelView-141"><span class="linenos">141</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span id="ModelView-142"><a href="#ModelView-142"><span class="linenos">142</span></a>                <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span><span id="ModelView-143"><a href="#ModelView-143"><span class="linenos">143</span></a>            <span class="n">ss</span> <span class="o">=</span> <span class="s1">&#39;node(&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_node_id</span><span class="p">(</span><span class="n">pos</span><span class="p">))</span> <span class="o">+</span><span class="s1">&#39;) at &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
</span><span id="ModelView-144"><a href="#ModelView-144"><span class="linenos">144</span></a>            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">filter_items</span><span class="p">(</span><span class="n">position</span> <span class="o">=</span> <span class="n">pos</span><span class="p">):</span>
</span><span id="ModelView-145"><a href="#ModelView-145"><span class="linenos">145</span></a>                <span class="n">ss</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">item</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get_id</span><span class="p">())</span> <span class="o">+</span><span class="s1">&#39;)&#39;</span>
</span><span id="ModelView-146"><a href="#ModelView-146"><span class="linenos">146</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="n">ss</span><span class="p">)</span>
</span><span id="ModelView-147"><a href="#ModelView-147"><span class="linenos">147</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span><span id="ModelView-148"><a href="#ModelView-148"><span class="linenos">148</span></a>
</span><span id="ModelView-149"><a href="#ModelView-149"><span class="linenos">149</span></a>
</span><span id="ModelView-150"><a href="#ModelView-150"><span class="linenos">150</span></a>    <span class="c1">#CONTEXTMENU</span>
</span><span id="ModelView-151"><a href="#ModelView-151"><span class="linenos">151</span></a>    <span class="k">def</span> <span class="nf">contextMenuEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="ModelView-152"><a href="#ModelView-152"><span class="linenos">152</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-153"><a href="#ModelView-153"><span class="linenos">153</span></a><span class="sd">        This function creates the contextmenu by right click in the simulation window.</span>
</span><span id="ModelView-154"><a href="#ModelView-154"><span class="linenos">154</span></a><span class="sd">        For the moment only two options defined: &quot;enable node&quot; and &quot;disable node&quot;</span>
</span><span id="ModelView-155"><a href="#ModelView-155"><span class="linenos">155</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-156"><a href="#ModelView-156"><span class="linenos">156</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView-157"><a href="#ModelView-157"><span class="linenos">157</span></a>            <span class="k">return</span>
</span><span id="ModelView-158"><a href="#ModelView-158"><span class="linenos">158</span></a>
</span><span id="ModelView-159"><a href="#ModelView-159"><span class="linenos">159</span></a>        <span class="n">point</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapToScene</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
</span><span id="ModelView-160"><a href="#ModelView-160"><span class="linenos">160</span></a>        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene_coordinates_to_grid</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">point</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
</span><span id="ModelView-161"><a href="#ModelView-161"><span class="linenos">161</span></a>        <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView-162"><a href="#ModelView-162"><span class="linenos">162</span></a>            <span class="k">return</span>
</span><span id="ModelView-163"><a href="#ModelView-163"><span class="linenos">163</span></a>        <span class="n">x</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ModelView-164"><a href="#ModelView-164"><span class="linenos">164</span></a>        <span class="n">y</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView-165"><a href="#ModelView-165"><span class="linenos">165</span></a>
</span><span id="ModelView-166"><a href="#ModelView-166"><span class="linenos">166</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_editable</span><span class="p">():</span>
</span><span id="ModelView-167"><a href="#ModelView-167"><span class="linenos">167</span></a>            <span class="k">return</span> 
</span><span id="ModelView-168"><a href="#ModelView-168"><span class="linenos">168</span></a>
</span><span id="ModelView-169"><a href="#ModelView-169"><span class="linenos">169</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span> 
</span><span id="ModelView-170"><a href="#ModelView-170"><span class="linenos">170</span></a>
</span><span id="ModelView-171"><a href="#ModelView-171"><span class="linenos">171</span></a>
</span><span id="ModelView-172"><a href="#ModelView-172"><span class="linenos">172</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">is_node</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
</span><span id="ModelView-173"><a href="#ModelView-173"><span class="linenos">173</span></a>            <span class="n">action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="s1">&#39;disable node&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="ModelView-174"><a href="#ModelView-174"><span class="linenos">174</span></a>            <span class="n">action</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="s1">&#39;Ctrl + N&#39;</span><span class="p">)</span>
</span><span id="ModelView-175"><a href="#ModelView-175"><span class="linenos">175</span></a>            <span class="n">action</span><span class="o">.</span><span class="n">setStatusTip</span><span class="p">(</span><span class="s1">&#39;Disables the selected node&#39;</span><span class="p">)</span>
</span><span id="ModelView-176"><a href="#ModelView-176"><span class="linenos">176</span></a>            <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remove_node</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</span><span id="ModelView-177"><a href="#ModelView-177"><span class="linenos">177</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>   
</span><span id="ModelView-178"><a href="#ModelView-178"><span class="linenos">178</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ModelView-179"><a href="#ModelView-179"><span class="linenos">179</span></a>            <span class="n">action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="s1">&#39;enable node&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="ModelView-180"><a href="#ModelView-180"><span class="linenos">180</span></a>            <span class="n">action</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="s1">&#39;Ctrl + N&#39;</span><span class="p">)</span>
</span><span id="ModelView-181"><a href="#ModelView-181"><span class="linenos">181</span></a>            <span class="n">action</span><span class="o">.</span><span class="n">setStatusTip</span><span class="p">(</span><span class="s1">&#39;Enables the selected node&#39;</span><span class="p">)</span>
</span><span id="ModelView-182"><a href="#ModelView-182"><span class="linenos">182</span></a>            <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_node</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</span><span id="ModelView-183"><a href="#ModelView-183"><span class="linenos">183</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span> 
</span><span id="ModelView-184"><a href="#ModelView-184"><span class="linenos">184</span></a><span class="w">        </span>
</span><span id="ModelView-185"><a href="#ModelView-185"><span class="linenos">185</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-186"><a href="#ModelView-186"><span class="linenos">186</span></a><span class="sd">        robot = self._model.filter_items(&#39;robot_ros&#39;, position = (x,y), return_first = True)[0]</span>
</span><span id="ModelView-187"><a href="#ModelView-187"><span class="linenos">187</span></a><span class="sd">        if robot is not None:</span>
</span><span id="ModelView-188"><a href="#ModelView-188"><span class="linenos">188</span></a><span class="sd">            action = QAction(&#39;remove robot&#39;, self)</span>
</span><span id="ModelView-189"><a href="#ModelView-189"><span class="linenos">189</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + R&#39;)</span>
</span><span id="ModelView-190"><a href="#ModelView-190"><span class="linenos">190</span></a><span class="sd">            action.setStatusTip(&#39;Removes a robot from the selected node&#39;)</span>
</span><span id="ModelView-191"><a href="#ModelView-191"><span class="linenos">191</span></a><span class="sd">            action.triggered.connect(lambda: self._remove_item(robot))</span>
</span><span id="ModelView-192"><a href="#ModelView-192"><span class="linenos">192</span></a><span class="sd">            self._menu.addAction(action)</span>
</span><span id="ModelView-193"><a href="#ModelView-193"><span class="linenos">193</span></a><span class="sd">        elif self._model.is_node(x,y):</span>
</span><span id="ModelView-194"><a href="#ModelView-194"><span class="linenos">194</span></a><span class="sd">            action = QAction(&#39;add robot&#39;, self)</span>
</span><span id="ModelView-195"><a href="#ModelView-195"><span class="linenos">195</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + R&#39;)</span>
</span><span id="ModelView-196"><a href="#ModelView-196"><span class="linenos">196</span></a><span class="sd">            action.setStatusTip(&#39;Adds a robot to the selected node&#39;)</span>
</span><span id="ModelView-197"><a href="#ModelView-197"><span class="linenos">197</span></a><span class="sd">            action.triggered.connect(lambda: self._add_item(&#39;robot_ros&#39;, x, y))</span>
</span><span id="ModelView-198"><a href="#ModelView-198"><span class="linenos">198</span></a><span class="sd">            self._menu.addAction(action)</span>
</span><span id="ModelView-199"><a href="#ModelView-199"><span class="linenos">199</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-200"><a href="#ModelView-200"><span class="linenos">200</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">popup</span><span class="p">(</span><span class="n">QPoint</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span><span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">()))</span>
</span><span id="ModelView-201"><a href="#ModelView-201"><span class="linenos">201</span></a>
</span><span id="ModelView-202"><a href="#ModelView-202"><span class="linenos">202</span></a>    <span class="k">def</span> <span class="nf">_add_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
</span><span id="ModelView-203"><a href="#ModelView-203"><span class="linenos">203</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-204"><a href="#ModelView-204"><span class="linenos">204</span></a><span class="sd">        This function adds a specific node (a cell in the map with x,y coordinates) to the model. </span>
</span><span id="ModelView-205"><a href="#ModelView-205"><span class="linenos">205</span></a><span class="sd">        The function is used by the context menu to enable a node.</span>
</span><span id="ModelView-206"><a href="#ModelView-206"><span class="linenos">206</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-207"><a href="#ModelView-207"><span class="linenos">207</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span id="ModelView-208"><a href="#ModelView-208"><span class="linenos">208</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
</span><span id="ModelView-209"><a href="#ModelView-209"><span class="linenos">209</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">update_windows</span><span class="p">()</span>
</span><span id="ModelView-210"><a href="#ModelView-210"><span class="linenos">210</span></a>    
</span><span id="ModelView-211"><a href="#ModelView-211"><span class="linenos">211</span></a>    <span class="k">def</span> <span class="nf">_remove_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
</span><span id="ModelView-212"><a href="#ModelView-212"><span class="linenos">212</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-213"><a href="#ModelView-213"><span class="linenos">213</span></a><span class="sd">        This function removes a specific node (a cell in the map with x,y coordinates) from the model. </span>
</span><span id="ModelView-214"><a href="#ModelView-214"><span class="linenos">214</span></a><span class="sd">        The function is used by the context menu to disable a node.</span>
</span><span id="ModelView-215"><a href="#ModelView-215"><span class="linenos">215</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-216"><a href="#ModelView-216"><span class="linenos">216</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">remove_node</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span id="ModelView-217"><a href="#ModelView-217"><span class="linenos">217</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
</span><span id="ModelView-218"><a href="#ModelView-218"><span class="linenos">218</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">update_windows</span><span class="p">()</span>
</span><span id="ModelView-219"><a href="#ModelView-219"><span class="linenos">219</span></a>
</span><span id="ModelView-220"><a href="#ModelView-220"><span class="linenos">220</span></a>    <span class="k">def</span> <span class="nf">_add_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kind</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
</span><span id="ModelView-221"><a href="#ModelView-221"><span class="linenos">221</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-222"><a href="#ModelView-222"><span class="linenos">222</span></a><span class="sd">        This function adds a specific item (robot or checkpoint) to the model. </span>
</span><span id="ModelView-223"><a href="#ModelView-223"><span class="linenos">223</span></a><span class="sd">        The function could be used by the context menu and is not used at the moment.</span>
</span><span id="ModelView-224"><a href="#ModelView-224"><span class="linenos">224</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-225"><a href="#ModelView-225"><span class="linenos">225</span></a>        <span class="n">item</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">create_item</span><span class="p">(</span><span class="n">kind</span><span class="p">,</span> <span class="n">add_immediately</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="ModelView-226"><a href="#ModelView-226"><span class="linenos">226</span></a>        <span class="n">item</span><span class="o">.</span><span class="n">set_starting_position</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span id="ModelView-227"><a href="#ModelView-227"><span class="linenos">227</span></a>        <span class="n">item</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</span><span id="ModelView-228"><a href="#ModelView-228"><span class="linenos">228</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
</span><span id="ModelView-229"><a href="#ModelView-229"><span class="linenos">229</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">update_windows</span><span class="p">()</span>
</span><span id="ModelView-230"><a href="#ModelView-230"><span class="linenos">230</span></a>    
</span><span id="ModelView-231"><a href="#ModelView-231"><span class="linenos">231</span></a>    <span class="k">def</span> <span class="nf">_remove_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span><span id="ModelView-232"><a href="#ModelView-232"><span class="linenos">232</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-233"><a href="#ModelView-233"><span class="linenos">233</span></a><span class="sd">        This function removes a specific item (robot or checkpoint) from the model. </span>
</span><span id="ModelView-234"><a href="#ModelView-234"><span class="linenos">234</span></a><span class="sd">        The function could be used by the context menu and is not used at the moment.</span>
</span><span id="ModelView-235"><a href="#ModelView-235"><span class="linenos">235</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-236"><a href="#ModelView-236"><span class="linenos">236</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">remove_item</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="ModelView-237"><a href="#ModelView-237"><span class="linenos">237</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
</span><span id="ModelView-238"><a href="#ModelView-238"><span class="linenos">238</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">update_windows</span><span class="p">()</span>
</span><span id="ModelView-239"><a href="#ModelView-239"><span class="linenos">239</span></a>
</span><span id="ModelView-240"><a href="#ModelView-240"><span class="linenos">240</span></a>
</span><span id="ModelView-241"><a href="#ModelView-241"><span class="linenos">241</span></a>    <span class="c1">#TIMER</span>
</span><span id="ModelView-242"><a href="#ModelView-242"><span class="linenos">242</span></a>    <span class="k">def</span> <span class="nf">start_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView-243"><a href="#ModelView-243"><span class="linenos">243</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-244"><a href="#ModelView-244"><span class="linenos">244</span></a><span class="sd">        This function stops the previous timer and starts a new one. </span>
</span><span id="ModelView-245"><a href="#ModelView-245"><span class="linenos">245</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-246"><a href="#ModelView-246"><span class="linenos">246</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_timer</span><span class="p">()</span>
</span><span id="ModelView-247"><a href="#ModelView-247"><span class="linenos">247</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="o">=</span> <span class="n">QTimer</span><span class="p">()</span>
</span><span id="ModelView-248"><a href="#ModelView-248"><span class="linenos">248</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_model</span><span class="p">(</span><span class="kc">False</span><span class="p">))</span>
</span><span id="ModelView-249"><a href="#ModelView-249"><span class="linenos">249</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">adjust_timer</span><span class="p">()</span>
</span><span id="ModelView-250"><a href="#ModelView-250"><span class="linenos">250</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">PUBLISH</span>
</span><span id="ModelView-251"><a href="#ModelView-251"><span class="linenos">251</span></a>        
</span><span id="ModelView-252"><a href="#ModelView-252"><span class="linenos">252</span></a>    <span class="k">def</span> <span class="nf">adjust_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView-253"><a href="#ModelView-253"><span class="linenos">253</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-254"><a href="#ModelView-254"><span class="linenos">254</span></a><span class="sd">        This function sets the timeout for the timer.   </span>
</span><span id="ModelView-255"><a href="#ModelView-255"><span class="linenos">255</span></a>
</span><span id="ModelView-256"><a href="#ModelView-256"><span class="linenos">256</span></a><span class="sd">        Timeout = time to execute the complete step / number of intermediate steps  </span>
</span><span id="ModelView-257"><a href="#ModelView-257"><span class="linenos">257</span></a>
</span><span id="ModelView-258"><a href="#ModelView-258"><span class="linenos">258</span></a><span class="sd">        Example: the duration of one complete step schould be 1 sec. with 10 intermediate steps. </span>
</span><span id="ModelView-259"><a href="#ModelView-259"><span class="linenos">259</span></a><span class="sd">        Then every timer should run for = 1sec/10 = 0.1seconds.</span>
</span><span id="ModelView-260"><a href="#ModelView-260"><span class="linenos">260</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-261"><a href="#ModelView-261"><span class="linenos">261</span></a>        <span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_step_time</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span>
</span><span id="ModelView-262"><a href="#ModelView-262"><span class="linenos">262</span></a>        <span class="k">if</span> <span class="n">timeout</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
</span><span id="ModelView-263"><a href="#ModelView-263"><span class="linenos">263</span></a>            <span class="n">timeout</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="ModelView-264"><a href="#ModelView-264"><span class="linenos">264</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView-265"><a href="#ModelView-265"><span class="linenos">265</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
</span><span id="ModelView-266"><a href="#ModelView-266"><span class="linenos">266</span></a>
</span><span id="ModelView-267"><a href="#ModelView-267"><span class="linenos">267</span></a>    <span class="k">def</span> <span class="nf">switch_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView-268"><a href="#ModelView-268"><span class="linenos">268</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-269"><a href="#ModelView-269"><span class="linenos">269</span></a><span class="sd">        This function switches the timer  </span>
</span><span id="ModelView-270"><a href="#ModelView-270"><span class="linenos">270</span></a><span class="sd">        (start the timer if there is no timer running / stop the timer if there is a timer running).</span>
</span><span id="ModelView-271"><a href="#ModelView-271"><span class="linenos">271</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-272"><a href="#ModelView-272"><span class="linenos">272</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView-273"><a href="#ModelView-273"><span class="linenos">273</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">start_timer</span><span class="p">()</span>
</span><span id="ModelView-274"><a href="#ModelView-274"><span class="linenos">274</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ModelView-275"><a href="#ModelView-275"><span class="linenos">275</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">stop_timer</span><span class="p">()</span>
</span><span id="ModelView-276"><a href="#ModelView-276"><span class="linenos">276</span></a>
</span><span id="ModelView-277"><a href="#ModelView-277"><span class="linenos">277</span></a>    <span class="k">def</span> <span class="nf">stop_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView-278"><a href="#ModelView-278"><span class="linenos">278</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-279"><a href="#ModelView-279"><span class="linenos">279</span></a><span class="sd">        This function stops the timer if there is a timer running.</span>
</span><span id="ModelView-280"><a href="#ModelView-280"><span class="linenos">280</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-281"><a href="#ModelView-281"><span class="linenos">281</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView-282"><a href="#ModelView-282"><span class="linenos">282</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</span><span id="ModelView-283"><a href="#ModelView-283"><span class="linenos">283</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ModelView-284"><a href="#ModelView-284"><span class="linenos">284</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="ModelView-285"><a href="#ModelView-285"><span class="linenos">285</span></a>
</span><span id="ModelView-286"><a href="#ModelView-286"><span class="linenos">286</span></a>    <span class="k">def</span> <span class="nf">speed_up_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView-287"><a href="#ModelView-287"><span class="linenos">287</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-288"><a href="#ModelView-288"><span class="linenos">288</span></a><span class="sd">        This function decreases the time for completion of one complete step.</span>
</span><span id="ModelView-289"><a href="#ModelView-289"><span class="linenos">289</span></a>
</span><span id="ModelView-290"><a href="#ModelView-290"><span class="linenos">290</span></a><span class="sd">        Following values are allowed (in milliseconds):  </span>
</span><span id="ModelView-291"><a href="#ModelView-291"><span class="linenos">291</span></a><span class="sd">        2000 (intermediate steps=20), 1000 (10), 500 (10), 250(5), 0(0)</span>
</span><span id="ModelView-292"><a href="#ModelView-292"><span class="linenos">292</span></a>
</span><span id="ModelView-293"><a href="#ModelView-293"><span class="linenos">293</span></a><span class="sd">        By decreasing the time the value is moved from left to right  </span>
</span><span id="ModelView-294"><a href="#ModelView-294"><span class="linenos">294</span></a><span class="sd">        (example: old value 500, new value 250)</span>
</span><span id="ModelView-295"><a href="#ModelView-295"><span class="linenos">295</span></a><span class="sd">        </span>
</span><span id="ModelView-296"><a href="#ModelView-296"><span class="linenos">296</span></a><span class="sd">        The timeout for one timer is defined by &quot;time for completion of one step&quot; / &quot;intermediate steps&quot;</span>
</span><span id="ModelView-297"><a href="#ModelView-297"><span class="linenos">297</span></a><span class="sd">        (example: value 2000, then 20 intermediate steps with every timer running for 100 millisec.)</span>
</span><span id="ModelView-298"><a href="#ModelView-298"><span class="linenos">298</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-299"><a href="#ModelView-299"><span class="linenos">299</span></a>        <span class="n">values_time</span> <span class="o">=</span>  <span class="p">[</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="ModelView-300"><a href="#ModelView-300"><span class="linenos">300</span></a>        <span class="n">values_count</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span>   <span class="mi">10</span><span class="p">,</span>   <span class="mi">10</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>   <span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView-301"><a href="#ModelView-301"><span class="linenos">301</span></a>        
</span><span id="ModelView-302"><a href="#ModelView-302"><span class="linenos">302</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="ModelView-303"><a href="#ModelView-303"><span class="linenos">303</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_time</span><span class="p">):</span>
</span><span id="ModelView-304"><a href="#ModelView-304"><span class="linenos">304</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_time</span><span class="p">)</span> 
</span><span id="ModelView-305"><a href="#ModelView-305"><span class="linenos">305</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="ModelView-306"><a href="#ModelView-306"><span class="linenos">306</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="ModelView-307"><a href="#ModelView-307"><span class="linenos">307</span></a>
</span><span id="ModelView-308"><a href="#ModelView-308"><span class="linenos">308</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_step_time</span> <span class="o">=</span> <span class="n">values_time</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView-309"><a href="#ModelView-309"><span class="linenos">309</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span> <span class="o">=</span> <span class="n">values_count</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView-310"><a href="#ModelView-310"><span class="linenos">310</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">adjust_timer</span><span class="p">()</span>
</span><span id="ModelView-311"><a href="#ModelView-311"><span class="linenos">311</span></a>
</span><span id="ModelView-312"><a href="#ModelView-312"><span class="linenos">312</span></a>    <span class="k">def</span> <span class="nf">speed_down_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView-313"><a href="#ModelView-313"><span class="linenos">313</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-314"><a href="#ModelView-314"><span class="linenos">314</span></a><span class="sd">        This function increaes the time for completion of one complete step.</span>
</span><span id="ModelView-315"><a href="#ModelView-315"><span class="linenos">315</span></a>
</span><span id="ModelView-316"><a href="#ModelView-316"><span class="linenos">316</span></a><span class="sd">        Following values are allowed (in milliseconds):  </span>
</span><span id="ModelView-317"><a href="#ModelView-317"><span class="linenos">317</span></a><span class="sd">        2000 (intermediate steps=20), 1000 (10), 500 (10), 250(5), 0(0)</span>
</span><span id="ModelView-318"><a href="#ModelView-318"><span class="linenos">318</span></a>
</span><span id="ModelView-319"><a href="#ModelView-319"><span class="linenos">319</span></a><span class="sd">        By increasing the time the value is moved from right to left  </span>
</span><span id="ModelView-320"><a href="#ModelView-320"><span class="linenos">320</span></a><span class="sd">        (example: old value 250, new value 500)</span>
</span><span id="ModelView-321"><a href="#ModelView-321"><span class="linenos">321</span></a><span class="sd">        </span>
</span><span id="ModelView-322"><a href="#ModelView-322"><span class="linenos">322</span></a><span class="sd">        The timeout for one timer is defined by &quot;time for completion of one step&quot; / &quot;intermediate steps&quot;</span>
</span><span id="ModelView-323"><a href="#ModelView-323"><span class="linenos">323</span></a><span class="sd">        (example: value 250, then 5 intermediate steps with every timer running for 50 millisec.)</span>
</span><span id="ModelView-324"><a href="#ModelView-324"><span class="linenos">324</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-325"><a href="#ModelView-325"><span class="linenos">325</span></a>        <span class="n">values_time</span> <span class="o">=</span>  <span class="p">[</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="ModelView-326"><a href="#ModelView-326"><span class="linenos">326</span></a>        <span class="n">values_count</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span>   <span class="mi">10</span><span class="p">,</span>   <span class="mi">10</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>   <span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView-327"><a href="#ModelView-327"><span class="linenos">327</span></a>        
</span><span id="ModelView-328"><a href="#ModelView-328"><span class="linenos">328</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span id="ModelView-329"><a href="#ModelView-329"><span class="linenos">329</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_time</span><span class="p">):</span>
</span><span id="ModelView-330"><a href="#ModelView-330"><span class="linenos">330</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_time</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
</span><span id="ModelView-331"><a href="#ModelView-331"><span class="linenos">331</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="ModelView-332"><a href="#ModelView-332"><span class="linenos">332</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="ModelView-333"><a href="#ModelView-333"><span class="linenos">333</span></a>
</span><span id="ModelView-334"><a href="#ModelView-334"><span class="linenos">334</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_step_time</span> <span class="o">=</span> <span class="n">values_time</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView-335"><a href="#ModelView-335"><span class="linenos">335</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span> <span class="o">=</span> <span class="n">values_count</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView-336"><a href="#ModelView-336"><span class="linenos">336</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">adjust_timer</span><span class="p">()</span>
</span><span id="ModelView-337"><a href="#ModelView-337"><span class="linenos">337</span></a>
</span><span id="ModelView-338"><a href="#ModelView-338"><span class="linenos">338</span></a>    <span class="k">def</span> <span class="nf">is_timer_running</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView-339"><a href="#ModelView-339"><span class="linenos">339</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-340"><a href="#ModelView-340"><span class="linenos">340</span></a><span class="sd">        This function checks whether the timer is running.</span>
</span><span id="ModelView-341"><a href="#ModelView-341"><span class="linenos">341</span></a>
</span><span id="ModelView-342"><a href="#ModelView-342"><span class="linenos">342</span></a><span class="sd">        :return: **True**, if a timer is running   </span>
</span><span id="ModelView-343"><a href="#ModelView-343"><span class="linenos">343</span></a><span class="sd">        **False**, otherwise</span>
</span><span id="ModelView-344"><a href="#ModelView-344"><span class="linenos">344</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-345"><a href="#ModelView-345"><span class="linenos">345</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="ow">is</span> <span class="kc">None</span>
</span><span id="ModelView-346"><a href="#ModelView-346"><span class="linenos">346</span></a>
</span><span id="ModelView-347"><a href="#ModelView-347"><span class="linenos">347</span></a>    <span class="k">def</span> <span class="nf">get_timer_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView-348"><a href="#ModelView-348"><span class="linenos">348</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-349"><a href="#ModelView-349"><span class="linenos">349</span></a><span class="sd">        @private</span>
</span><span id="ModelView-350"><a href="#ModelView-350"><span class="linenos">350</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-351"><a href="#ModelView-351"><span class="linenos">351</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span>
</span><span id="ModelView-352"><a href="#ModelView-352"><span class="linenos">352</span></a>
</span><span id="ModelView-353"><a href="#ModelView-353"><span class="linenos">353</span></a>    <span class="k">def</span> <span class="nf">get_step_time</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView-354"><a href="#ModelView-354"><span class="linenos">354</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-355"><a href="#ModelView-355"><span class="linenos">355</span></a><span class="sd">        @private</span>
</span><span id="ModelView-356"><a href="#ModelView-356"><span class="linenos">356</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-357"><a href="#ModelView-357"><span class="linenos">357</span></a>        <span class="n">values_time</span> <span class="o">=</span>  <span class="p">[</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="ModelView-358"><a href="#ModelView-358"><span class="linenos">358</span></a>        <span class="n">values_count</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span>   <span class="mi">10</span><span class="p">,</span>   <span class="mi">10</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>   <span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView-359"><a href="#ModelView-359"><span class="linenos">359</span></a>        <span class="k">return</span> <span class="n">values_time</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">values_count</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView-360"><a href="#ModelView-360"><span class="linenos">360</span></a>
</span><span id="ModelView-361"><a href="#ModelView-361"><span class="linenos">361</span></a>
</span><span id="ModelView-362"><a href="#ModelView-362"><span class="linenos">362</span></a>    
</span><span id="ModelView-363"><a href="#ModelView-363"><span class="linenos">363</span></a>    <span class="c1">#UPDATE WINDOW</span>
</span><span id="ModelView-364"><a href="#ModelView-364"><span class="linenos">364</span></a>    <span class="k">def</span> <span class="nf">update_windows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView-365"><a href="#ModelView-365"><span class="linenos">365</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-366"><a href="#ModelView-366"><span class="linenos">366</span></a><span class="sd">        This function updates all registered windows. </span>
</span><span id="ModelView-367"><a href="#ModelView-367"><span class="linenos">367</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-368"><a href="#ModelView-368"><span class="linenos">368</span></a>        <span class="k">for</span> <span class="n">window</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_windows</span><span class="p">:</span>
</span><span id="ModelView-369"><a href="#ModelView-369"><span class="linenos">369</span></a>            <span class="n">window</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="ModelView-370"><a href="#ModelView-370"><span class="linenos">370</span></a>    
</span><span id="ModelView-371"><a href="#ModelView-371"><span class="linenos">371</span></a>    <span class="k">def</span> <span class="nf">add_window</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">window</span><span class="p">):</span>
</span><span id="ModelView-372"><a href="#ModelView-372"><span class="linenos">372</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-373"><a href="#ModelView-373"><span class="linenos">373</span></a><span class="sd">        This function adds a widget to the list of widgets which should be updated every time the function update_windows(self) is called.</span>
</span><span id="ModelView-374"><a href="#ModelView-374"><span class="linenos">374</span></a><span class="sd">        This could be the robot table (RightSideWidget) or widgets from the left side.</span>
</span><span id="ModelView-375"><a href="#ModelView-375"><span class="linenos">375</span></a><span class="sd">        This widgets can then be updated all together if the model view has changed. </span>
</span><span id="ModelView-376"><a href="#ModelView-376"><span class="linenos">376</span></a>
</span><span id="ModelView-377"><a href="#ModelView-377"><span class="linenos">377</span></a><span class="sd">        :param window: PyQt5.QtWidgets.QWidget - widget which should be added to the list</span>
</span><span id="ModelView-378"><a href="#ModelView-378"><span class="linenos">378</span></a><span class="sd">        </span>
</span><span id="ModelView-379"><a href="#ModelView-379"><span class="linenos">379</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-380"><a href="#ModelView-380"><span class="linenos">380</span></a>        <span class="k">if</span> <span class="n">window</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_windows</span><span class="p">:</span>
</span><span id="ModelView-381"><a href="#ModelView-381"><span class="linenos">381</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_windows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>
</span><span id="ModelView-382"><a href="#ModelView-382"><span class="linenos">382</span></a>
</span><span id="ModelView-383"><a href="#ModelView-383"><span class="linenos">383</span></a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView-384"><a href="#ModelView-384"><span class="linenos">384</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-385"><a href="#ModelView-385"><span class="linenos">385</span></a><span class="sd">        This function draws the map, the items and other elements in the window. </span>
</span><span id="ModelView-386"><a href="#ModelView-386"><span class="linenos">386</span></a>
</span><span id="ModelView-387"><a href="#ModelView-387"><span class="linenos">387</span></a><span class="sd">        Following elements will be plotted:</span>
</span><span id="ModelView-388"><a href="#ModelView-388"><span class="linenos">388</span></a><span class="sd">        -   vertical and horizontal lines</span>
</span><span id="ModelView-389"><a href="#ModelView-389"><span class="linenos">389</span></a><span class="sd">        -   disabled nodes (=blocked spots)</span>
</span><span id="ModelView-390"><a href="#ModelView-390"><span class="linenos">390</span></a><span class="sd">        -   every graphic item in the model</span>
</span><span id="ModelView-391"><a href="#ModelView-391"><span class="linenos">391</span></a>
</span><span id="ModelView-392"><a href="#ModelView-392"><span class="linenos">392</span></a><span class="sd">        Following elements are optional and will be plotted only if activated by the user:</span>
</span><span id="ModelView-393"><a href="#ModelView-393"><span class="linenos">393</span></a><span class="sd">        -   start points of the items</span>
</span><span id="ModelView-394"><a href="#ModelView-394"><span class="linenos">394</span></a><span class="sd">        -   driven path by the items</span>
</span><span id="ModelView-395"><a href="#ModelView-395"><span class="linenos">395</span></a><span class="sd">        -   future/calculated path for the items</span>
</span><span id="ModelView-396"><a href="#ModelView-396"><span class="linenos">396</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-397"><a href="#ModelView-397"><span class="linenos">397</span></a>
</span><span id="ModelView-398"><a href="#ModelView-398"><span class="linenos">398</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> 
</span><span id="ModelView-399"><a href="#ModelView-399"><span class="linenos">399</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="ModelView-400"><a href="#ModelView-400"><span class="linenos">400</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">mapf_get_filename_map</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
</span><span id="ModelView-401"><a href="#ModelView-401"><span class="linenos">401</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="ModelView-402"><a href="#ModelView-402"><span class="linenos">402</span></a>
</span><span id="ModelView-403"><a href="#ModelView-403"><span class="linenos">403</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_line_hlength</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span>
</span><span id="ModelView-404"><a href="#ModelView-404"><span class="linenos">404</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_line_vlength</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span>
</span><span id="ModelView-405"><a href="#ModelView-405"><span class="linenos">405</span></a>
</span><span id="ModelView-406"><a href="#ModelView-406"><span class="linenos">406</span></a>        <span class="k">for</span> <span class="n">item_dic</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">iterate_graphic_dictionaries</span><span class="p">():</span>
</span><span id="ModelView-407"><a href="#ModelView-407"><span class="linenos">407</span></a>            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">item_dic</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="ModelView-408"><a href="#ModelView-408"><span class="linenos">408</span></a>                <span class="n">color_id</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ModelView-409"><a href="#ModelView-409"><span class="linenos">409</span></a>                <span class="n">hex_color</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_&#39;</span> <span class="o">+</span> <span class="n">item</span><span class="o">.</span><span class="n">get_kind_name</span><span class="p">()</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">color_id</span><span class="p">))</span>
</span><span id="ModelView-410"><a href="#ModelView-410"><span class="linenos">410</span></a>                <span class="k">while</span><span class="p">(</span><span class="n">hex_color</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="ModelView-411"><a href="#ModelView-411"><span class="linenos">411</span></a>                    <span class="n">item</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">hex_color</span><span class="p">),</span> <span class="n">color_id</span><span class="p">)</span>
</span><span id="ModelView-412"><a href="#ModelView-412"><span class="linenos">412</span></a>                    <span class="n">color_id</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="ModelView-413"><a href="#ModelView-413"><span class="linenos">413</span></a>                    <span class="n">hex_color</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_&#39;</span> <span class="o">+</span> <span class="n">item</span><span class="o">.</span><span class="n">get_kind_name</span><span class="p">()</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">color_id</span><span class="p">))</span>
</span><span id="ModelView-414"><a href="#ModelView-414"><span class="linenos">414</span></a>
</span><span id="ModelView-415"><a href="#ModelView-415"><span class="linenos">415</span></a>        <span class="n">pen</span> <span class="o">=</span> <span class="n">QPen</span><span class="p">()</span>
</span><span id="ModelView-416"><a href="#ModelView-416"><span class="linenos">416</span></a>        <span class="n">pen</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="p">)</span>
</span><span id="ModelView-417"><a href="#ModelView-417"><span class="linenos">417</span></a>        <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DotLine</span><span class="p">)</span>
</span><span id="ModelView-418"><a href="#ModelView-418"><span class="linenos">418</span></a>        <span class="n">brush_disabled_node</span> <span class="o">=</span> <span class="n">QBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_disabled_node&#39;</span><span class="p">)))</span>
</span><span id="ModelView-419"><a href="#ModelView-419"><span class="linenos">419</span></a>        <span class="n">brush_start_point</span> <span class="o">=</span> <span class="n">QBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_start_node&#39;</span><span class="p">)))</span>
</span><span id="ModelView-420"><a href="#ModelView-420"><span class="linenos">420</span></a>        <span class="n">brush_start_point_highlighted</span> <span class="o">=</span> <span class="n">QBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_start_node_highlighted&#39;</span><span class="p">)))</span>
</span><span id="ModelView-421"><a href="#ModelView-421"><span class="linenos">421</span></a>        <span class="n">color_travelled_path_highlighted</span> <span class="o">=</span> <span class="n">QColor</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_travelled_path_highlighted&#39;</span><span class="p">))</span>
</span><span id="ModelView-422"><a href="#ModelView-422"><span class="linenos">422</span></a>        <span class="n">color_future_path_highlighted</span> <span class="o">=</span> <span class="n">QColor</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_future_path_highlighted&#39;</span><span class="p">))</span>
</span><span id="ModelView-423"><a href="#ModelView-423"><span class="linenos">423</span></a>
</span><span id="ModelView-424"><a href="#ModelView-424"><span class="linenos">424</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ModelView-425"><a href="#ModelView-425"><span class="linenos">425</span></a>
</span><span id="ModelView-426"><a href="#ModelView-426"><span class="linenos">426</span></a>        <span class="c1">#---------------------------------------draw vertival lines---------------------------------------</span>
</span><span id="ModelView-427"><a href="#ModelView-427"><span class="linenos">427</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="ModelView-428"><a href="#ModelView-428"><span class="linenos">428</span></a>            <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addLine</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span>
</span><span id="ModelView-429"><a href="#ModelView-429"><span class="linenos">429</span></a>                                        <span class="bp">self</span><span class="o">.</span><span class="n">_line_hlength</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="p">,</span>
</span><span id="ModelView-430"><a href="#ModelView-430"><span class="linenos">430</span></a>                                        <span class="n">i</span> <span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">),</span> <span class="n">pen</span><span class="p">)</span>
</span><span id="ModelView-431"><a href="#ModelView-431"><span class="linenos">431</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="ModelView-432"><a href="#ModelView-432"><span class="linenos">432</span></a>
</span><span id="ModelView-433"><a href="#ModelView-433"><span class="linenos">433</span></a>        <span class="c1">#---------------------------------------draw horizontal lines---------------------------------------</span>
</span><span id="ModelView-434"><a href="#ModelView-434"><span class="linenos">434</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="ModelView-435"><a href="#ModelView-435"><span class="linenos">435</span></a>            <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addLine</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span> 
</span><span id="ModelView-436"><a href="#ModelView-436"><span class="linenos">436</span></a>                                        <span class="mi">0</span><span class="p">,</span> <span class="n">i</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">),</span> 
</span><span id="ModelView-437"><a href="#ModelView-437"><span class="linenos">437</span></a>                                        <span class="bp">self</span><span class="o">.</span><span class="n">_line_vlength</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="p">,</span> <span class="n">pen</span><span class="p">)</span>
</span><span id="ModelView-438"><a href="#ModelView-438"><span class="linenos">438</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="ModelView-439"><a href="#ModelView-439"><span class="linenos">439</span></a>
</span><span id="ModelView-440"><a href="#ModelView-440"><span class="linenos">440</span></a>        <span class="c1">#---------------------------------------draw disabled nodes---------------------------------------</span>
</span><span id="ModelView-441"><a href="#ModelView-441"><span class="linenos">441</span></a>        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_blocked_nodes</span><span class="p">():</span>
</span><span id="ModelView-442"><a href="#ModelView-442"><span class="linenos">442</span></a>            <span class="n">xPos</span> <span class="o">=</span> <span class="p">(</span><span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span>
</span><span id="ModelView-443"><a href="#ModelView-443"><span class="linenos">443</span></a>            <span class="n">yPos</span> <span class="o">=</span> <span class="p">(</span><span class="n">node</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span>
</span><span id="ModelView-444"><a href="#ModelView-444"><span class="linenos">444</span></a>            
</span><span id="ModelView-445"><a href="#ModelView-445"><span class="linenos">445</span></a>            <span class="n">rect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addRect</span><span class="p">(</span> <span class="p">(</span><span class="n">xPos</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="mf">0.1</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span> 
</span><span id="ModelView-446"><a href="#ModelView-446"><span class="linenos">446</span></a>                                        <span class="p">(</span><span class="n">yPos</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="mf">0.1</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span> 
</span><span id="ModelView-447"><a href="#ModelView-447"><span class="linenos">447</span></a>                                        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="mf">0.8</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span> 
</span><span id="ModelView-448"><a href="#ModelView-448"><span class="linenos">448</span></a>                                        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="mf">0.8</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span> 
</span><span id="ModelView-449"><a href="#ModelView-449"><span class="linenos">449</span></a>                                        <span class="n">pen</span><span class="p">,</span> <span class="n">brush_disabled_node</span><span class="p">)</span>
</span><span id="ModelView-450"><a href="#ModelView-450"><span class="linenos">450</span></a><span class="w">            </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-451"><a href="#ModelView-451"><span class="linenos">451</span></a><span class="sd">            rect = self._scene.addRect( xPos*self._scaling, </span>
</span><span id="ModelView-452"><a href="#ModelView-452"><span class="linenos">452</span></a><span class="sd">                                        yPos*self._scaling, </span>
</span><span id="ModelView-453"><a href="#ModelView-453"><span class="linenos">453</span></a><span class="sd">                                        self._w_distance*self._scaling, </span>
</span><span id="ModelView-454"><a href="#ModelView-454"><span class="linenos">454</span></a><span class="sd">                                        self._h_distance*self._scaling, </span>
</span><span id="ModelView-455"><a href="#ModelView-455"><span class="linenos">455</span></a><span class="sd">                                        pen, brush_disabled_node)</span>
</span><span id="ModelView-456"><a href="#ModelView-456"><span class="linenos">456</span></a><span class="sd">            &#39;&#39;&#39;</span>
</span><span id="ModelView-457"><a href="#ModelView-457"><span class="linenos">457</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
</span><span id="ModelView-458"><a href="#ModelView-458"><span class="linenos">458</span></a>
</span><span id="ModelView-459"><a href="#ModelView-459"><span class="linenos">459</span></a>        <span class="c1">#---------------------------------------draw items---------------------------------------</span>
</span><span id="ModelView-460"><a href="#ModelView-460"><span class="linenos">460</span></a>        <span class="k">for</span> <span class="n">item_dic</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">iterate_graphic_dictionaries</span><span class="p">():</span>
</span><span id="ModelView-461"><a href="#ModelView-461"><span class="linenos">461</span></a>            <span class="n">count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">item_dic</span><span class="p">)</span>
</span><span id="ModelView-462"><a href="#ModelView-462"><span class="linenos">462</span></a>            <span class="n">number</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="ModelView-463"><a href="#ModelView-463"><span class="linenos">463</span></a>            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">item_dic</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="ModelView-464"><a href="#ModelView-464"><span class="linenos">464</span></a>                <span class="n">item</span><span class="o">.</span><span class="n">set_display_mode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_display_mode</span><span class="p">)</span>
</span><span id="ModelView-465"><a href="#ModelView-465"><span class="linenos">465</span></a>                <span class="c1">#item.set_display_mode(0)</span>
</span><span id="ModelView-466"><a href="#ModelView-466"><span class="linenos">466</span></a>                <span class="n">x_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_position</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="ModelView-467"><a href="#ModelView-467"><span class="linenos">467</span></a>                <span class="n">y_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_position</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="ModelView-468"><a href="#ModelView-468"><span class="linenos">468</span></a>                <span class="n">action</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_action</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_current_step</span><span class="p">())</span>
</span><span id="ModelView-469"><a href="#ModelView-469"><span class="linenos">469</span></a>                <span class="k">if</span> <span class="n">action</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView-470"><a href="#ModelView-470"><span class="linenos">470</span></a>                    <span class="n">action_name</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
</span><span id="ModelView-471"><a href="#ModelView-471"><span class="linenos">471</span></a>                    <span class="n">action_value</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView-472"><a href="#ModelView-472"><span class="linenos">472</span></a>                    <span class="k">if</span> <span class="n">action_name</span> <span class="o">==</span> <span class="s1">&#39;move&#39;</span><span class="p">:</span>
</span><span id="ModelView-473"><a href="#ModelView-473"><span class="linenos">473</span></a>                        <span class="n">action_x</span> <span class="o">=</span> <span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">number</span>
</span><span id="ModelView-474"><a href="#ModelView-474"><span class="linenos">474</span></a>                        <span class="n">action_y</span> <span class="o">=</span> <span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">number</span>
</span><span id="ModelView-475"><a href="#ModelView-475"><span class="linenos">475</span></a>                        <span class="n">x_pos</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">x_pos</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">action_x</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span><span class="p">))))</span>
</span><span id="ModelView-476"><a href="#ModelView-476"><span class="linenos">476</span></a>                        <span class="n">y_pos</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">y_pos</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">action_y</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span><span class="p">))))</span>
</span><span id="ModelView-477"><a href="#ModelView-477"><span class="linenos">477</span></a>                <span class="n">x_pos</span> <span class="o">=</span> <span class="n">x_pos</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">/</span><span class="mi">2</span>
</span><span id="ModelView-478"><a href="#ModelView-478"><span class="linenos">478</span></a>                <span class="n">y_pos</span> <span class="o">=</span> <span class="n">y_pos</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">/</span><span class="mi">2</span>
</span><span id="ModelView-479"><a href="#ModelView-479"><span class="linenos">479</span></a>                <span class="n">item</span><span class="o">.</span><span class="n">set_rect</span><span class="p">(</span><span class="n">QRect</span><span class="p">(</span><span class="n">x_pos</span><span class="p">,</span> <span class="n">y_pos</span><span class="p">,</span>
</span><span id="ModelView-480"><a href="#ModelView-480"><span class="linenos">480</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span>
</span><span id="ModelView-481"><a href="#ModelView-481"><span class="linenos">481</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">))</span>
</span><span id="ModelView-482"><a href="#ModelView-482"><span class="linenos">482</span></a>                
</span><span id="ModelView-483"><a href="#ModelView-483"><span class="linenos">483</span></a>                <span class="n">item</span><span class="o">.</span><span class="n">determine_color</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
</span><span id="ModelView-484"><a href="#ModelView-484"><span class="linenos">484</span></a>                
</span><span id="ModelView-485"><a href="#ModelView-485"><span class="linenos">485</span></a>                <span class="c1">#---------------------------------------draw start point---------------------------------------</span>
</span><span id="ModelView-486"><a href="#ModelView-486"><span class="linenos">486</span></a>                <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get_draw_startpoint</span><span class="p">():</span>
</span><span id="ModelView-487"><a href="#ModelView-487"><span class="linenos">487</span></a>
</span><span id="ModelView-488"><a href="#ModelView-488"><span class="linenos">488</span></a>                    <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="o">*</span><span class="mf">0.5</span>
</span><span id="ModelView-489"><a href="#ModelView-489"><span class="linenos">489</span></a>                    <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="o">*</span><span class="mf">0.5</span>
</span><span id="ModelView-490"><a href="#ModelView-490"><span class="linenos">490</span></a>                                           
</span><span id="ModelView-491"><a href="#ModelView-491"><span class="linenos">491</span></a>                    <span class="n">x_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_start_position</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span>
</span><span id="ModelView-492"><a href="#ModelView-492"><span class="linenos">492</span></a>                    <span class="n">y_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_start_position</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span>
</span><span id="ModelView-493"><a href="#ModelView-493"><span class="linenos">493</span></a>                    <span class="n">x_pos</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">x_pos</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView-494"><a href="#ModelView-494"><span class="linenos">494</span></a>                    <span class="n">y_pos</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">y_pos</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView-495"><a href="#ModelView-495"><span class="linenos">495</span></a>
</span><span id="ModelView-496"><a href="#ModelView-496"><span class="linenos">496</span></a>                    <span class="n">pen</span> <span class="o">=</span> <span class="n">QPen</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get_color</span><span class="p">())</span>
</span><span id="ModelView-497"><a href="#ModelView-497"><span class="linenos">497</span></a>                    <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get_highlighted</span><span class="p">():</span>
</span><span id="ModelView-498"><a href="#ModelView-498"><span class="linenos">498</span></a>                        <span class="n">startpoint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addEllipse</span><span class="p">(</span><span class="n">x_pos</span><span class="o">-</span><span class="mf">0.75</span><span class="o">*</span><span class="n">w</span><span class="p">,</span> 
</span><span id="ModelView-499"><a href="#ModelView-499"><span class="linenos">499</span></a>                                                  <span class="n">y_pos</span><span class="o">-</span><span class="mf">0.75</span><span class="o">*</span><span class="n">h</span><span class="p">,</span>
</span><span id="ModelView-500"><a href="#ModelView-500"><span class="linenos">500</span></a>                                                  <span class="mf">1.5</span><span class="o">*</span><span class="n">w</span><span class="p">,</span>
</span><span id="ModelView-501"><a href="#ModelView-501"><span class="linenos">501</span></a>                                                  <span class="mf">1.5</span><span class="o">*</span><span class="n">h</span><span class="p">,</span>
</span><span id="ModelView-502"><a href="#ModelView-502"><span class="linenos">502</span></a>                                                  <span class="n">pen</span><span class="p">,</span> <span class="n">brush_start_point_highlighted</span><span class="p">)</span>
</span><span id="ModelView-503"><a href="#ModelView-503"><span class="linenos">503</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">startpoint</span><span class="p">)</span>
</span><span id="ModelView-504"><a href="#ModelView-504"><span class="linenos">504</span></a>
</span><span id="ModelView-505"><a href="#ModelView-505"><span class="linenos">505</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="ModelView-506"><a href="#ModelView-506"><span class="linenos">506</span></a>                        <span class="n">startpoint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addEllipse</span><span class="p">(</span><span class="n">x_pos</span><span class="o">-</span><span class="n">w</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span> 
</span><span id="ModelView-507"><a href="#ModelView-507"><span class="linenos">507</span></a>                                                  <span class="n">y_pos</span><span class="o">-</span><span class="n">h</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span>
</span><span id="ModelView-508"><a href="#ModelView-508"><span class="linenos">508</span></a>                                                  <span class="n">w</span><span class="p">,</span>
</span><span id="ModelView-509"><a href="#ModelView-509"><span class="linenos">509</span></a>                                                  <span class="n">h</span><span class="p">,</span>
</span><span id="ModelView-510"><a href="#ModelView-510"><span class="linenos">510</span></a>                                                  <span class="n">pen</span><span class="p">,</span> <span class="n">brush_start_point</span><span class="p">)</span>
</span><span id="ModelView-511"><a href="#ModelView-511"><span class="linenos">511</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">startpoint</span><span class="p">)</span>
</span><span id="ModelView-512"><a href="#ModelView-512"><span class="linenos">512</span></a>                                 
</span><span id="ModelView-513"><a href="#ModelView-513"><span class="linenos">513</span></a>                <span class="c1">#---------------------------------------draw path---------------------------------------</span>
</span><span id="ModelView-514"><a href="#ModelView-514"><span class="linenos">514</span></a>                <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get_draw_path</span><span class="p">():</span>
</span><span id="ModelView-515"><a href="#ModelView-515"><span class="linenos">515</span></a>
</span><span id="ModelView-516"><a href="#ModelView-516"><span class="linenos">516</span></a>                    <span class="n">x_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_start_position</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ModelView-517"><a href="#ModelView-517"><span class="linenos">517</span></a>                    <span class="n">y_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_start_position</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView-518"><a href="#ModelView-518"><span class="linenos">518</span></a>                    <span class="n">pen</span> <span class="o">=</span> <span class="n">QPen</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get_color</span><span class="p">())</span>
</span><span id="ModelView-519"><a href="#ModelView-519"><span class="linenos">519</span></a>                    <span class="n">pen</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
</span><span id="ModelView-520"><a href="#ModelView-520"><span class="linenos">520</span></a>                    <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get_highlighted</span><span class="p">():</span>
</span><span id="ModelView-521"><a href="#ModelView-521"><span class="linenos">521</span></a>                        <span class="n">pen</span> <span class="o">=</span> <span class="n">QPen</span><span class="p">(</span><span class="n">color_travelled_path_highlighted</span><span class="p">)</span>      
</span><span id="ModelView-522"><a href="#ModelView-522"><span class="linenos">522</span></a>                        <span class="n">pen</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">*</span><span class="mi">4</span><span class="p">)</span>
</span><span id="ModelView-523"><a href="#ModelView-523"><span class="linenos">523</span></a>
</span><span id="ModelView-524"><a href="#ModelView-524"><span class="linenos">524</span></a>                    <span class="k">if</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ModelView-525"><a href="#ModelView-525"><span class="linenos">525</span></a>                        <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DotLine</span><span class="p">)</span>
</span><span id="ModelView-526"><a href="#ModelView-526"><span class="linenos">526</span></a>                    <span class="k">elif</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ModelView-527"><a href="#ModelView-527"><span class="linenos">527</span></a>                        <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DashDotDotLine</span><span class="p">)</span>
</span><span id="ModelView-528"><a href="#ModelView-528"><span class="linenos">528</span></a>                    <span class="k">elif</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ModelView-529"><a href="#ModelView-529"><span class="linenos">529</span></a>                        <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DashDotLine</span><span class="p">)</span>           
</span><span id="ModelView-530"><a href="#ModelView-530"><span class="linenos">530</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="ModelView-531"><a href="#ModelView-531"><span class="linenos">531</span></a>                        <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DashLine</span><span class="p">)</span>           
</span><span id="ModelView-532"><a href="#ModelView-532"><span class="linenos">532</span></a>
</span><span id="ModelView-533"><a href="#ModelView-533"><span class="linenos">533</span></a>                    <span class="n">cc</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ModelView-534"><a href="#ModelView-534"><span class="linenos">534</span></a>                    <span class="k">while</span><span class="p">(</span><span class="n">cc</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_num_steps</span><span class="p">()):</span>
</span><span id="ModelView-535"><a href="#ModelView-535"><span class="linenos">535</span></a>                        <span class="n">action</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_action</span><span class="p">(</span><span class="n">cc</span><span class="p">)</span>
</span><span id="ModelView-536"><a href="#ModelView-536"><span class="linenos">536</span></a>                        <span class="k">if</span> <span class="n">action</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView-537"><a href="#ModelView-537"><span class="linenos">537</span></a>                            
</span><span id="ModelView-538"><a href="#ModelView-538"><span class="linenos">538</span></a>                            <span class="k">if</span> <span class="n">action</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;move&#39;</span><span class="p">:</span>
</span><span id="ModelView-539"><a href="#ModelView-539"><span class="linenos">539</span></a>                                <span class="n">action_value</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView-540"><a href="#ModelView-540"><span class="linenos">540</span></a>                                
</span><span id="ModelView-541"><a href="#ModelView-541"><span class="linenos">541</span></a>                                <span class="n">x_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_pos</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView-542"><a href="#ModelView-542"><span class="linenos">542</span></a>                                <span class="n">y_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_pos</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView-543"><a href="#ModelView-543"><span class="linenos">543</span></a>                                <span class="n">x2_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_pos</span><span class="o">+</span><span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">number</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView-544"><a href="#ModelView-544"><span class="linenos">544</span></a>                                <span class="n">y2_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_pos</span><span class="o">+</span><span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">number</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView-545"><a href="#ModelView-545"><span class="linenos">545</span></a>                                
</span><span id="ModelView-546"><a href="#ModelView-546"><span class="linenos">546</span></a>                                <span class="k">if</span> <span class="p">(</span><span class="n">cc</span> <span class="o">==</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_num_steps</span><span class="p">())</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="ModelView-547"><a href="#ModelView-547"><span class="linenos">547</span></a>
</span><span id="ModelView-548"><a href="#ModelView-548"><span class="linenos">548</span></a>                                    <span class="n">x2_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_pos</span><span class="o">+</span><span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">number</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span><span class="p">))</span>
</span><span id="ModelView-549"><a href="#ModelView-549"><span class="linenos">549</span></a>                                            <span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView-550"><a href="#ModelView-550"><span class="linenos">550</span></a>                                    <span class="n">y2_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_pos</span><span class="o">+</span><span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">number</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span><span class="p">))</span>
</span><span id="ModelView-551"><a href="#ModelView-551"><span class="linenos">551</span></a>                                            <span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView-552"><a href="#ModelView-552"><span class="linenos">552</span></a>                                
</span><span id="ModelView-553"><a href="#ModelView-553"><span class="linenos">553</span></a>                                <span class="n">x_pos</span> <span class="o">=</span> <span class="n">x_pos</span> <span class="o">+</span> <span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">number</span>
</span><span id="ModelView-554"><a href="#ModelView-554"><span class="linenos">554</span></a>                                <span class="n">y_pos</span> <span class="o">=</span> <span class="n">y_pos</span> <span class="o">+</span> <span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">number</span>
</span><span id="ModelView-555"><a href="#ModelView-555"><span class="linenos">555</span></a>
</span><span id="ModelView-556"><a href="#ModelView-556"><span class="linenos">556</span></a>                                <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addLine</span><span class="p">(</span><span class="n">x_posf</span><span class="p">,</span> <span class="n">y_posf</span><span class="p">,</span> <span class="n">x2_posf</span><span class="p">,</span> <span class="n">y2_posf</span><span class="p">,</span> <span class="n">pen</span><span class="p">)</span>
</span><span id="ModelView-557"><a href="#ModelView-557"><span class="linenos">557</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="ModelView-558"><a href="#ModelView-558"><span class="linenos">558</span></a>                        <span class="n">cc</span> <span class="o">=</span> <span class="n">cc</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="ModelView-559"><a href="#ModelView-559"><span class="linenos">559</span></a>                        
</span><span id="ModelView-560"><a href="#ModelView-560"><span class="linenos">560</span></a>                <span class="c1">#---------------------------------------draw future path---------------------------------------</span>
</span><span id="ModelView-561"><a href="#ModelView-561"><span class="linenos">561</span></a>                <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get_draw_future_path</span><span class="p">():</span>
</span><span id="ModelView-562"><a href="#ModelView-562"><span class="linenos">562</span></a>                    <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get_future_path</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="ModelView-563"><a href="#ModelView-563"><span class="linenos">563</span></a>                        <span class="n">x_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_future_path</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pos_x</span>
</span><span id="ModelView-564"><a href="#ModelView-564"><span class="linenos">564</span></a>                        <span class="n">y_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_future_path</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pos_y</span>
</span><span id="ModelView-565"><a href="#ModelView-565"><span class="linenos">565</span></a>
</span><span id="ModelView-566"><a href="#ModelView-566"><span class="linenos">566</span></a>                        <span class="n">pen</span> <span class="o">=</span> <span class="n">QPen</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get_color</span><span class="p">())</span>
</span><span id="ModelView-567"><a href="#ModelView-567"><span class="linenos">567</span></a>                        <span class="n">pen</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="p">)</span>
</span><span id="ModelView-568"><a href="#ModelView-568"><span class="linenos">568</span></a>                        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get_highlighted</span><span class="p">():</span>
</span><span id="ModelView-569"><a href="#ModelView-569"><span class="linenos">569</span></a>                            <span class="n">pen</span> <span class="o">=</span> <span class="n">QPen</span><span class="p">(</span><span class="n">color_future_path_highlighted</span><span class="p">)</span>      
</span><span id="ModelView-570"><a href="#ModelView-570"><span class="linenos">570</span></a>                            <span class="n">pen</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span>
</span><span id="ModelView-571"><a href="#ModelView-571"><span class="linenos">571</span></a>
</span><span id="ModelView-572"><a href="#ModelView-572"><span class="linenos">572</span></a>                        <span class="k">if</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ModelView-573"><a href="#ModelView-573"><span class="linenos">573</span></a>                            <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DotLine</span><span class="p">)</span>
</span><span id="ModelView-574"><a href="#ModelView-574"><span class="linenos">574</span></a>                        <span class="k">elif</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ModelView-575"><a href="#ModelView-575"><span class="linenos">575</span></a>                            <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DashDotDotLine</span><span class="p">)</span>
</span><span id="ModelView-576"><a href="#ModelView-576"><span class="linenos">576</span></a>                        <span class="k">elif</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ModelView-577"><a href="#ModelView-577"><span class="linenos">577</span></a>                            <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DashDotLine</span><span class="p">)</span>           
</span><span id="ModelView-578"><a href="#ModelView-578"><span class="linenos">578</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="ModelView-579"><a href="#ModelView-579"><span class="linenos">579</span></a>                            <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DashLine</span><span class="p">)</span>           
</span><span id="ModelView-580"><a href="#ModelView-580"><span class="linenos">580</span></a>
</span><span id="ModelView-581"><a href="#ModelView-581"><span class="linenos">581</span></a>                        <span class="n">first</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ModelView-582"><a href="#ModelView-582"><span class="linenos">582</span></a>                        <span class="k">for</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">get_future_path</span><span class="p">()[</span><span class="mi">1</span><span class="p">:]:</span>
</span><span id="ModelView-583"><a href="#ModelView-583"><span class="linenos">583</span></a>
</span><span id="ModelView-584"><a href="#ModelView-584"><span class="linenos">584</span></a>                            <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView-585"><a href="#ModelView-585"><span class="linenos">585</span></a>                                <span class="k">break</span>
</span><span id="ModelView-586"><a href="#ModelView-586"><span class="linenos">586</span></a>
</span><span id="ModelView-587"><a href="#ModelView-587"><span class="linenos">587</span></a>                            <span class="n">x2_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">position</span><span class="o">.</span><span class="n">pos_x</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView-588"><a href="#ModelView-588"><span class="linenos">588</span></a>                            <span class="n">y2_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">position</span><span class="o">.</span><span class="n">pos_y</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView-589"><a href="#ModelView-589"><span class="linenos">589</span></a>                        
</span><span id="ModelView-590"><a href="#ModelView-590"><span class="linenos">590</span></a>                            <span class="k">if</span> <span class="n">first</span><span class="p">:</span>
</span><span id="ModelView-591"><a href="#ModelView-591"><span class="linenos">591</span></a>                                <span class="n">first</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="ModelView-592"><a href="#ModelView-592"><span class="linenos">592</span></a>                                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ModelView-593"><a href="#ModelView-593"><span class="linenos">593</span></a>                                    <span class="n">x_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_pos</span><span class="o">-</span><span class="mf">0.5</span><span class="o">+</span><span class="p">(</span><span class="n">position</span><span class="o">.</span><span class="n">pos_x</span><span class="o">-</span><span class="n">x_pos</span><span class="p">)</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span><span class="p">)</span>
</span><span id="ModelView-594"><a href="#ModelView-594"><span class="linenos">594</span></a>                                                                                        <span class="p">))</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView-595"><a href="#ModelView-595"><span class="linenos">595</span></a>                                    <span class="n">y_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_pos</span><span class="o">-</span><span class="mf">0.5</span><span class="o">+</span><span class="p">(</span><span class="n">position</span><span class="o">.</span><span class="n">pos_y</span><span class="o">-</span><span class="n">y_pos</span><span class="p">)</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span><span class="p">)</span>
</span><span id="ModelView-596"><a href="#ModelView-596"><span class="linenos">596</span></a>                                                                                        <span class="p">))</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView-597"><a href="#ModelView-597"><span class="linenos">597</span></a>                                <span class="k">else</span><span class="p">:</span>
</span><span id="ModelView-598"><a href="#ModelView-598"><span class="linenos">598</span></a>                                    <span class="n">x_posf</span> <span class="o">=</span> <span class="n">x2_posf</span>
</span><span id="ModelView-599"><a href="#ModelView-599"><span class="linenos">599</span></a>                                    <span class="n">y_posf</span> <span class="o">=</span> <span class="n">y2_posf</span>
</span><span id="ModelView-600"><a href="#ModelView-600"><span class="linenos">600</span></a>                                
</span><span id="ModelView-601"><a href="#ModelView-601"><span class="linenos">601</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="ModelView-602"><a href="#ModelView-602"><span class="linenos">602</span></a>                                <span class="n">x_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_pos</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView-603"><a href="#ModelView-603"><span class="linenos">603</span></a>                                <span class="n">y_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_pos</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView-604"><a href="#ModelView-604"><span class="linenos">604</span></a>
</span><span id="ModelView-605"><a href="#ModelView-605"><span class="linenos">605</span></a>                            <span class="n">x_pos</span> <span class="o">=</span> <span class="n">position</span><span class="o">.</span><span class="n">pos_x</span>
</span><span id="ModelView-606"><a href="#ModelView-606"><span class="linenos">606</span></a>                            <span class="n">y_pos</span> <span class="o">=</span> <span class="n">position</span><span class="o">.</span><span class="n">pos_y</span>
</span><span id="ModelView-607"><a href="#ModelView-607"><span class="linenos">607</span></a>                            
</span><span id="ModelView-608"><a href="#ModelView-608"><span class="linenos">608</span></a>                            <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addLine</span><span class="p">(</span><span class="n">x_posf</span><span class="p">,</span> <span class="n">y_posf</span><span class="p">,</span> <span class="n">x2_posf</span><span class="p">,</span> <span class="n">y2_posf</span><span class="p">,</span> <span class="n">pen</span><span class="p">)</span>
</span><span id="ModelView-609"><a href="#ModelView-609"><span class="linenos">609</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="ModelView-610"><a href="#ModelView-610"><span class="linenos">610</span></a>                            <span class="n">first</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="ModelView-611"><a href="#ModelView-611"><span class="linenos">611</span></a>
</span><span id="ModelView-612"><a href="#ModelView-612"><span class="linenos">612</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="ModelView-613"><a href="#ModelView-613"><span class="linenos">613</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="ModelView-614"><a href="#ModelView-614"><span class="linenos">614</span></a>                <span class="n">number</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="ModelView-615"><a href="#ModelView-615"><span class="linenos">615</span></a>                
</span><span id="ModelView-616"><a href="#ModelView-616"><span class="linenos">616</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_windows</span><span class="p">()</span>
</span><span id="ModelView-617"><a href="#ModelView-617"><span class="linenos">617</span></a>
</span><span id="ModelView-618"><a href="#ModelView-618"><span class="linenos">618</span></a>    <span class="k">def</span> <span class="nf">update_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">forced</span><span class="p">):</span>
</span><span id="ModelView-619"><a href="#ModelView-619"><span class="linenos">619</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-620"><a href="#ModelView-620"><span class="linenos">620</span></a><span class="sd">        This function will be called every time the timer is running out. </span>
</span><span id="ModelView-621"><a href="#ModelView-621"><span class="linenos">621</span></a><span class="sd">        The function changes the state of this class depending on </span>
</span><span id="ModelView-622"><a href="#ModelView-622"><span class="linenos">622</span></a><span class="sd">        the actual state of this class and the data received by the model through ROS2. </span>
</span><span id="ModelView-623"><a href="#ModelView-623"><span class="linenos">623</span></a><span class="sd">        Depending on the state of this class different actions will be performed by the model.</span>
</span><span id="ModelView-624"><a href="#ModelView-624"><span class="linenos">624</span></a><span class="sd">        </span>
</span><span id="ModelView-625"><a href="#ModelView-625"><span class="linenos">625</span></a><span class="sd">        Following states are accepted: </span>
</span><span id="ModelView-626"><a href="#ModelView-626"><span class="linenos">626</span></a><span class="sd">        -   PUBLISH: model sends information about the map (MapInfo.msg) and every robot (RobotInfo.msg) to the CONTROLLER</span>
</span><span id="ModelView-627"><a href="#ModelView-627"><span class="linenos">627</span></a><span class="sd">        -   WAIT:    no action until the model has received all information about the next actions from the CONTROLLER</span>
</span><span id="ModelView-628"><a href="#ModelView-628"><span class="linenos">628</span></a><span class="sd">        -   EXEC:    modelView executes all received actions from the CONTROLLER by the model for the next step incrementally.</span>
</span><span id="ModelView-629"><a href="#ModelView-629"><span class="linenos">629</span></a><span class="sd">                     After completing the step by the modelview the model will be updated with new positions of the robots and </span>
</span><span id="ModelView-630"><a href="#ModelView-630"><span class="linenos">630</span></a><span class="sd">                     the simulation changes it&#39;s state to PUBLISH again!</span>
</span><span id="ModelView-631"><a href="#ModelView-631"><span class="linenos">631</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-632"><a href="#ModelView-632"><span class="linenos">632</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> 
</span><span id="ModelView-633"><a href="#ModelView-633"><span class="linenos">633</span></a>            <span class="k">return</span>        
</span><span id="ModelView-634"><a href="#ModelView-634"><span class="linenos">634</span></a>                
</span><span id="ModelView-635"><a href="#ModelView-635"><span class="linenos">635</span></a>        <span class="c1">#STATE 0: PUBLISH ROS MESSAGES</span>
</span><span id="ModelView-636"><a href="#ModelView-636"><span class="linenos">636</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="n">PUBLISH</span><span class="p">:</span>
</span><span id="ModelView-637"><a href="#ModelView-637"><span class="linenos">637</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MODE: PUBLISH INFO (MapInfo.msg and RobotInfo.msg)&quot;</span><span class="p">)</span>    
</span><span id="ModelView-638"><a href="#ModelView-638"><span class="linenos">638</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">mapf_init_next_step</span><span class="p">()</span>
</span><span id="ModelView-639"><a href="#ModelView-639"><span class="linenos">639</span></a>            <span class="c1">#set time for next timeout, after timeout come back</span>
</span><span id="ModelView-640"><a href="#ModelView-640"><span class="linenos">640</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timeout_end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_next_ros_timeout</span><span class="p">()</span>
</span><span id="ModelView-641"><a href="#ModelView-641"><span class="linenos">641</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">WAIT</span>
</span><span id="ModelView-642"><a href="#ModelView-642"><span class="linenos">642</span></a>            
</span><span id="ModelView-643"><a href="#ModelView-643"><span class="linenos">643</span></a>        <span class="c1">#STATE 1: UPDATE, WAIT</span>
</span><span id="ModelView-644"><a href="#ModelView-644"><span class="linenos">644</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="n">WAIT</span><span class="p">:</span>
</span><span id="ModelView-645"><a href="#ModelView-645"><span class="linenos">645</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MODE: WAITING (for RobotAction.msg)&quot;</span><span class="p">)</span>    
</span><span id="ModelView-646"><a href="#ModelView-646"><span class="linenos">646</span></a>            <span class="n">simulation_ready</span><span class="p">,</span> <span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">mapf_spin_once</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timeout_end</span><span class="p">)</span>        
</span><span id="ModelView-647"><a href="#ModelView-647"><span class="linenos">647</span></a>            <span class="k">if</span> <span class="n">simulation_ready</span><span class="p">:</span>
</span><span id="ModelView-648"><a href="#ModelView-648"><span class="linenos">648</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">EXEC</span>
</span><span id="ModelView-649"><a href="#ModelView-649"><span class="linenos">649</span></a>            <span class="k">elif</span> <span class="n">timeout</span><span class="p">:</span>
</span><span id="ModelView-650"><a href="#ModelView-650"><span class="linenos">650</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">PUBLISH</span>
</span><span id="ModelView-651"><a href="#ModelView-651"><span class="linenos">651</span></a>                
</span><span id="ModelView-652"><a href="#ModelView-652"><span class="linenos">652</span></a>        <span class="c1">#STATE 2: EXECUTE ONE STEP</span>
</span><span id="ModelView-653"><a href="#ModelView-653"><span class="linenos">653</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="n">EXEC</span><span class="p">:</span>
</span><span id="ModelView-654"><a href="#ModelView-654"><span class="linenos">654</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MODE: EXEC (moving robots)&quot;</span><span class="p">)</span>    
</span><span id="ModelView-655"><a href="#ModelView-655"><span class="linenos">655</span></a>            <span class="c1">#if self._timer_count &gt;= 10 or forced:</span>
</span><span id="ModelView-656"><a href="#ModelView-656"><span class="linenos">656</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span> <span class="ow">or</span> <span class="n">forced</span><span class="p">:</span>
</span><span id="ModelView-657"><a href="#ModelView-657"><span class="linenos">657</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="ModelView-658"><a href="#ModelView-658"><span class="linenos">658</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ModelView-659"><a href="#ModelView-659"><span class="linenos">659</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_timeout_end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_next_ros_timeout</span><span class="p">()</span>
</span><span id="ModelView-660"><a href="#ModelView-660"><span class="linenos">660</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">PUBLISH</span>
</span><span id="ModelView-661"><a href="#ModelView-661"><span class="linenos">661</span></a>            <span class="k">else</span><span class="p">:</span> 
</span><span id="ModelView-662"><a href="#ModelView-662"><span class="linenos">662</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="ModelView-663"><a href="#ModelView-663"><span class="linenos">663</span></a>    
</span><span id="ModelView-664"><a href="#ModelView-664"><span class="linenos">664</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="ModelView-665"><a href="#ModelView-665"><span class="linenos">665</span></a>
</span><span id="ModelView-666"><a href="#ModelView-666"><span class="linenos">666</span></a>    <span class="k">def</span> <span class="nf">do_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView-667"><a href="#ModelView-667"><span class="linenos">667</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-668"><a href="#ModelView-668"><span class="linenos">668</span></a><span class="sd">        This function performs a step forward when the button &quot;&gt;&quot; in the GUI was pressed</span>
</span><span id="ModelView-669"><a href="#ModelView-669"><span class="linenos">669</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-670"><a href="#ModelView-670"><span class="linenos">670</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> 
</span><span id="ModelView-671"><a href="#ModelView-671"><span class="linenos">671</span></a>            <span class="k">return</span>
</span><span id="ModelView-672"><a href="#ModelView-672"><span class="linenos">672</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">redo</span><span class="p">()</span>
</span><span id="ModelView-673"><a href="#ModelView-673"><span class="linenos">673</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span> 
</span><span id="ModelView-674"><a href="#ModelView-674"><span class="linenos">674</span></a>
</span><span id="ModelView-675"><a href="#ModelView-675"><span class="linenos">675</span></a>    <span class="k">def</span> <span class="nf">undo_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView-676"><a href="#ModelView-676"><span class="linenos">676</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-677"><a href="#ModelView-677"><span class="linenos">677</span></a><span class="sd">        This function performs a step back when the button &quot;&lt;&quot; in the GUI was pressed</span>
</span><span id="ModelView-678"><a href="#ModelView-678"><span class="linenos">678</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-679"><a href="#ModelView-679"><span class="linenos">679</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> 
</span><span id="ModelView-680"><a href="#ModelView-680"><span class="linenos">680</span></a>            <span class="k">return</span>
</span><span id="ModelView-681"><a href="#ModelView-681"><span class="linenos">681</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">undo</span><span class="p">()</span>
</span><span id="ModelView-682"><a href="#ModelView-682"><span class="linenos">682</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="ModelView-683"><a href="#ModelView-683"><span class="linenos">683</span></a> 
</span><span id="ModelView-684"><a href="#ModelView-684"><span class="linenos">684</span></a>    <span class="k">def</span> <span class="nf">_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scale_x</span><span class="p">,</span> <span class="n">scale_y</span><span class="p">):</span>
</span><span id="ModelView-685"><a href="#ModelView-685"><span class="linenos">685</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-686"><a href="#ModelView-686"><span class="linenos">686</span></a><span class="sd">        This function sets the scale factors for painting the elements in the visualization.</span>
</span><span id="ModelView-687"><a href="#ModelView-687"><span class="linenos">687</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-688"><a href="#ModelView-688"><span class="linenos">688</span></a>        <span class="n">old_zoom</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ModelView-689"><a href="#ModelView-689"><span class="linenos">689</span></a>        <span class="n">new_zoom</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">scale_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">scale_y</span><span class="p">)</span>
</span><span id="ModelView-690"><a href="#ModelView-690"><span class="linenos">690</span></a>        <span class="n">scale</span> <span class="o">=</span> <span class="n">new_zoom</span><span class="o">/</span><span class="n">old_zoom</span>
</span><span id="ModelView-691"><a href="#ModelView-691"><span class="linenos">691</span></a>        <span class="k">if</span> <span class="n">old_zoom</span> <span class="o">&lt;</span> <span class="mf">1.0</span><span class="p">:</span>
</span><span id="ModelView-692"><a href="#ModelView-692"><span class="linenos">692</span></a>            <span class="n">scale</span> <span class="o">=</span> <span class="n">new_zoom</span>
</span><span id="ModelView-693"><a href="#ModelView-693"><span class="linenos">693</span></a>        <span class="k">if</span>  <span class="n">new_zoom</span> <span class="o">&gt;=</span> <span class="mf">1.0</span><span class="p">:</span>
</span><span id="ModelView-694"><a href="#ModelView-694"><span class="linenos">694</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">scale</span><span class="p">,</span> <span class="n">scale</span><span class="p">)</span>
</span><span id="ModelView-695"><a href="#ModelView-695"><span class="linenos">695</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_display_mode</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ModelView-696"><a href="#ModelView-696"><span class="linenos">696</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">=</span> <span class="mf">1.0</span>
</span><span id="ModelView-697"><a href="#ModelView-697"><span class="linenos">697</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span> <span class="o">=</span> <span class="mi">3</span>
</span><span id="ModelView-698"><a href="#ModelView-698"><span class="linenos">698</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ModelView-699"><a href="#ModelView-699"><span class="linenos">699</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_display_mode</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ModelView-700"><a href="#ModelView-700"><span class="linenos">700</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="n">old_zoom</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="n">old_zoom</span><span class="p">)</span>
</span><span id="ModelView-701"><a href="#ModelView-701"><span class="linenos">701</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_display_mode</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="ModelView-702"><a href="#ModelView-702"><span class="linenos">702</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">scale_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">scale_y</span><span class="p">)</span>
</span><span id="ModelView-703"><a href="#ModelView-703"><span class="linenos">703</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="ModelView-704"><a href="#ModelView-704"><span class="linenos">704</span></a>            <span class="k">if</span> <span class="n">new_zoom</span> <span class="o">&lt;</span> <span class="mf">0.5</span><span class="p">:</span>
</span><span id="ModelView-705"><a href="#ModelView-705"><span class="linenos">705</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span> <span class="o">=</span> <span class="mi">1</span>                
</span><span id="ModelView-706"><a href="#ModelView-706"><span class="linenos">706</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">scale_x</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="n">scale_y</span><span class="p">)</span>
</span><span id="ModelView-707"><a href="#ModelView-707"><span class="linenos">707</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="ModelView-708"><a href="#ModelView-708"><span class="linenos">708</span></a>
</span><span id="ModelView-709"><a href="#ModelView-709"><span class="linenos">709</span></a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView-710"><a href="#ModelView-710"><span class="linenos">710</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-711"><a href="#ModelView-711"><span class="linenos">711</span></a><span class="sd">        This function removes the items from the window which belong to the previous paint. </span>
</span><span id="ModelView-712"><a href="#ModelView-712"><span class="linenos">712</span></a><span class="sd">        Every time the visualization is updated all old elements are removed from the window. </span>
</span><span id="ModelView-713"><a href="#ModelView-713"><span class="linenos">713</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-714"><a href="#ModelView-714"><span class="linenos">714</span></a>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lines</span><span class="p">:</span>
</span><span id="ModelView-715"><a href="#ModelView-715"><span class="linenos">715</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="ModelView-716"><a href="#ModelView-716"><span class="linenos">716</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_lines</span> <span class="o">=</span> <span class="p">[]</span>        
</span><span id="ModelView-717"><a href="#ModelView-717"><span class="linenos">717</span></a>
</span><span id="ModelView-718"><a href="#ModelView-718"><span class="linenos">718</span></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="p">:</span>
</span><span id="ModelView-719"><a href="#ModelView-719"><span class="linenos">719</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="ModelView-720"><a href="#ModelView-720"><span class="linenos">720</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ModelView-721"><a href="#ModelView-721"><span class="linenos">721</span></a>        <span class="c1">#self._scene.clear()</span>
</span><span id="ModelView-722"><a href="#ModelView-722"><span class="linenos">722</span></a>
</span><span id="ModelView-723"><a href="#ModelView-723"><span class="linenos">723</span></a>    <span class="k">def</span> <span class="nf">scene_coordinates_to_grid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
</span><span id="ModelView-724"><a href="#ModelView-724"><span class="linenos">724</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-725"><a href="#ModelView-725"><span class="linenos">725</span></a><span class="sd">        @private</span>
</span><span id="ModelView-726"><a href="#ModelView-726"><span class="linenos">726</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-727"><a href="#ModelView-727"><span class="linenos">727</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span> 
</span><span id="ModelView-728"><a href="#ModelView-728"><span class="linenos">728</span></a>            <span class="ow">or</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_line_hlength</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> 
</span><span id="ModelView-729"><a href="#ModelView-729"><span class="linenos">729</span></a>            <span class="ow">or</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_line_vlength</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">):</span>
</span><span id="ModelView-730"><a href="#ModelView-730"><span class="linenos">730</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="ModelView-731"><a href="#ModelView-731"><span class="linenos">731</span></a>        <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span>
</span><span id="ModelView-732"><a href="#ModelView-732"><span class="linenos">732</span></a>                    <span class="nb">int</span><span class="p">(</span><span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
</span><span id="ModelView-733"><a href="#ModelView-733"><span class="linenos">733</span></a>        <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:</span>
</span><span id="ModelView-734"><a href="#ModelView-734"><span class="linenos">734</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ModelView-735"><a href="#ModelView-735"><span class="linenos">735</span></a>        <span class="k">if</span> <span class="n">result</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]:</span>
</span><span id="ModelView-736"><a href="#ModelView-736"><span class="linenos">736</span></a>            <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ModelView-737"><a href="#ModelView-737"><span class="linenos">737</span></a>        <span class="k">return</span> <span class="n">result</span>
</span><span id="ModelView-738"><a href="#ModelView-738"><span class="linenos">738</span></a>
</span><span id="ModelView-739"><a href="#ModelView-739"><span class="linenos">739</span></a>    <span class="k">def</span> <span class="nf">scene_coordinates_to_node</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
</span><span id="ModelView-740"><a href="#ModelView-740"><span class="linenos">740</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-741"><a href="#ModelView-741"><span class="linenos">741</span></a><span class="sd">        @private</span>
</span><span id="ModelView-742"><a href="#ModelView-742"><span class="linenos">742</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-743"><a href="#ModelView-743"><span class="linenos">743</span></a>        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene_coordinates_to_grid</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
</span><span id="ModelView-744"><a href="#ModelView-744"><span class="linenos">744</span></a>        <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView-745"><a href="#ModelView-745"><span class="linenos">745</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="ModelView-746"><a href="#ModelView-746"><span class="linenos">746</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">is_node</span><span class="p">(</span><span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">node</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span><span id="ModelView-747"><a href="#ModelView-747"><span class="linenos">747</span></a>            <span class="k">return</span> <span class="n">node</span>
</span><span id="ModelView-748"><a href="#ModelView-748"><span class="linenos">748</span></a>        <span class="k">return</span> <span class="kc">None</span>
</span><span id="ModelView-749"><a href="#ModelView-749"><span class="linenos">749</span></a>
</span><span id="ModelView-750"><a href="#ModelView-750"><span class="linenos">750</span></a>    <span class="k">def</span> <span class="nf">get_next_ros_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView-751"><a href="#ModelView-751"><span class="linenos">751</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-752"><a href="#ModelView-752"><span class="linenos">752</span></a><span class="sd">        This function returns the next timeout for ROS2 after which the simulation should move back to the mode PUBLISH.  </span>
</span><span id="ModelView-753"><a href="#ModelView-753"><span class="linenos">753</span></a><span class="sd">        </span>
</span><span id="ModelView-754"><a href="#ModelView-754"><span class="linenos">754</span></a><span class="sd">        This timeout is needed in the case the simulation has not received the needed information from the controller after </span>
</span><span id="ModelView-755"><a href="#ModelView-755"><span class="linenos">755</span></a><span class="sd">        a specific time. In this case the complete cycle should be restarted. </span>
</span><span id="ModelView-756"><a href="#ModelView-756"><span class="linenos">756</span></a><span class="sd">        This done by the simulation publishing the information about the map and the items once again.</span>
</span><span id="ModelView-757"><a href="#ModelView-757"><span class="linenos">757</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-758"><a href="#ModelView-758"><span class="linenos">758</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="mi">60</span><span class="p">)</span>
</span><span id="ModelView-759"><a href="#ModelView-759"><span class="linenos">759</span></a>
</span><span id="ModelView-760"><a href="#ModelView-760"><span class="linenos">760</span></a>
</span><span id="ModelView-761"><a href="#ModelView-761"><span class="linenos">761</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-762"><a href="#ModelView-762"><span class="linenos">762</span></a><span class="sd">    self._grid_size_x = 1  </span>
</span><span id="ModelView-763"><a href="#ModelView-763"><span class="linenos">763</span></a><span class="sd">    self._grid_size_y = 1  </span>
</span><span id="ModelView-764"><a href="#ModelView-764"><span class="linenos">764</span></a><span class="sd">    </span>
</span><span id="ModelView-765"><a href="#ModelView-765"><span class="linenos">765</span></a><span class="sd">    def restart_model(self):</span>
</span><span id="ModelView-766"><a href="#ModelView-766"><span class="linenos">766</span></a><span class="sd">        if self._model is None: </span>
</span><span id="ModelView-767"><a href="#ModelView-767"><span class="linenos">767</span></a><span class="sd">            return</span>
</span><span id="ModelView-768"><a href="#ModelView-768"><span class="linenos">768</span></a><span class="sd">        self._model.restart()</span>
</span><span id="ModelView-769"><a href="#ModelView-769"><span class="linenos">769</span></a><span class="sd">        self.update()</span>
</span><span id="ModelView-770"><a href="#ModelView-770"><span class="linenos">770</span></a><span class="sd">    </span>
</span><span id="ModelView-771"><a href="#ModelView-771"><span class="linenos">771</span></a><span class="sd">    def get_timer_speedup(self):</span>
</span><span id="ModelView-772"><a href="#ModelView-772"><span class="linenos">772</span></a><span class="sd">        return self._timer_scale</span>
</span><span id="ModelView-773"><a href="#ModelView-773"><span class="linenos">773</span></a><span class="sd">    </span>
</span><span id="ModelView-774"><a href="#ModelView-774"><span class="linenos">774</span></a><span class="sd">    def _pickup(self, robot, shelf):</span>
</span><span id="ModelView-775"><a href="#ModelView-775"><span class="linenos">775</span></a><span class="sd">        robot.set_initial_carries(shelf)</span>
</span><span id="ModelView-776"><a href="#ModelView-776"><span class="linenos">776</span></a><span class="sd">        robot.set_carries(shelf)</span>
</span><span id="ModelView-777"><a href="#ModelView-777"><span class="linenos">777</span></a><span class="sd">        self._menu.hide()</span>
</span><span id="ModelView-778"><a href="#ModelView-778"><span class="linenos">778</span></a><span class="sd">        self._model.update_windows()</span>
</span><span id="ModelView-779"><a href="#ModelView-779"><span class="linenos">779</span></a>
</span><span id="ModelView-780"><a href="#ModelView-780"><span class="linenos">780</span></a><span class="sd">    def _add_highway(self, x, y):</span>
</span><span id="ModelView-781"><a href="#ModelView-781"><span class="linenos">781</span></a><span class="sd">        self._model.add_highway(x, y)</span>
</span><span id="ModelView-782"><a href="#ModelView-782"><span class="linenos">782</span></a><span class="sd">        self._menu.hide()</span>
</span><span id="ModelView-783"><a href="#ModelView-783"><span class="linenos">783</span></a><span class="sd">        self._model.update_windows()</span>
</span><span id="ModelView-784"><a href="#ModelView-784"><span class="linenos">784</span></a><span class="sd">    </span>
</span><span id="ModelView-785"><a href="#ModelView-785"><span class="linenos">785</span></a><span class="sd">    def _remove_highway(self, x, y):</span>
</span><span id="ModelView-786"><a href="#ModelView-786"><span class="linenos">786</span></a><span class="sd">        self._model.remove_highway(x, y)</span>
</span><span id="ModelView-787"><a href="#ModelView-787"><span class="linenos">787</span></a><span class="sd">        self._menu.hide()</span>
</span><span id="ModelView-788"><a href="#ModelView-788"><span class="linenos">788</span></a><span class="sd">        self._model.update_windows()</span>
</span><span id="ModelView-789"><a href="#ModelView-789"><span class="linenos">789</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="ModelView-790"><a href="#ModelView-790"><span class="linenos">790</span></a>
</span><span id="ModelView-791"><a href="#ModelView-791"><span class="linenos">791</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;    </span>
</span><span id="ModelView-792"><a href="#ModelView-792"><span class="linenos">792</span></a><span class="sd">    def enable_drag(self, enable):</span>
</span><span id="ModelView-793"><a href="#ModelView-793"><span class="linenos">793</span></a><span class="sd">        for item in self.get_model().iterate_graphic_items():</span>
</span><span id="ModelView-794"><a href="#ModelView-794"><span class="linenos">794</span></a><span class="sd">            item.enable_drag(enable)</span>
</span><span id="ModelView-795"><a href="#ModelView-795"><span class="linenos">795</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="ModelView-796"><a href="#ModelView-796"><span class="linenos">796</span></a>
</span><span id="ModelView-797"><a href="#ModelView-797"><span class="linenos">797</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-798"><a href="#ModelView-798"><span class="linenos">798</span></a><span class="sd">    def contextMenuEvent(self, event):</span>
</span><span id="ModelView-799"><a href="#ModelView-799"><span class="linenos">799</span></a><span class="sd">        if self._model == None:</span>
</span><span id="ModelView-800"><a href="#ModelView-800"><span class="linenos">800</span></a><span class="sd">            return</span>
</span><span id="ModelView-801"><a href="#ModelView-801"><span class="linenos">801</span></a>
</span><span id="ModelView-802"><a href="#ModelView-802"><span class="linenos">802</span></a><span class="sd">        point = self.mapToScene(event.x(), event.y())</span>
</span><span id="ModelView-803"><a href="#ModelView-803"><span class="linenos">803</span></a><span class="sd">        node = self.scene_coordinates_to_grid(point.x(), point.y())</span>
</span><span id="ModelView-804"><a href="#ModelView-804"><span class="linenos">804</span></a><span class="sd">        if node is None:</span>
</span><span id="ModelView-805"><a href="#ModelView-805"><span class="linenos">805</span></a><span class="sd">            return</span>
</span><span id="ModelView-806"><a href="#ModelView-806"><span class="linenos">806</span></a><span class="sd">        x = node[0]</span>
</span><span id="ModelView-807"><a href="#ModelView-807"><span class="linenos">807</span></a><span class="sd">        y = node[1]</span>
</span><span id="ModelView-808"><a href="#ModelView-808"><span class="linenos">808</span></a>
</span><span id="ModelView-809"><a href="#ModelView-809"><span class="linenos">809</span></a><span class="sd">        if not self._model.get_editable():</span>
</span><span id="ModelView-810"><a href="#ModelView-810"><span class="linenos">810</span></a><span class="sd">            return </span>
</span><span id="ModelView-811"><a href="#ModelView-811"><span class="linenos">811</span></a>
</span><span id="ModelView-812"><a href="#ModelView-812"><span class="linenos">812</span></a><span class="sd">        self._menu.clear() </span>
</span><span id="ModelView-813"><a href="#ModelView-813"><span class="linenos">813</span></a>
</span><span id="ModelView-814"><a href="#ModelView-814"><span class="linenos">814</span></a><span class="sd">        if self._model.is_node(x,y):</span>
</span><span id="ModelView-815"><a href="#ModelView-815"><span class="linenos">815</span></a><span class="sd">            action = QAction(&#39;disable node&#39;, self)</span>
</span><span id="ModelView-816"><a href="#ModelView-816"><span class="linenos">816</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + N&#39;)</span>
</span><span id="ModelView-817"><a href="#ModelView-817"><span class="linenos">817</span></a><span class="sd">            action.setStatusTip(&#39;Disables the selected node&#39;)</span>
</span><span id="ModelView-818"><a href="#ModelView-818"><span class="linenos">818</span></a><span class="sd">            action.triggered.connect(lambda: self._remove_node(x, y))</span>
</span><span id="ModelView-819"><a href="#ModelView-819"><span class="linenos">819</span></a><span class="sd">            self._menu.addAction(action)   </span>
</span><span id="ModelView-820"><a href="#ModelView-820"><span class="linenos">820</span></a><span class="sd">        else:</span>
</span><span id="ModelView-821"><a href="#ModelView-821"><span class="linenos">821</span></a><span class="sd">            action = QAction(&#39;enable node&#39;, self)</span>
</span><span id="ModelView-822"><a href="#ModelView-822"><span class="linenos">822</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + N&#39;)</span>
</span><span id="ModelView-823"><a href="#ModelView-823"><span class="linenos">823</span></a><span class="sd">            action.setStatusTip(&#39;Enables the selected node&#39;)</span>
</span><span id="ModelView-824"><a href="#ModelView-824"><span class="linenos">824</span></a><span class="sd">            action.triggered.connect(lambda: self._add_node(x, y))</span>
</span><span id="ModelView-825"><a href="#ModelView-825"><span class="linenos">825</span></a><span class="sd">            self._menu.addAction(action) </span>
</span><span id="ModelView-826"><a href="#ModelView-826"><span class="linenos">826</span></a><span class="sd">        </span>
</span><span id="ModelView-827"><a href="#ModelView-827"><span class="linenos">827</span></a><span class="sd">        if self._model.is_highway(x,y):</span>
</span><span id="ModelView-828"><a href="#ModelView-828"><span class="linenos">828</span></a><span class="sd">            action = QAction(&#39;remove highway&#39;, self)</span>
</span><span id="ModelView-829"><a href="#ModelView-829"><span class="linenos">829</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + H&#39;)</span>
</span><span id="ModelView-830"><a href="#ModelView-830"><span class="linenos">830</span></a><span class="sd">            action.setStatusTip(&#39;Removes a highway from the selected node&#39;)</span>
</span><span id="ModelView-831"><a href="#ModelView-831"><span class="linenos">831</span></a><span class="sd">            action.triggered.connect(lambda: self._remove_highway(x,y))</span>
</span><span id="ModelView-832"><a href="#ModelView-832"><span class="linenos">832</span></a><span class="sd">            self._menu.addAction(action)                 </span>
</span><span id="ModelView-833"><a href="#ModelView-833"><span class="linenos">833</span></a><span class="sd">        elif self._model.is_node(x,y):</span>
</span><span id="ModelView-834"><a href="#ModelView-834"><span class="linenos">834</span></a><span class="sd">            action = QAction(&#39;add highway&#39;, self)</span>
</span><span id="ModelView-835"><a href="#ModelView-835"><span class="linenos">835</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + H&#39;)</span>
</span><span id="ModelView-836"><a href="#ModelView-836"><span class="linenos">836</span></a><span class="sd">            action.setStatusTip(&#39;Adds a highway to the selected node&#39;)</span>
</span><span id="ModelView-837"><a href="#ModelView-837"><span class="linenos">837</span></a><span class="sd">            action.triggered.connect(lambda: self._add_highway(x,y))</span>
</span><span id="ModelView-838"><a href="#ModelView-838"><span class="linenos">838</span></a><span class="sd">            self._menu.addAction(action)                   </span>
</span><span id="ModelView-839"><a href="#ModelView-839"><span class="linenos">839</span></a>
</span><span id="ModelView-840"><a href="#ModelView-840"><span class="linenos">840</span></a><span class="sd">        robot = self._model.filter_items(&#39;robot&#39;, position = (x,y), return_first = True)[0]</span>
</span><span id="ModelView-841"><a href="#ModelView-841"><span class="linenos">841</span></a><span class="sd">        shelf = self._model.filter_items(&#39;shelf&#39;, position = (x,y), return_first = True)[0]</span>
</span><span id="ModelView-842"><a href="#ModelView-842"><span class="linenos">842</span></a>
</span><span id="ModelView-843"><a href="#ModelView-843"><span class="linenos">843</span></a><span class="sd">        if robot is not None:</span>
</span><span id="ModelView-844"><a href="#ModelView-844"><span class="linenos">844</span></a><span class="sd">            if shelf is not None: </span>
</span><span id="ModelView-845"><a href="#ModelView-845"><span class="linenos">845</span></a><span class="sd">                if robot.get_initial_carries() is not None:</span>
</span><span id="ModelView-846"><a href="#ModelView-846"><span class="linenos">846</span></a><span class="sd">                    action = QAction(&#39;putdown&#39;, self)</span>
</span><span id="ModelView-847"><a href="#ModelView-847"><span class="linenos">847</span></a><span class="sd">                    action.setShortcut(&#39;Ctrl + P&#39;)</span>
</span><span id="ModelView-848"><a href="#ModelView-848"><span class="linenos">848</span></a><span class="sd">                    action.setStatusTip(&#39;The robot in the selected node puts down the carried shelf&#39;)</span>
</span><span id="ModelView-849"><a href="#ModelView-849"><span class="linenos">849</span></a><span class="sd">                    action.triggered.connect(lambda: self._pickup(robot, None))</span>
</span><span id="ModelView-850"><a href="#ModelView-850"><span class="linenos">850</span></a><span class="sd">                    self._menu.addAction(action)</span>
</span><span id="ModelView-851"><a href="#ModelView-851"><span class="linenos">851</span></a><span class="sd">                else:</span>
</span><span id="ModelView-852"><a href="#ModelView-852"><span class="linenos">852</span></a><span class="sd">                    action = QAction(&#39;pickup&#39;, self)</span>
</span><span id="ModelView-853"><a href="#ModelView-853"><span class="linenos">853</span></a><span class="sd">                    action.setShortcut(&#39;Ctrl + P&#39;)</span>
</span><span id="ModelView-854"><a href="#ModelView-854"><span class="linenos">854</span></a><span class="sd">                    action.setStatusTip(&#39;The robot in the selected node picks up the shelf in the selcted node&#39;)</span>
</span><span id="ModelView-855"><a href="#ModelView-855"><span class="linenos">855</span></a><span class="sd">                    action.triggered.connect(lambda: self._pickup(robot, shelf))</span>
</span><span id="ModelView-856"><a href="#ModelView-856"><span class="linenos">856</span></a><span class="sd">                    self._menu.addAction(action)</span>
</span><span id="ModelView-857"><a href="#ModelView-857"><span class="linenos">857</span></a>
</span><span id="ModelView-858"><a href="#ModelView-858"><span class="linenos">858</span></a><span class="sd">                    action = QAction(&#39;remove robot&#39;, self)</span>
</span><span id="ModelView-859"><a href="#ModelView-859"><span class="linenos">859</span></a><span class="sd">                    action.setShortcut(&#39;Ctrl + R&#39;)</span>
</span><span id="ModelView-860"><a href="#ModelView-860"><span class="linenos">860</span></a><span class="sd">                    action.setStatusTip(&#39;Removes a robot from the selected node&#39;)</span>
</span><span id="ModelView-861"><a href="#ModelView-861"><span class="linenos">861</span></a><span class="sd">                    action.triggered.connect(lambda: self._remove_item(robot))</span>
</span><span id="ModelView-862"><a href="#ModelView-862"><span class="linenos">862</span></a><span class="sd">                    self._menu.addAction(action)</span>
</span><span id="ModelView-863"><a href="#ModelView-863"><span class="linenos">863</span></a><span class="sd">            else:</span>
</span><span id="ModelView-864"><a href="#ModelView-864"><span class="linenos">864</span></a><span class="sd">                action = QAction(&#39;remove robot&#39;, self)</span>
</span><span id="ModelView-865"><a href="#ModelView-865"><span class="linenos">865</span></a><span class="sd">                action.setShortcut(&#39;Ctrl + R&#39;)</span>
</span><span id="ModelView-866"><a href="#ModelView-866"><span class="linenos">866</span></a><span class="sd">                action.setStatusTip(&#39;Removes a robot from the selected node&#39;)</span>
</span><span id="ModelView-867"><a href="#ModelView-867"><span class="linenos">867</span></a><span class="sd">                action.triggered.connect(lambda: self._remove_item(robot))</span>
</span><span id="ModelView-868"><a href="#ModelView-868"><span class="linenos">868</span></a><span class="sd">                self._menu.addAction(action)</span>
</span><span id="ModelView-869"><a href="#ModelView-869"><span class="linenos">869</span></a>
</span><span id="ModelView-870"><a href="#ModelView-870"><span class="linenos">870</span></a><span class="sd">        elif self._model.is_node(x,y):</span>
</span><span id="ModelView-871"><a href="#ModelView-871"><span class="linenos">871</span></a><span class="sd">            action = QAction(&#39;add robot&#39;, self)</span>
</span><span id="ModelView-872"><a href="#ModelView-872"><span class="linenos">872</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + R&#39;)</span>
</span><span id="ModelView-873"><a href="#ModelView-873"><span class="linenos">873</span></a><span class="sd">            action.setStatusTip(&#39;Adds a robot to the selected node&#39;)</span>
</span><span id="ModelView-874"><a href="#ModelView-874"><span class="linenos">874</span></a><span class="sd">            action.triggered.connect(lambda: self._add_item(&#39;robot&#39;, x, y))</span>
</span><span id="ModelView-875"><a href="#ModelView-875"><span class="linenos">875</span></a><span class="sd">            self._menu.addAction(action)</span>
</span><span id="ModelView-876"><a href="#ModelView-876"><span class="linenos">876</span></a>
</span><span id="ModelView-877"><a href="#ModelView-877"><span class="linenos">877</span></a><span class="sd">        if shelf is not None:</span>
</span><span id="ModelView-878"><a href="#ModelView-878"><span class="linenos">878</span></a><span class="sd">            action = QAction(&#39;remove shelf&#39;, self)</span>
</span><span id="ModelView-879"><a href="#ModelView-879"><span class="linenos">879</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + S&#39;)</span>
</span><span id="ModelView-880"><a href="#ModelView-880"><span class="linenos">880</span></a><span class="sd">            action.setStatusTip(&#39;Removes a shelf from the selected node&#39;)</span>
</span><span id="ModelView-881"><a href="#ModelView-881"><span class="linenos">881</span></a><span class="sd">            action.triggered.connect(lambda: self._remove_item(shelf))</span>
</span><span id="ModelView-882"><a href="#ModelView-882"><span class="linenos">882</span></a><span class="sd">            self._menu.addAction(action)</span>
</span><span id="ModelView-883"><a href="#ModelView-883"><span class="linenos">883</span></a><span class="sd">        elif self._model.is_node(x,y):</span>
</span><span id="ModelView-884"><a href="#ModelView-884"><span class="linenos">884</span></a><span class="sd">            action = QAction(&#39;add shelf&#39;, self)</span>
</span><span id="ModelView-885"><a href="#ModelView-885"><span class="linenos">885</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + S&#39;)</span>
</span><span id="ModelView-886"><a href="#ModelView-886"><span class="linenos">886</span></a><span class="sd">            action.setStatusTip(&#39;Adds a shelf to the selected node&#39;)</span>
</span><span id="ModelView-887"><a href="#ModelView-887"><span class="linenos">887</span></a><span class="sd">            action.triggered.connect(lambda: self._add_item(&#39;shelf&#39;, x, y))</span>
</span><span id="ModelView-888"><a href="#ModelView-888"><span class="linenos">888</span></a><span class="sd">            self._menu.addAction(action)</span>
</span><span id="ModelView-889"><a href="#ModelView-889"><span class="linenos">889</span></a>
</span><span id="ModelView-890"><a href="#ModelView-890"><span class="linenos">890</span></a><span class="sd">        station = self._model.filter_items(&#39;pickingStation&#39;, position = (x,y), return_first = True)[0]</span>
</span><span id="ModelView-891"><a href="#ModelView-891"><span class="linenos">891</span></a><span class="sd">        if station is not None:</span>
</span><span id="ModelView-892"><a href="#ModelView-892"><span class="linenos">892</span></a><span class="sd">            action = QAction(&#39;remove picking station&#39;, self)</span>
</span><span id="ModelView-893"><a href="#ModelView-893"><span class="linenos">893</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + I&#39;)</span>
</span><span id="ModelView-894"><a href="#ModelView-894"><span class="linenos">894</span></a><span class="sd">            action.setStatusTip(&#39;Removes a picking station from the selected node&#39;)</span>
</span><span id="ModelView-895"><a href="#ModelView-895"><span class="linenos">895</span></a><span class="sd">            action.triggered.connect(lambda: self._remove_item(station))</span>
</span><span id="ModelView-896"><a href="#ModelView-896"><span class="linenos">896</span></a><span class="sd">            self._menu.addAction(action)</span>
</span><span id="ModelView-897"><a href="#ModelView-897"><span class="linenos">897</span></a><span class="sd">        elif self._model.is_node(x,y):</span>
</span><span id="ModelView-898"><a href="#ModelView-898"><span class="linenos">898</span></a><span class="sd">            action = QAction(&#39;add picking station&#39;, self)</span>
</span><span id="ModelView-899"><a href="#ModelView-899"><span class="linenos">899</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + I&#39;)</span>
</span><span id="ModelView-900"><a href="#ModelView-900"><span class="linenos">900</span></a><span class="sd">            action.setStatusTip(&#39;Adds a picking Station to the selected node&#39;)</span>
</span><span id="ModelView-901"><a href="#ModelView-901"><span class="linenos">901</span></a><span class="sd">            action.triggered.connect(lambda: self._add_item(&#39;pickingStation&#39;, x, y))</span>
</span><span id="ModelView-902"><a href="#ModelView-902"><span class="linenos">902</span></a><span class="sd">            self._menu.addAction(action)           </span>
</span><span id="ModelView-903"><a href="#ModelView-903"><span class="linenos">903</span></a>
</span><span id="ModelView-904"><a href="#ModelView-904"><span class="linenos">904</span></a><span class="sd">        station2 = self._model.filter_items(&#39;chargingStation&#39;, position = (x,y), return_first = True)[0]</span>
</span><span id="ModelView-905"><a href="#ModelView-905"><span class="linenos">905</span></a><span class="sd">        if station is not None:</span>
</span><span id="ModelView-906"><a href="#ModelView-906"><span class="linenos">906</span></a><span class="sd">            action = QAction(&#39;remove charging station&#39;, self)</span>
</span><span id="ModelView-907"><a href="#ModelView-907"><span class="linenos">907</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + B&#39;)</span>
</span><span id="ModelView-908"><a href="#ModelView-908"><span class="linenos">908</span></a><span class="sd">            action.setStatusTip(&#39;Removes a charging station from the selected node&#39;)</span>
</span><span id="ModelView-909"><a href="#ModelView-909"><span class="linenos">909</span></a><span class="sd">            action.triggered.connect(lambda: self._remove_item(station))</span>
</span><span id="ModelView-910"><a href="#ModelView-910"><span class="linenos">910</span></a><span class="sd">            self._menu.addAction(action)</span>
</span><span id="ModelView-911"><a href="#ModelView-911"><span class="linenos">911</span></a><span class="sd">        elif self._model.is_node(x,y):</span>
</span><span id="ModelView-912"><a href="#ModelView-912"><span class="linenos">912</span></a><span class="sd">            action = QAction(&#39;add charging station&#39;, self)</span>
</span><span id="ModelView-913"><a href="#ModelView-913"><span class="linenos">913</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + B&#39;)</span>
</span><span id="ModelView-914"><a href="#ModelView-914"><span class="linenos">914</span></a><span class="sd">            action.setStatusTip(&#39;Adds a charging Station to the selected node&#39;)</span>
</span><span id="ModelView-915"><a href="#ModelView-915"><span class="linenos">915</span></a><span class="sd">            action.triggered.connect(lambda: self._add_item(&#39;chargingStation&#39;, x, y))</span>
</span><span id="ModelView-916"><a href="#ModelView-916"><span class="linenos">916</span></a><span class="sd">            self._menu.addAction(action)</span>
</span><span id="ModelView-917"><a href="#ModelView-917"><span class="linenos">917</span></a>
</span><span id="ModelView-918"><a href="#ModelView-918"><span class="linenos">918</span></a><span class="sd">        self._menu.popup(QPoint(event.x(),event.y()))</span>
</span><span id="ModelView-919"><a href="#ModelView-919"><span class="linenos">919</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="ModelView-920"><a href="#ModelView-920"><span class="linenos">920</span></a>
</span><span id="ModelView-921"><a href="#ModelView-921"><span class="linenos">921</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-922"><a href="#ModelView-922"><span class="linenos">922</span></a><span class="sd">    def speed_up_timer(self, speed_up):</span>
</span><span id="ModelView-923"><a href="#ModelView-923"><span class="linenos">923</span></a><span class="sd">        self._timer_scale *= 1 - speed_up</span>
</span><span id="ModelView-924"><a href="#ModelView-924"><span class="linenos">924</span></a><span class="sd">        if self._timer_scale &lt;= 0.1:</span>
</span><span id="ModelView-925"><a href="#ModelView-925"><span class="linenos">925</span></a><span class="sd">            self._timer_scale = 0.1</span>
</span><span id="ModelView-926"><a href="#ModelView-926"><span class="linenos">926</span></a><span class="sd">        self.adjust_timer()</span>
</span><span id="ModelView-927"><a href="#ModelView-927"><span class="linenos">927</span></a><span class="sd">    </span>
</span><span id="ModelView-928"><a href="#ModelView-928"><span class="linenos">928</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span><span id="ModelView-929"><a href="#ModelView-929"><span class="linenos">929</span></a>
</span><span id="ModelView-930"><a href="#ModelView-930"><span class="linenos">930</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-931"><a href="#ModelView-931"><span class="linenos">931</span></a><span class="sd">        #STATE 0: PUBLISH MESSAGES</span>
</span><span id="ModelView-932"><a href="#ModelView-932"><span class="linenos">932</span></a><span class="sd">        if self._mode == PUB:</span>
</span><span id="ModelView-933"><a href="#ModelView-933"><span class="linenos">933</span></a>
</span><span id="ModelView-934"><a href="#ModelView-934"><span class="linenos">934</span></a><span class="sd">        </span>
</span><span id="ModelView-935"><a href="#ModelView-935"><span class="linenos">935</span></a><span class="sd">        #STATE 1: UPDATE, WAIT </span>
</span><span id="ModelView-936"><a href="#ModelView-936"><span class="linenos">936</span></a><span class="sd">        if self._mode == WAIT:</span>
</span><span id="ModelView-937"><a href="#ModelView-937"><span class="linenos">937</span></a><span class="sd">            simulation_ready, self._just_started, reset_time = self._model.mapf_spin_once(self._just_started, </span>
</span><span id="ModelView-938"><a href="#ModelView-938"><span class="linenos">938</span></a><span class="sd">                                                                                          self._timeout_end)        </span>
</span><span id="ModelView-939"><a href="#ModelView-939"><span class="linenos">939</span></a><span class="sd">            #reset timeout(only if not all needed ros messages received(e.g. RobotAction.msg) after a certain time</span>
</span><span id="ModelView-940"><a href="#ModelView-940"><span class="linenos">940</span></a><span class="sd">            if reset_time:</span>
</span><span id="ModelView-941"><a href="#ModelView-941"><span class="linenos">941</span></a><span class="sd">                self._timeout_end = self.get_next_ros_timeout()</span>
</span><span id="ModelView-942"><a href="#ModelView-942"><span class="linenos">942</span></a>
</span><span id="ModelView-943"><a href="#ModelView-943"><span class="linenos">943</span></a><span class="sd">            #if simulation ready then change to the EXECUTION mode</span>
</span><span id="ModelView-944"><a href="#ModelView-944"><span class="linenos">944</span></a><span class="sd">            if simulation_ready:</span>
</span><span id="ModelView-945"><a href="#ModelView-945"><span class="linenos">945</span></a><span class="sd">                self._mode == EXEC</span>
</span><span id="ModelView-946"><a href="#ModelView-946"><span class="linenos">946</span></a><span class="sd">                </span>
</span><span id="ModelView-947"><a href="#ModelView-947"><span class="linenos">947</span></a><span class="sd">        #STATE 2: EXECUTE ONE STEP</span>
</span><span id="ModelView-948"><a href="#ModelView-948"><span class="linenos">948</span></a><span class="sd">        elif self._mode == EXEC:</span>
</span><span id="ModelView-949"><a href="#ModelView-949"><span class="linenos">949</span></a><span class="sd">            if self._timer_count &gt;= 10 or forced:</span>
</span><span id="ModelView-950"><a href="#ModelView-950"><span class="linenos">950</span></a><span class="sd">                self._model.update()</span>
</span><span id="ModelView-951"><a href="#ModelView-951"><span class="linenos">951</span></a><span class="sd">                self._timer_count = 0</span>
</span><span id="ModelView-952"><a href="#ModelView-952"><span class="linenos">952</span></a><span class="sd">                self._timeout_end = self.get_next_ros_timeout()</span>
</span><span id="ModelView-953"><a href="#ModelView-953"><span class="linenos">953</span></a><span class="sd">                self._mode == PUB</span>
</span><span id="ModelView-954"><a href="#ModelView-954"><span class="linenos">954</span></a><span class="sd">            else: </span>
</span><span id="ModelView-955"><a href="#ModelView-955"><span class="linenos">955</span></a><span class="sd">                self._timer_count += 1</span>
</span><span id="ModelView-956"><a href="#ModelView-956"><span class="linenos">956</span></a>
</span><span id="ModelView-957"><a href="#ModelView-957"><span class="linenos">957</span></a><span class="sd">            self.update()</span>
</span><span id="ModelView-958"><a href="#ModelView-958"><span class="linenos">958</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView-959"><a href="#ModelView-959"><span class="linenos">959</span></a>
</span><span id="ModelView-960"><a href="#ModelView-960"><span class="linenos">960</span></a><span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView-961"><a href="#ModelView-961"><span class="linenos">961</span></a><span class="sd">    #at first run init step</span>
</span><span id="ModelView-962"><a href="#ModelView-962"><span class="linenos">962</span></a><span class="sd">    if self._just_started == True:</span>
</span><span id="ModelView-963"><a href="#ModelView-963"><span class="linenos">963</span></a><span class="sd">        print(&quot;RESET ALL AND PUBLISH INFO&quot;)</span>
</span><span id="ModelView-964"><a href="#ModelView-964"><span class="linenos">964</span></a><span class="sd">        self._model.mapf_init_next_step()</span>
</span><span id="ModelView-965"><a href="#ModelView-965"><span class="linenos">965</span></a><span class="sd">        self._just_started = False</span>
</span><span id="ModelView-966"><a href="#ModelView-966"><span class="linenos">966</span></a><span class="sd">        </span>
</span><span id="ModelView-967"><a href="#ModelView-967"><span class="linenos">967</span></a><span class="sd">    #process all ros messages from callback functions</span>
</span><span id="ModelView-968"><a href="#ModelView-968"><span class="linenos">968</span></a><span class="sd">    self._model.mapf_ros_spin_once()</span>
</span><span id="ModelView-969"><a href="#ModelView-969"><span class="linenos">969</span></a>
</span><span id="ModelView-970"><a href="#ModelView-970"><span class="linenos">970</span></a><span class="sd">    #init step again if no ros messages received from controller (e.g. RobotAction.msg) after a certain time</span>
</span><span id="ModelView-971"><a href="#ModelView-971"><span class="linenos">971</span></a><span class="sd">    #if not self._model.mapf_all_ros_msg_received() and (time.time() &gt; self._timeout_end): </span>
</span><span id="ModelView-972"><a href="#ModelView-972"><span class="linenos">972</span></a><span class="sd">    if not simulation_ready and (time.time() &gt; self._timeout_end): </span>
</span><span id="ModelView-973"><a href="#ModelView-973"><span class="linenos">973</span></a><span class="sd">        print(&quot;RESET ALL AND PUBLISH INFO after TIMEOUT and NO ACTIONS RECEIVED&quot;)</span>
</span><span id="ModelView-974"><a href="#ModelView-974"><span class="linenos">974</span></a><span class="sd">        self._model.mapf_init_next_step()</span>
</span><span id="ModelView-975"><a href="#ModelView-975"><span class="linenos">975</span></a><span class="sd">        self._timeout_end = self.get_next_ros_timeout()</span>
</span><span id="ModelView-976"><a href="#ModelView-976"><span class="linenos">976</span></a><span class="sd">        return</span>
</span><span id="ModelView-977"><a href="#ModelView-977"><span class="linenos">977</span></a>
</span><span id="ModelView-978"><a href="#ModelView-978"><span class="linenos">978</span></a><span class="sd">    #return if not all messages received for the next step</span>
</span><span id="ModelView-979"><a href="#ModelView-979"><span class="linenos">979</span></a><span class="sd">    #if not self._model.mapf_all_ros_msg_received():</span>
</span><span id="ModelView-980"><a href="#ModelView-980"><span class="linenos">980</span></a><span class="sd">    if not simulation_ready:</span>
</span><span id="ModelView-981"><a href="#ModelView-981"><span class="linenos">981</span></a><span class="sd">        self._timer_count = 0</span>
</span><span id="ModelView-982"><a href="#ModelView-982"><span class="linenos">982</span></a><span class="sd">        return </span>
</span><span id="ModelView-983"><a href="#ModelView-983"><span class="linenos">983</span></a><span class="sd">    </span>
</span><span id="ModelView-984"><a href="#ModelView-984"><span class="linenos">984</span></a><span class="sd">    &#39;&#39;&#39;</span>
</span></pre></div>


            <div class="docstring"><p>This class is responsible for the visualization the simulation.</p>

<p>To update the simulation a timer is created. 
After the time is up the window is updated with the new positions of the items(robots) in the map. 
Items are moved to their new position step by step. <br />
For a complete execution of the action for a robot per default 10 timers are created. So every
time the timer is up the robots are moved incrementally (around 10%). <br />
After the running out of the 10 timers the robots have reached their new final position. Then the model 
is updated with the new positions of the robots.</p>
</div>


                            <div id="ModelView.set_model" class="classattr">
                                        <input id="ModelView.set_model-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">set_model</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">model</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.set_model-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.set_model"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.set_model-88"><a href="#ModelView.set_model-88"><span class="linenos">88</span></a>    <span class="k">def</span> <span class="nf">set_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="p">):</span>
</span><span id="ModelView.set_model-89"><a href="#ModelView.set_model-89"><span class="linenos">89</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView.set_model-90"><a href="#ModelView.set_model-90"><span class="linenos">90</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">remove_window</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ModelView.set_model-91"><a href="#ModelView.set_model-91"><span class="linenos">91</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">=</span> <span class="n">model</span>
</span><span id="ModelView.set_model-92"><a href="#ModelView.set_model-92"><span class="linenos">92</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView.set_model-93"><a href="#ModelView.set_model-93"><span class="linenos">93</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">add_window</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ModelView.set_model-94"><a href="#ModelView.set_model-94"><span class="linenos">94</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">resize_to_fit</span><span class="p">()</span>
</span><span id="ModelView.set_model-95"><a href="#ModelView.set_model-95"><span class="linenos">95</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="ModelView.get_model" class="classattr">
                                        <input id="ModelView.get_model-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_model</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.get_model-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.get_model"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.get_model-97"><a href="#ModelView.get_model-97"><span class="linenos">97</span></a>    <span class="k">def</span> <span class="nf">get_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView.get_model-98"><a href="#ModelView.get_model-98"><span class="linenos">98</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span>
</span></pre></div>


    

                            </div>
                            <div id="ModelView.wheelEvent" class="classattr">
                                        <input id="ModelView.wheelEvent-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">wheelEvent</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">event</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.wheelEvent-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.wheelEvent"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.wheelEvent-102"><a href="#ModelView.wheelEvent-102"><span class="linenos">102</span></a>    <span class="k">def</span> <span class="nf">wheelEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="ModelView.wheelEvent-103"><a href="#ModelView.wheelEvent-103"><span class="linenos">103</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_event</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">angleDelta</span><span class="p">()</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>wheelEvent(self, QWheelEvent)</p>
</div>


                            </div>
                            <div id="ModelView.zoom_event" class="classattr">
                                        <input id="ModelView.zoom_event-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">zoom_event</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">angle</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.zoom_event-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.zoom_event"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.zoom_event-105"><a href="#ModelView.zoom_event-105"><span class="linenos">105</span></a>    <span class="k">def</span> <span class="nf">zoom_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">):</span>
</span><span id="ModelView.zoom_event-106"><a href="#ModelView.zoom_event-106"><span class="linenos">106</span></a>        <span class="n">zoom</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">+</span> <span class="n">angle</span><span class="o">/</span><span class="mf">1440.0</span><span class="p">)</span>
</span><span id="ModelView.zoom_event-107"><a href="#ModelView.zoom_event-107"><span class="linenos">107</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span><span class="p">(</span><span class="n">zoom</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="ModelView.resizeEvent" class="classattr">
                                        <input id="ModelView.resizeEvent-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">resizeEvent</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">event</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.resizeEvent-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.resizeEvent"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.resizeEvent-109"><a href="#ModelView.resizeEvent-109"><span class="linenos">109</span></a>    <span class="k">def</span> <span class="nf">resizeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="ModelView.resizeEvent-110"><a href="#ModelView.resizeEvent-110"><span class="linenos">110</span></a>        <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">resizeEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span><span id="ModelView.resizeEvent-111"><a href="#ModelView.resizeEvent-111"><span class="linenos">111</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">oldSize</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">1</span> 
</span><span id="ModelView.resizeEvent-112"><a href="#ModelView.resizeEvent-112"><span class="linenos">112</span></a>            <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">oldSize</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">1</span> 
</span><span id="ModelView.resizeEvent-113"><a href="#ModelView.resizeEvent-113"><span class="linenos">113</span></a>            <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">1</span> 
</span><span id="ModelView.resizeEvent-114"><a href="#ModelView.resizeEvent-114"><span class="linenos">114</span></a>            <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="ModelView.resizeEvent-115"><a href="#ModelView.resizeEvent-115"><span class="linenos">115</span></a>            <span class="k">return</span>
</span><span id="ModelView.resizeEvent-116"><a href="#ModelView.resizeEvent-116"><span class="linenos">116</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_screen_width</span>  <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()</span>
</span><span id="ModelView.resizeEvent-117"><a href="#ModelView.resizeEvent-117"><span class="linenos">117</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_screen_height</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
</span><span id="ModelView.resizeEvent-118"><a href="#ModelView.resizeEvent-118"><span class="linenos">118</span></a>        <span class="n">scaling</span> <span class="o">=</span> <span class="p">((</span><span class="nb">float</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">_screen_width</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">oldSize</span><span class="p">()</span><span class="o">.</span><span class="n">width</span><span class="p">()),</span> 
</span><span id="ModelView.resizeEvent-119"><a href="#ModelView.resizeEvent-119"><span class="linenos">119</span></a>                    <span class="p">(</span><span class="nb">float</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">_screen_height</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">oldSize</span><span class="p">()</span><span class="o">.</span><span class="n">height</span><span class="p">()))</span>
</span><span id="ModelView.resizeEvent-120"><a href="#ModelView.resizeEvent-120"><span class="linenos">120</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span><span class="p">(</span><span class="n">scaling</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">scaling</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p>resizeEvent(self, QResizeEvent)</p>
</div>


                            </div>
                            <div id="ModelView.resize_to_fit" class="classattr">
                                        <input id="ModelView.resize_to_fit-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">resize_to_fit</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.resize_to_fit-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.resize_to_fit"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.resize_to_fit-122"><a href="#ModelView.resize_to_fit-122"><span class="linenos">122</span></a>    <span class="k">def</span> <span class="nf">resize_to_fit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView.resize_to_fit-123"><a href="#ModelView.resize_to_fit-123"><span class="linenos">123</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">1</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span> 
</span><span id="ModelView.resize_to_fit-124"><a href="#ModelView.resize_to_fit-124"><span class="linenos">124</span></a>            <span class="k">return</span>
</span><span id="ModelView.resize_to_fit-125"><a href="#ModelView.resize_to_fit-125"><span class="linenos">125</span></a>        <span class="n">zoom</span> <span class="o">=</span> <span class="p">((</span><span class="nb">float</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">_screen_width</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_line_hlength</span><span class="o">*</span><span class="mf">1.04</span><span class="p">),</span> 
</span><span id="ModelView.resize_to_fit-126"><a href="#ModelView.resize_to_fit-126"><span class="linenos">126</span></a>                <span class="p">(</span><span class="nb">float</span><span class="p">)(</span><span class="bp">self</span><span class="o">.</span><span class="n">_screen_height</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_line_vlength</span><span class="o">*</span><span class="mf">1.04</span><span class="p">))</span>
</span><span id="ModelView.resize_to_fit-127"><a href="#ModelView.resize_to_fit-127"><span class="linenos">127</span></a>
</span><span id="ModelView.resize_to_fit-128"><a href="#ModelView.resize_to_fit-128"><span class="linenos">128</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scale</span><span class="p">(</span><span class="n">zoom</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">zoom</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">_zoom</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</span><span id="ModelView.resize_to_fit-129"><a href="#ModelView.resize_to_fit-129"><span class="linenos">129</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">setSceneRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_line_hlength</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_line_vlength</span><span class="o">*</span><span class="mi">1</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="ModelView.mousePressEvent" class="classattr">
                                        <input id="ModelView.mousePressEvent-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">mousePressEvent</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">event</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.mousePressEvent-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.mousePressEvent"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.mousePressEvent-131"><a href="#ModelView.mousePressEvent-131"><span class="linenos">131</span></a>    <span class="k">def</span> <span class="nf">mousePressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="ModelView.mousePressEvent-132"><a href="#ModelView.mousePressEvent-132"><span class="linenos">132</span></a>        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">LeftButton</span> <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">button</span><span class="p">()</span> <span class="o">==</span> <span class="n">Qt</span><span class="o">.</span><span class="n">MiddleButton</span><span class="p">:</span>
</span><span id="ModelView.mousePressEvent-133"><a href="#ModelView.mousePressEvent-133"><span class="linenos">133</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
</span><span id="ModelView.mousePressEvent-134"><a href="#ModelView.mousePressEvent-134"><span class="linenos">134</span></a>        <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">mousePressEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>mousePressEvent(self, QMouseEvent)</p>
</div>


                            </div>
                            <div id="ModelView.event" class="classattr">
                                        <input id="ModelView.event-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">event</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">event</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.event-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.event"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.event-136"><a href="#ModelView.event-136"><span class="linenos">136</span></a>    <span class="k">def</span> <span class="nf">event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="ModelView.event-137"><a href="#ModelView.event-137"><span class="linenos">137</span></a>        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="p">()</span> <span class="o">==</span> <span class="n">QEvent</span><span class="o">.</span><span class="n">ToolTip</span><span class="p">:</span>
</span><span id="ModelView.event-138"><a href="#ModelView.event-138"><span class="linenos">138</span></a>            <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapToScene</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">pos</span><span class="p">())</span>
</span><span id="ModelView.event-139"><a href="#ModelView.event-139"><span class="linenos">139</span></a>            <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene_coordinates_to_node</span><span class="p">(</span><span class="n">pos</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">pos</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
</span><span id="ModelView.event-140"><a href="#ModelView.event-140"><span class="linenos">140</span></a>            <span class="k">if</span> <span class="n">pos</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView.event-141"><a href="#ModelView.event-141"><span class="linenos">141</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span><span id="ModelView.event-142"><a href="#ModelView.event-142"><span class="linenos">142</span></a>                <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span><span id="ModelView.event-143"><a href="#ModelView.event-143"><span class="linenos">143</span></a>            <span class="n">ss</span> <span class="o">=</span> <span class="s1">&#39;node(&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_node_id</span><span class="p">(</span><span class="n">pos</span><span class="p">))</span> <span class="o">+</span><span class="s1">&#39;) at &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
</span><span id="ModelView.event-144"><a href="#ModelView.event-144"><span class="linenos">144</span></a>            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">filter_items</span><span class="p">(</span><span class="n">position</span> <span class="o">=</span> <span class="n">pos</span><span class="p">):</span>
</span><span id="ModelView.event-145"><a href="#ModelView.event-145"><span class="linenos">145</span></a>                <span class="n">ss</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">item</span><span class="o">.</span><span class="n">get_name</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;(&#39;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get_id</span><span class="p">())</span> <span class="o">+</span><span class="s1">&#39;)&#39;</span>
</span><span id="ModelView.event-146"><a href="#ModelView.event-146"><span class="linenos">146</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">setToolTip</span><span class="p">(</span><span class="n">ss</span><span class="p">)</span>
</span><span id="ModelView.event-147"><a href="#ModelView.event-147"><span class="linenos">147</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">event</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>event(self, QEvent) -> bool</p>
</div>


                            </div>
                            <div id="ModelView.contextMenuEvent" class="classattr">
                                        <input id="ModelView.contextMenuEvent-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">contextMenuEvent</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">event</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.contextMenuEvent-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.contextMenuEvent"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.contextMenuEvent-151"><a href="#ModelView.contextMenuEvent-151"><span class="linenos">151</span></a>    <span class="k">def</span> <span class="nf">contextMenuEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
</span><span id="ModelView.contextMenuEvent-152"><a href="#ModelView.contextMenuEvent-152"><span class="linenos">152</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView.contextMenuEvent-153"><a href="#ModelView.contextMenuEvent-153"><span class="linenos">153</span></a><span class="sd">        This function creates the contextmenu by right click in the simulation window.</span>
</span><span id="ModelView.contextMenuEvent-154"><a href="#ModelView.contextMenuEvent-154"><span class="linenos">154</span></a><span class="sd">        For the moment only two options defined: &quot;enable node&quot; and &quot;disable node&quot;</span>
</span><span id="ModelView.contextMenuEvent-155"><a href="#ModelView.contextMenuEvent-155"><span class="linenos">155</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView.contextMenuEvent-156"><a href="#ModelView.contextMenuEvent-156"><span class="linenos">156</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView.contextMenuEvent-157"><a href="#ModelView.contextMenuEvent-157"><span class="linenos">157</span></a>            <span class="k">return</span>
</span><span id="ModelView.contextMenuEvent-158"><a href="#ModelView.contextMenuEvent-158"><span class="linenos">158</span></a>
</span><span id="ModelView.contextMenuEvent-159"><a href="#ModelView.contextMenuEvent-159"><span class="linenos">159</span></a>        <span class="n">point</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">mapToScene</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
</span><span id="ModelView.contextMenuEvent-160"><a href="#ModelView.contextMenuEvent-160"><span class="linenos">160</span></a>        <span class="n">node</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">scene_coordinates_to_grid</span><span class="p">(</span><span class="n">point</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span> <span class="n">point</span><span class="o">.</span><span class="n">y</span><span class="p">())</span>
</span><span id="ModelView.contextMenuEvent-161"><a href="#ModelView.contextMenuEvent-161"><span class="linenos">161</span></a>        <span class="k">if</span> <span class="n">node</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView.contextMenuEvent-162"><a href="#ModelView.contextMenuEvent-162"><span class="linenos">162</span></a>            <span class="k">return</span>
</span><span id="ModelView.contextMenuEvent-163"><a href="#ModelView.contextMenuEvent-163"><span class="linenos">163</span></a>        <span class="n">x</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ModelView.contextMenuEvent-164"><a href="#ModelView.contextMenuEvent-164"><span class="linenos">164</span></a>        <span class="n">y</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView.contextMenuEvent-165"><a href="#ModelView.contextMenuEvent-165"><span class="linenos">165</span></a>
</span><span id="ModelView.contextMenuEvent-166"><a href="#ModelView.contextMenuEvent-166"><span class="linenos">166</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_editable</span><span class="p">():</span>
</span><span id="ModelView.contextMenuEvent-167"><a href="#ModelView.contextMenuEvent-167"><span class="linenos">167</span></a>            <span class="k">return</span> 
</span><span id="ModelView.contextMenuEvent-168"><a href="#ModelView.contextMenuEvent-168"><span class="linenos">168</span></a>
</span><span id="ModelView.contextMenuEvent-169"><a href="#ModelView.contextMenuEvent-169"><span class="linenos">169</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span> 
</span><span id="ModelView.contextMenuEvent-170"><a href="#ModelView.contextMenuEvent-170"><span class="linenos">170</span></a>
</span><span id="ModelView.contextMenuEvent-171"><a href="#ModelView.contextMenuEvent-171"><span class="linenos">171</span></a>
</span><span id="ModelView.contextMenuEvent-172"><a href="#ModelView.contextMenuEvent-172"><span class="linenos">172</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">is_node</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
</span><span id="ModelView.contextMenuEvent-173"><a href="#ModelView.contextMenuEvent-173"><span class="linenos">173</span></a>            <span class="n">action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="s1">&#39;disable node&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="ModelView.contextMenuEvent-174"><a href="#ModelView.contextMenuEvent-174"><span class="linenos">174</span></a>            <span class="n">action</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="s1">&#39;Ctrl + N&#39;</span><span class="p">)</span>
</span><span id="ModelView.contextMenuEvent-175"><a href="#ModelView.contextMenuEvent-175"><span class="linenos">175</span></a>            <span class="n">action</span><span class="o">.</span><span class="n">setStatusTip</span><span class="p">(</span><span class="s1">&#39;Disables the selected node&#39;</span><span class="p">)</span>
</span><span id="ModelView.contextMenuEvent-176"><a href="#ModelView.contextMenuEvent-176"><span class="linenos">176</span></a>            <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_remove_node</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</span><span id="ModelView.contextMenuEvent-177"><a href="#ModelView.contextMenuEvent-177"><span class="linenos">177</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>   
</span><span id="ModelView.contextMenuEvent-178"><a href="#ModelView.contextMenuEvent-178"><span class="linenos">178</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ModelView.contextMenuEvent-179"><a href="#ModelView.contextMenuEvent-179"><span class="linenos">179</span></a>            <span class="n">action</span> <span class="o">=</span> <span class="n">QAction</span><span class="p">(</span><span class="s1">&#39;enable node&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
</span><span id="ModelView.contextMenuEvent-180"><a href="#ModelView.contextMenuEvent-180"><span class="linenos">180</span></a>            <span class="n">action</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="s1">&#39;Ctrl + N&#39;</span><span class="p">)</span>
</span><span id="ModelView.contextMenuEvent-181"><a href="#ModelView.contextMenuEvent-181"><span class="linenos">181</span></a>            <span class="n">action</span><span class="o">.</span><span class="n">setStatusTip</span><span class="p">(</span><span class="s1">&#39;Enables the selected node&#39;</span><span class="p">)</span>
</span><span id="ModelView.contextMenuEvent-182"><a href="#ModelView.contextMenuEvent-182"><span class="linenos">182</span></a>            <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_node</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
</span><span id="ModelView.contextMenuEvent-183"><a href="#ModelView.contextMenuEvent-183"><span class="linenos">183</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span> 
</span><span id="ModelView.contextMenuEvent-184"><a href="#ModelView.contextMenuEvent-184"><span class="linenos">184</span></a><span class="w">        </span>
</span><span id="ModelView.contextMenuEvent-185"><a href="#ModelView.contextMenuEvent-185"><span class="linenos">185</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView.contextMenuEvent-186"><a href="#ModelView.contextMenuEvent-186"><span class="linenos">186</span></a><span class="sd">        robot = self._model.filter_items(&#39;robot_ros&#39;, position = (x,y), return_first = True)[0]</span>
</span><span id="ModelView.contextMenuEvent-187"><a href="#ModelView.contextMenuEvent-187"><span class="linenos">187</span></a><span class="sd">        if robot is not None:</span>
</span><span id="ModelView.contextMenuEvent-188"><a href="#ModelView.contextMenuEvent-188"><span class="linenos">188</span></a><span class="sd">            action = QAction(&#39;remove robot&#39;, self)</span>
</span><span id="ModelView.contextMenuEvent-189"><a href="#ModelView.contextMenuEvent-189"><span class="linenos">189</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + R&#39;)</span>
</span><span id="ModelView.contextMenuEvent-190"><a href="#ModelView.contextMenuEvent-190"><span class="linenos">190</span></a><span class="sd">            action.setStatusTip(&#39;Removes a robot from the selected node&#39;)</span>
</span><span id="ModelView.contextMenuEvent-191"><a href="#ModelView.contextMenuEvent-191"><span class="linenos">191</span></a><span class="sd">            action.triggered.connect(lambda: self._remove_item(robot))</span>
</span><span id="ModelView.contextMenuEvent-192"><a href="#ModelView.contextMenuEvent-192"><span class="linenos">192</span></a><span class="sd">            self._menu.addAction(action)</span>
</span><span id="ModelView.contextMenuEvent-193"><a href="#ModelView.contextMenuEvent-193"><span class="linenos">193</span></a><span class="sd">        elif self._model.is_node(x,y):</span>
</span><span id="ModelView.contextMenuEvent-194"><a href="#ModelView.contextMenuEvent-194"><span class="linenos">194</span></a><span class="sd">            action = QAction(&#39;add robot&#39;, self)</span>
</span><span id="ModelView.contextMenuEvent-195"><a href="#ModelView.contextMenuEvent-195"><span class="linenos">195</span></a><span class="sd">            action.setShortcut(&#39;Ctrl + R&#39;)</span>
</span><span id="ModelView.contextMenuEvent-196"><a href="#ModelView.contextMenuEvent-196"><span class="linenos">196</span></a><span class="sd">            action.setStatusTip(&#39;Adds a robot to the selected node&#39;)</span>
</span><span id="ModelView.contextMenuEvent-197"><a href="#ModelView.contextMenuEvent-197"><span class="linenos">197</span></a><span class="sd">            action.triggered.connect(lambda: self._add_item(&#39;robot_ros&#39;, x, y))</span>
</span><span id="ModelView.contextMenuEvent-198"><a href="#ModelView.contextMenuEvent-198"><span class="linenos">198</span></a><span class="sd">            self._menu.addAction(action)</span>
</span><span id="ModelView.contextMenuEvent-199"><a href="#ModelView.contextMenuEvent-199"><span class="linenos">199</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView.contextMenuEvent-200"><a href="#ModelView.contextMenuEvent-200"><span class="linenos">200</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_menu</span><span class="o">.</span><span class="n">popup</span><span class="p">(</span><span class="n">QPoint</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">(),</span><span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">()))</span>
</span></pre></div>


            <div class="docstring"><p>This function creates the contextmenu by right click in the simulation window.
For the moment only two options defined: "enable node" and "disable node"</p>
</div>


                            </div>
                            <div id="ModelView.start_timer" class="classattr">
                                        <input id="ModelView.start_timer-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">start_timer</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.start_timer-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.start_timer"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.start_timer-242"><a href="#ModelView.start_timer-242"><span class="linenos">242</span></a>    <span class="k">def</span> <span class="nf">start_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView.start_timer-243"><a href="#ModelView.start_timer-243"><span class="linenos">243</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView.start_timer-244"><a href="#ModelView.start_timer-244"><span class="linenos">244</span></a><span class="sd">        This function stops the previous timer and starts a new one. </span>
</span><span id="ModelView.start_timer-245"><a href="#ModelView.start_timer-245"><span class="linenos">245</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView.start_timer-246"><a href="#ModelView.start_timer-246"><span class="linenos">246</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop_timer</span><span class="p">()</span>
</span><span id="ModelView.start_timer-247"><a href="#ModelView.start_timer-247"><span class="linenos">247</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="o">=</span> <span class="n">QTimer</span><span class="p">()</span>
</span><span id="ModelView.start_timer-248"><a href="#ModelView.start_timer-248"><span class="linenos">248</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span><span class="o">.</span><span class="n">timeout</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">update_model</span><span class="p">(</span><span class="kc">False</span><span class="p">))</span>
</span><span id="ModelView.start_timer-249"><a href="#ModelView.start_timer-249"><span class="linenos">249</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">adjust_timer</span><span class="p">()</span>
</span><span id="ModelView.start_timer-250"><a href="#ModelView.start_timer-250"><span class="linenos">250</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">PUBLISH</span>
</span></pre></div>


            <div class="docstring"><p>This function stops the previous timer and starts a new one.</p>
</div>


                            </div>
                            <div id="ModelView.adjust_timer" class="classattr">
                                        <input id="ModelView.adjust_timer-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">adjust_timer</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.adjust_timer-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.adjust_timer"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.adjust_timer-252"><a href="#ModelView.adjust_timer-252"><span class="linenos">252</span></a>    <span class="k">def</span> <span class="nf">adjust_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView.adjust_timer-253"><a href="#ModelView.adjust_timer-253"><span class="linenos">253</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView.adjust_timer-254"><a href="#ModelView.adjust_timer-254"><span class="linenos">254</span></a><span class="sd">        This function sets the timeout for the timer.   </span>
</span><span id="ModelView.adjust_timer-255"><a href="#ModelView.adjust_timer-255"><span class="linenos">255</span></a>
</span><span id="ModelView.adjust_timer-256"><a href="#ModelView.adjust_timer-256"><span class="linenos">256</span></a><span class="sd">        Timeout = time to execute the complete step / number of intermediate steps  </span>
</span><span id="ModelView.adjust_timer-257"><a href="#ModelView.adjust_timer-257"><span class="linenos">257</span></a>
</span><span id="ModelView.adjust_timer-258"><a href="#ModelView.adjust_timer-258"><span class="linenos">258</span></a><span class="sd">        Example: the duration of one complete step schould be 1 sec. with 10 intermediate steps. </span>
</span><span id="ModelView.adjust_timer-259"><a href="#ModelView.adjust_timer-259"><span class="linenos">259</span></a><span class="sd">        Then every timer should run for = 1sec/10 = 0.1seconds.</span>
</span><span id="ModelView.adjust_timer-260"><a href="#ModelView.adjust_timer-260"><span class="linenos">260</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView.adjust_timer-261"><a href="#ModelView.adjust_timer-261"><span class="linenos">261</span></a>        <span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_step_time</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span>
</span><span id="ModelView.adjust_timer-262"><a href="#ModelView.adjust_timer-262"><span class="linenos">262</span></a>        <span class="k">if</span> <span class="n">timeout</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">:</span>
</span><span id="ModelView.adjust_timer-263"><a href="#ModelView.adjust_timer-263"><span class="linenos">263</span></a>            <span class="n">timeout</span> <span class="o">=</span> <span class="mi">10</span>
</span><span id="ModelView.adjust_timer-264"><a href="#ModelView.adjust_timer-264"><span class="linenos">264</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView.adjust_timer-265"><a href="#ModelView.adjust_timer-265"><span class="linenos">265</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">timeout</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>This function sets the timeout for the timer.   </p>

<p>Timeout = time to execute the complete step / number of intermediate steps  </p>

<p>Example: the duration of one complete step schould be 1 sec. with 10 intermediate steps. 
Then every timer should run for = 1sec/10 = 0.1seconds.</p>
</div>


                            </div>
                            <div id="ModelView.switch_timer" class="classattr">
                                        <input id="ModelView.switch_timer-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">switch_timer</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.switch_timer-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.switch_timer"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.switch_timer-267"><a href="#ModelView.switch_timer-267"><span class="linenos">267</span></a>    <span class="k">def</span> <span class="nf">switch_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView.switch_timer-268"><a href="#ModelView.switch_timer-268"><span class="linenos">268</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView.switch_timer-269"><a href="#ModelView.switch_timer-269"><span class="linenos">269</span></a><span class="sd">        This function switches the timer  </span>
</span><span id="ModelView.switch_timer-270"><a href="#ModelView.switch_timer-270"><span class="linenos">270</span></a><span class="sd">        (start the timer if there is no timer running / stop the timer if there is a timer running).</span>
</span><span id="ModelView.switch_timer-271"><a href="#ModelView.switch_timer-271"><span class="linenos">271</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView.switch_timer-272"><a href="#ModelView.switch_timer-272"><span class="linenos">272</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView.switch_timer-273"><a href="#ModelView.switch_timer-273"><span class="linenos">273</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">start_timer</span><span class="p">()</span>
</span><span id="ModelView.switch_timer-274"><a href="#ModelView.switch_timer-274"><span class="linenos">274</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="ModelView.switch_timer-275"><a href="#ModelView.switch_timer-275"><span class="linenos">275</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">stop_timer</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>This function switches the timer <br />
(start the timer if there is no timer running / stop the timer if there is a timer running).</p>
</div>


                            </div>
                            <div id="ModelView.stop_timer" class="classattr">
                                        <input id="ModelView.stop_timer-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">stop_timer</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.stop_timer-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.stop_timer"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.stop_timer-277"><a href="#ModelView.stop_timer-277"><span class="linenos">277</span></a>    <span class="k">def</span> <span class="nf">stop_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView.stop_timer-278"><a href="#ModelView.stop_timer-278"><span class="linenos">278</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView.stop_timer-279"><a href="#ModelView.stop_timer-279"><span class="linenos">279</span></a><span class="sd">        This function stops the timer if there is a timer running.</span>
</span><span id="ModelView.stop_timer-280"><a href="#ModelView.stop_timer-280"><span class="linenos">280</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView.stop_timer-281"><a href="#ModelView.stop_timer-281"><span class="linenos">281</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView.stop_timer-282"><a href="#ModelView.stop_timer-282"><span class="linenos">282</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</span><span id="ModelView.stop_timer-283"><a href="#ModelView.stop_timer-283"><span class="linenos">283</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ModelView.stop_timer-284"><a href="#ModelView.stop_timer-284"><span class="linenos">284</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="o">=</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>This function stops the timer if there is a timer running.</p>
</div>


                            </div>
                            <div id="ModelView.speed_up_timer" class="classattr">
                                        <input id="ModelView.speed_up_timer-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">speed_up_timer</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.speed_up_timer-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.speed_up_timer"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.speed_up_timer-286"><a href="#ModelView.speed_up_timer-286"><span class="linenos">286</span></a>    <span class="k">def</span> <span class="nf">speed_up_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView.speed_up_timer-287"><a href="#ModelView.speed_up_timer-287"><span class="linenos">287</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView.speed_up_timer-288"><a href="#ModelView.speed_up_timer-288"><span class="linenos">288</span></a><span class="sd">        This function decreases the time for completion of one complete step.</span>
</span><span id="ModelView.speed_up_timer-289"><a href="#ModelView.speed_up_timer-289"><span class="linenos">289</span></a>
</span><span id="ModelView.speed_up_timer-290"><a href="#ModelView.speed_up_timer-290"><span class="linenos">290</span></a><span class="sd">        Following values are allowed (in milliseconds):  </span>
</span><span id="ModelView.speed_up_timer-291"><a href="#ModelView.speed_up_timer-291"><span class="linenos">291</span></a><span class="sd">        2000 (intermediate steps=20), 1000 (10), 500 (10), 250(5), 0(0)</span>
</span><span id="ModelView.speed_up_timer-292"><a href="#ModelView.speed_up_timer-292"><span class="linenos">292</span></a>
</span><span id="ModelView.speed_up_timer-293"><a href="#ModelView.speed_up_timer-293"><span class="linenos">293</span></a><span class="sd">        By decreasing the time the value is moved from left to right  </span>
</span><span id="ModelView.speed_up_timer-294"><a href="#ModelView.speed_up_timer-294"><span class="linenos">294</span></a><span class="sd">        (example: old value 500, new value 250)</span>
</span><span id="ModelView.speed_up_timer-295"><a href="#ModelView.speed_up_timer-295"><span class="linenos">295</span></a><span class="sd">        </span>
</span><span id="ModelView.speed_up_timer-296"><a href="#ModelView.speed_up_timer-296"><span class="linenos">296</span></a><span class="sd">        The timeout for one timer is defined by &quot;time for completion of one step&quot; / &quot;intermediate steps&quot;</span>
</span><span id="ModelView.speed_up_timer-297"><a href="#ModelView.speed_up_timer-297"><span class="linenos">297</span></a><span class="sd">        (example: value 2000, then 20 intermediate steps with every timer running for 100 millisec.)</span>
</span><span id="ModelView.speed_up_timer-298"><a href="#ModelView.speed_up_timer-298"><span class="linenos">298</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView.speed_up_timer-299"><a href="#ModelView.speed_up_timer-299"><span class="linenos">299</span></a>        <span class="n">values_time</span> <span class="o">=</span>  <span class="p">[</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="ModelView.speed_up_timer-300"><a href="#ModelView.speed_up_timer-300"><span class="linenos">300</span></a>        <span class="n">values_count</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span>   <span class="mi">10</span><span class="p">,</span>   <span class="mi">10</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>   <span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView.speed_up_timer-301"><a href="#ModelView.speed_up_timer-301"><span class="linenos">301</span></a>        
</span><span id="ModelView.speed_up_timer-302"><a href="#ModelView.speed_up_timer-302"><span class="linenos">302</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="ModelView.speed_up_timer-303"><a href="#ModelView.speed_up_timer-303"><span class="linenos">303</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_time</span><span class="p">):</span>
</span><span id="ModelView.speed_up_timer-304"><a href="#ModelView.speed_up_timer-304"><span class="linenos">304</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_time</span><span class="p">)</span> 
</span><span id="ModelView.speed_up_timer-305"><a href="#ModelView.speed_up_timer-305"><span class="linenos">305</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="ModelView.speed_up_timer-306"><a href="#ModelView.speed_up_timer-306"><span class="linenos">306</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">=</span> <span class="mi">2</span>
</span><span id="ModelView.speed_up_timer-307"><a href="#ModelView.speed_up_timer-307"><span class="linenos">307</span></a>
</span><span id="ModelView.speed_up_timer-308"><a href="#ModelView.speed_up_timer-308"><span class="linenos">308</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_step_time</span> <span class="o">=</span> <span class="n">values_time</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView.speed_up_timer-309"><a href="#ModelView.speed_up_timer-309"><span class="linenos">309</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span> <span class="o">=</span> <span class="n">values_count</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView.speed_up_timer-310"><a href="#ModelView.speed_up_timer-310"><span class="linenos">310</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">adjust_timer</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>This function decreases the time for completion of one complete step.</p>

<p>Following values are allowed (in milliseconds): <br />
2000 (intermediate steps=20), 1000 (10), 500 (10), 250(5), 0(0)</p>

<p>By decreasing the time the value is moved from left to right <br />
(example: old value 500, new value 250)</p>

<p>The timeout for one timer is defined by "time for completion of one step" / "intermediate steps"
(example: value 2000, then 20 intermediate steps with every timer running for 100 millisec.)</p>
</div>


                            </div>
                            <div id="ModelView.speed_down_timer" class="classattr">
                                        <input id="ModelView.speed_down_timer-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">speed_down_timer</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.speed_down_timer-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.speed_down_timer"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.speed_down_timer-312"><a href="#ModelView.speed_down_timer-312"><span class="linenos">312</span></a>    <span class="k">def</span> <span class="nf">speed_down_timer</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView.speed_down_timer-313"><a href="#ModelView.speed_down_timer-313"><span class="linenos">313</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView.speed_down_timer-314"><a href="#ModelView.speed_down_timer-314"><span class="linenos">314</span></a><span class="sd">        This function increaes the time for completion of one complete step.</span>
</span><span id="ModelView.speed_down_timer-315"><a href="#ModelView.speed_down_timer-315"><span class="linenos">315</span></a>
</span><span id="ModelView.speed_down_timer-316"><a href="#ModelView.speed_down_timer-316"><span class="linenos">316</span></a><span class="sd">        Following values are allowed (in milliseconds):  </span>
</span><span id="ModelView.speed_down_timer-317"><a href="#ModelView.speed_down_timer-317"><span class="linenos">317</span></a><span class="sd">        2000 (intermediate steps=20), 1000 (10), 500 (10), 250(5), 0(0)</span>
</span><span id="ModelView.speed_down_timer-318"><a href="#ModelView.speed_down_timer-318"><span class="linenos">318</span></a>
</span><span id="ModelView.speed_down_timer-319"><a href="#ModelView.speed_down_timer-319"><span class="linenos">319</span></a><span class="sd">        By increasing the time the value is moved from right to left  </span>
</span><span id="ModelView.speed_down_timer-320"><a href="#ModelView.speed_down_timer-320"><span class="linenos">320</span></a><span class="sd">        (example: old value 250, new value 500)</span>
</span><span id="ModelView.speed_down_timer-321"><a href="#ModelView.speed_down_timer-321"><span class="linenos">321</span></a><span class="sd">        </span>
</span><span id="ModelView.speed_down_timer-322"><a href="#ModelView.speed_down_timer-322"><span class="linenos">322</span></a><span class="sd">        The timeout for one timer is defined by &quot;time for completion of one step&quot; / &quot;intermediate steps&quot;</span>
</span><span id="ModelView.speed_down_timer-323"><a href="#ModelView.speed_down_timer-323"><span class="linenos">323</span></a><span class="sd">        (example: value 250, then 5 intermediate steps with every timer running for 50 millisec.)</span>
</span><span id="ModelView.speed_down_timer-324"><a href="#ModelView.speed_down_timer-324"><span class="linenos">324</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView.speed_down_timer-325"><a href="#ModelView.speed_down_timer-325"><span class="linenos">325</span></a>        <span class="n">values_time</span> <span class="o">=</span>  <span class="p">[</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1000</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">250</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
</span><span id="ModelView.speed_down_timer-326"><a href="#ModelView.speed_down_timer-326"><span class="linenos">326</span></a>        <span class="n">values_count</span> <span class="o">=</span> <span class="p">[</span><span class="mi">20</span><span class="p">,</span>   <span class="mi">10</span><span class="p">,</span>   <span class="mi">10</span><span class="p">,</span>  <span class="mi">5</span><span class="p">,</span>   <span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView.speed_down_timer-327"><a href="#ModelView.speed_down_timer-327"><span class="linenos">327</span></a>        
</span><span id="ModelView.speed_down_timer-328"><a href="#ModelView.speed_down_timer-328"><span class="linenos">328</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span id="ModelView.speed_down_timer-329"><a href="#ModelView.speed_down_timer-329"><span class="linenos">329</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_time</span><span class="p">):</span>
</span><span id="ModelView.speed_down_timer-330"><a href="#ModelView.speed_down_timer-330"><span class="linenos">330</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">values_time</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
</span><span id="ModelView.speed_down_timer-331"><a href="#ModelView.speed_down_timer-331"><span class="linenos">331</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
</span><span id="ModelView.speed_down_timer-332"><a href="#ModelView.speed_down_timer-332"><span class="linenos">332</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="ModelView.speed_down_timer-333"><a href="#ModelView.speed_down_timer-333"><span class="linenos">333</span></a>
</span><span id="ModelView.speed_down_timer-334"><a href="#ModelView.speed_down_timer-334"><span class="linenos">334</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_step_time</span> <span class="o">=</span> <span class="n">values_time</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView.speed_down_timer-335"><a href="#ModelView.speed_down_timer-335"><span class="linenos">335</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span> <span class="o">=</span> <span class="n">values_count</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_scale</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView.speed_down_timer-336"><a href="#ModelView.speed_down_timer-336"><span class="linenos">336</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">adjust_timer</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>This function increaes the time for completion of one complete step.</p>

<p>Following values are allowed (in milliseconds): <br />
2000 (intermediate steps=20), 1000 (10), 500 (10), 250(5), 0(0)</p>

<p>By increasing the time the value is moved from right to left <br />
(example: old value 250, new value 500)</p>

<p>The timeout for one timer is defined by "time for completion of one step" / "intermediate steps"
(example: value 250, then 5 intermediate steps with every timer running for 50 millisec.)</p>
</div>


                            </div>
                            <div id="ModelView.is_timer_running" class="classattr">
                                        <input id="ModelView.is_timer_running-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_timer_running</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.is_timer_running-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.is_timer_running"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.is_timer_running-338"><a href="#ModelView.is_timer_running-338"><span class="linenos">338</span></a>    <span class="k">def</span> <span class="nf">is_timer_running</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView.is_timer_running-339"><a href="#ModelView.is_timer_running-339"><span class="linenos">339</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView.is_timer_running-340"><a href="#ModelView.is_timer_running-340"><span class="linenos">340</span></a><span class="sd">        This function checks whether the timer is running.</span>
</span><span id="ModelView.is_timer_running-341"><a href="#ModelView.is_timer_running-341"><span class="linenos">341</span></a>
</span><span id="ModelView.is_timer_running-342"><a href="#ModelView.is_timer_running-342"><span class="linenos">342</span></a><span class="sd">        :return: **True**, if a timer is running   </span>
</span><span id="ModelView.is_timer_running-343"><a href="#ModelView.is_timer_running-343"><span class="linenos">343</span></a><span class="sd">        **False**, otherwise</span>
</span><span id="ModelView.is_timer_running-344"><a href="#ModelView.is_timer_running-344"><span class="linenos">344</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView.is_timer_running-345"><a href="#ModelView.is_timer_running-345"><span class="linenos">345</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer</span> <span class="ow">is</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>This function checks whether the timer is running.</p>

<h6 id="returns">Returns</h6>

<blockquote>
  <p><strong>True</strong>, if a timer is running <br />
  <strong>False</strong>, otherwise</p>
</blockquote>
</div>


                            </div>
                            <div id="ModelView.update_windows" class="classattr">
                                        <input id="ModelView.update_windows-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">update_windows</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.update_windows-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.update_windows"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.update_windows-364"><a href="#ModelView.update_windows-364"><span class="linenos">364</span></a>    <span class="k">def</span> <span class="nf">update_windows</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView.update_windows-365"><a href="#ModelView.update_windows-365"><span class="linenos">365</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView.update_windows-366"><a href="#ModelView.update_windows-366"><span class="linenos">366</span></a><span class="sd">        This function updates all registered windows. </span>
</span><span id="ModelView.update_windows-367"><a href="#ModelView.update_windows-367"><span class="linenos">367</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView.update_windows-368"><a href="#ModelView.update_windows-368"><span class="linenos">368</span></a>        <span class="k">for</span> <span class="n">window</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_windows</span><span class="p">:</span>
</span><span id="ModelView.update_windows-369"><a href="#ModelView.update_windows-369"><span class="linenos">369</span></a>            <span class="n">window</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>This function updates all registered windows.</p>
</div>


                            </div>
                            <div id="ModelView.add_window" class="classattr">
                                        <input id="ModelView.add_window-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">add_window</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">window</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.add_window-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.add_window"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.add_window-371"><a href="#ModelView.add_window-371"><span class="linenos">371</span></a>    <span class="k">def</span> <span class="nf">add_window</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">window</span><span class="p">):</span>
</span><span id="ModelView.add_window-372"><a href="#ModelView.add_window-372"><span class="linenos">372</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView.add_window-373"><a href="#ModelView.add_window-373"><span class="linenos">373</span></a><span class="sd">        This function adds a widget to the list of widgets which should be updated every time the function update_windows(self) is called.</span>
</span><span id="ModelView.add_window-374"><a href="#ModelView.add_window-374"><span class="linenos">374</span></a><span class="sd">        This could be the robot table (RightSideWidget) or widgets from the left side.</span>
</span><span id="ModelView.add_window-375"><a href="#ModelView.add_window-375"><span class="linenos">375</span></a><span class="sd">        This widgets can then be updated all together if the model view has changed. </span>
</span><span id="ModelView.add_window-376"><a href="#ModelView.add_window-376"><span class="linenos">376</span></a>
</span><span id="ModelView.add_window-377"><a href="#ModelView.add_window-377"><span class="linenos">377</span></a><span class="sd">        :param window: PyQt5.QtWidgets.QWidget - widget which should be added to the list</span>
</span><span id="ModelView.add_window-378"><a href="#ModelView.add_window-378"><span class="linenos">378</span></a><span class="sd">        </span>
</span><span id="ModelView.add_window-379"><a href="#ModelView.add_window-379"><span class="linenos">379</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView.add_window-380"><a href="#ModelView.add_window-380"><span class="linenos">380</span></a>        <span class="k">if</span> <span class="n">window</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_windows</span><span class="p">:</span>
</span><span id="ModelView.add_window-381"><a href="#ModelView.add_window-381"><span class="linenos">381</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_windows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">window</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>This function adds a widget to the list of widgets which should be updated every time the function update_windows(self) is called.
This could be the robot table (RightSideWidget) or widgets from the left side.
This widgets can then be updated all together if the model view has changed. </p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>window</strong>:  PyQt5.QtWidgets.QWidget - widget which should be added to the list</li>
</ul>
</div>


                            </div>
                            <div id="ModelView.update" class="classattr">
                                        <input id="ModelView.update-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">update</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.update-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.update"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.update-383"><a href="#ModelView.update-383"><span class="linenos">383</span></a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView.update-384"><a href="#ModelView.update-384"><span class="linenos">384</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView.update-385"><a href="#ModelView.update-385"><span class="linenos">385</span></a><span class="sd">        This function draws the map, the items and other elements in the window. </span>
</span><span id="ModelView.update-386"><a href="#ModelView.update-386"><span class="linenos">386</span></a>
</span><span id="ModelView.update-387"><a href="#ModelView.update-387"><span class="linenos">387</span></a><span class="sd">        Following elements will be plotted:</span>
</span><span id="ModelView.update-388"><a href="#ModelView.update-388"><span class="linenos">388</span></a><span class="sd">        -   vertical and horizontal lines</span>
</span><span id="ModelView.update-389"><a href="#ModelView.update-389"><span class="linenos">389</span></a><span class="sd">        -   disabled nodes (=blocked spots)</span>
</span><span id="ModelView.update-390"><a href="#ModelView.update-390"><span class="linenos">390</span></a><span class="sd">        -   every graphic item in the model</span>
</span><span id="ModelView.update-391"><a href="#ModelView.update-391"><span class="linenos">391</span></a>
</span><span id="ModelView.update-392"><a href="#ModelView.update-392"><span class="linenos">392</span></a><span class="sd">        Following elements are optional and will be plotted only if activated by the user:</span>
</span><span id="ModelView.update-393"><a href="#ModelView.update-393"><span class="linenos">393</span></a><span class="sd">        -   start points of the items</span>
</span><span id="ModelView.update-394"><a href="#ModelView.update-394"><span class="linenos">394</span></a><span class="sd">        -   driven path by the items</span>
</span><span id="ModelView.update-395"><a href="#ModelView.update-395"><span class="linenos">395</span></a><span class="sd">        -   future/calculated path for the items</span>
</span><span id="ModelView.update-396"><a href="#ModelView.update-396"><span class="linenos">396</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView.update-397"><a href="#ModelView.update-397"><span class="linenos">397</span></a>
</span><span id="ModelView.update-398"><a href="#ModelView.update-398"><span class="linenos">398</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> 
</span><span id="ModelView.update-399"><a href="#ModelView.update-399"><span class="linenos">399</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="ModelView.update-400"><a href="#ModelView.update-400"><span class="linenos">400</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">mapf_get_filename_map</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;&#39;</span><span class="p">:</span>
</span><span id="ModelView.update-401"><a href="#ModelView.update-401"><span class="linenos">401</span></a>            <span class="k">return</span> <span class="mi">0</span>
</span><span id="ModelView.update-402"><a href="#ModelView.update-402"><span class="linenos">402</span></a>
</span><span id="ModelView.update-403"><a href="#ModelView.update-403"><span class="linenos">403</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_line_hlength</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span>
</span><span id="ModelView.update-404"><a href="#ModelView.update-404"><span class="linenos">404</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_line_vlength</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span>
</span><span id="ModelView.update-405"><a href="#ModelView.update-405"><span class="linenos">405</span></a>
</span><span id="ModelView.update-406"><a href="#ModelView.update-406"><span class="linenos">406</span></a>        <span class="k">for</span> <span class="n">item_dic</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">iterate_graphic_dictionaries</span><span class="p">():</span>
</span><span id="ModelView.update-407"><a href="#ModelView.update-407"><span class="linenos">407</span></a>            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">item_dic</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="ModelView.update-408"><a href="#ModelView.update-408"><span class="linenos">408</span></a>                <span class="n">color_id</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ModelView.update-409"><a href="#ModelView.update-409"><span class="linenos">409</span></a>                <span class="n">hex_color</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_&#39;</span> <span class="o">+</span> <span class="n">item</span><span class="o">.</span><span class="n">get_kind_name</span><span class="p">()</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">color_id</span><span class="p">))</span>
</span><span id="ModelView.update-410"><a href="#ModelView.update-410"><span class="linenos">410</span></a>                <span class="k">while</span><span class="p">(</span><span class="n">hex_color</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="ModelView.update-411"><a href="#ModelView.update-411"><span class="linenos">411</span></a>                    <span class="n">item</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">hex_color</span><span class="p">),</span> <span class="n">color_id</span><span class="p">)</span>
</span><span id="ModelView.update-412"><a href="#ModelView.update-412"><span class="linenos">412</span></a>                    <span class="n">color_id</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="ModelView.update-413"><a href="#ModelView.update-413"><span class="linenos">413</span></a>                    <span class="n">hex_color</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_&#39;</span> <span class="o">+</span> <span class="n">item</span><span class="o">.</span><span class="n">get_kind_name</span><span class="p">()</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">color_id</span><span class="p">))</span>
</span><span id="ModelView.update-414"><a href="#ModelView.update-414"><span class="linenos">414</span></a>
</span><span id="ModelView.update-415"><a href="#ModelView.update-415"><span class="linenos">415</span></a>        <span class="n">pen</span> <span class="o">=</span> <span class="n">QPen</span><span class="p">()</span>
</span><span id="ModelView.update-416"><a href="#ModelView.update-416"><span class="linenos">416</span></a>        <span class="n">pen</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="p">)</span>
</span><span id="ModelView.update-417"><a href="#ModelView.update-417"><span class="linenos">417</span></a>        <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DotLine</span><span class="p">)</span>
</span><span id="ModelView.update-418"><a href="#ModelView.update-418"><span class="linenos">418</span></a>        <span class="n">brush_disabled_node</span> <span class="o">=</span> <span class="n">QBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_disabled_node&#39;</span><span class="p">)))</span>
</span><span id="ModelView.update-419"><a href="#ModelView.update-419"><span class="linenos">419</span></a>        <span class="n">brush_start_point</span> <span class="o">=</span> <span class="n">QBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_start_node&#39;</span><span class="p">)))</span>
</span><span id="ModelView.update-420"><a href="#ModelView.update-420"><span class="linenos">420</span></a>        <span class="n">brush_start_point_highlighted</span> <span class="o">=</span> <span class="n">QBrush</span><span class="p">(</span><span class="n">QColor</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_start_node_highlighted&#39;</span><span class="p">)))</span>
</span><span id="ModelView.update-421"><a href="#ModelView.update-421"><span class="linenos">421</span></a>        <span class="n">color_travelled_path_highlighted</span> <span class="o">=</span> <span class="n">QColor</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_travelled_path_highlighted&#39;</span><span class="p">))</span>
</span><span id="ModelView.update-422"><a href="#ModelView.update-422"><span class="linenos">422</span></a>        <span class="n">color_future_path_highlighted</span> <span class="o">=</span> <span class="n">QColor</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;color_future_path_highlighted&#39;</span><span class="p">))</span>
</span><span id="ModelView.update-423"><a href="#ModelView.update-423"><span class="linenos">423</span></a>
</span><span id="ModelView.update-424"><a href="#ModelView.update-424"><span class="linenos">424</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</span><span id="ModelView.update-425"><a href="#ModelView.update-425"><span class="linenos">425</span></a>
</span><span id="ModelView.update-426"><a href="#ModelView.update-426"><span class="linenos">426</span></a>        <span class="c1">#---------------------------------------draw vertival lines---------------------------------------</span>
</span><span id="ModelView.update-427"><a href="#ModelView.update-427"><span class="linenos">427</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="ModelView.update-428"><a href="#ModelView.update-428"><span class="linenos">428</span></a>            <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addLine</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">i</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span>
</span><span id="ModelView.update-429"><a href="#ModelView.update-429"><span class="linenos">429</span></a>                                        <span class="bp">self</span><span class="o">.</span><span class="n">_line_hlength</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="p">,</span>
</span><span id="ModelView.update-430"><a href="#ModelView.update-430"><span class="linenos">430</span></a>                                        <span class="n">i</span> <span class="o">*</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">),</span> <span class="n">pen</span><span class="p">)</span>
</span><span id="ModelView.update-431"><a href="#ModelView.update-431"><span class="linenos">431</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="ModelView.update-432"><a href="#ModelView.update-432"><span class="linenos">432</span></a>
</span><span id="ModelView.update-433"><a href="#ModelView.update-433"><span class="linenos">433</span></a>        <span class="c1">#---------------------------------------draw horizontal lines---------------------------------------</span>
</span><span id="ModelView.update-434"><a href="#ModelView.update-434"><span class="linenos">434</span></a>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_grid_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="ModelView.update-435"><a href="#ModelView.update-435"><span class="linenos">435</span></a>            <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addLine</span><span class="p">(</span><span class="n">i</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span> 
</span><span id="ModelView.update-436"><a href="#ModelView.update-436"><span class="linenos">436</span></a>                                        <span class="mi">0</span><span class="p">,</span> <span class="n">i</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">),</span> 
</span><span id="ModelView.update-437"><a href="#ModelView.update-437"><span class="linenos">437</span></a>                                        <span class="bp">self</span><span class="o">.</span><span class="n">_line_vlength</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="p">,</span> <span class="n">pen</span><span class="p">)</span>
</span><span id="ModelView.update-438"><a href="#ModelView.update-438"><span class="linenos">438</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="ModelView.update-439"><a href="#ModelView.update-439"><span class="linenos">439</span></a>
</span><span id="ModelView.update-440"><a href="#ModelView.update-440"><span class="linenos">440</span></a>        <span class="c1">#---------------------------------------draw disabled nodes---------------------------------------</span>
</span><span id="ModelView.update-441"><a href="#ModelView.update-441"><span class="linenos">441</span></a>        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_blocked_nodes</span><span class="p">():</span>
</span><span id="ModelView.update-442"><a href="#ModelView.update-442"><span class="linenos">442</span></a>            <span class="n">xPos</span> <span class="o">=</span> <span class="p">(</span><span class="n">node</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span>
</span><span id="ModelView.update-443"><a href="#ModelView.update-443"><span class="linenos">443</span></a>            <span class="n">yPos</span> <span class="o">=</span> <span class="p">(</span><span class="n">node</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span>
</span><span id="ModelView.update-444"><a href="#ModelView.update-444"><span class="linenos">444</span></a>            
</span><span id="ModelView.update-445"><a href="#ModelView.update-445"><span class="linenos">445</span></a>            <span class="n">rect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addRect</span><span class="p">(</span> <span class="p">(</span><span class="n">xPos</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="mf">0.1</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span> 
</span><span id="ModelView.update-446"><a href="#ModelView.update-446"><span class="linenos">446</span></a>                                        <span class="p">(</span><span class="n">yPos</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="mf">0.1</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span> 
</span><span id="ModelView.update-447"><a href="#ModelView.update-447"><span class="linenos">447</span></a>                                        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="mf">0.8</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span> 
</span><span id="ModelView.update-448"><a href="#ModelView.update-448"><span class="linenos">448</span></a>                                        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="mf">0.8</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span> 
</span><span id="ModelView.update-449"><a href="#ModelView.update-449"><span class="linenos">449</span></a>                                        <span class="n">pen</span><span class="p">,</span> <span class="n">brush_disabled_node</span><span class="p">)</span>
</span><span id="ModelView.update-450"><a href="#ModelView.update-450"><span class="linenos">450</span></a><span class="w">            </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView.update-451"><a href="#ModelView.update-451"><span class="linenos">451</span></a><span class="sd">            rect = self._scene.addRect( xPos*self._scaling, </span>
</span><span id="ModelView.update-452"><a href="#ModelView.update-452"><span class="linenos">452</span></a><span class="sd">                                        yPos*self._scaling, </span>
</span><span id="ModelView.update-453"><a href="#ModelView.update-453"><span class="linenos">453</span></a><span class="sd">                                        self._w_distance*self._scaling, </span>
</span><span id="ModelView.update-454"><a href="#ModelView.update-454"><span class="linenos">454</span></a><span class="sd">                                        self._h_distance*self._scaling, </span>
</span><span id="ModelView.update-455"><a href="#ModelView.update-455"><span class="linenos">455</span></a><span class="sd">                                        pen, brush_disabled_node)</span>
</span><span id="ModelView.update-456"><a href="#ModelView.update-456"><span class="linenos">456</span></a><span class="sd">            &#39;&#39;&#39;</span>
</span><span id="ModelView.update-457"><a href="#ModelView.update-457"><span class="linenos">457</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>
</span><span id="ModelView.update-458"><a href="#ModelView.update-458"><span class="linenos">458</span></a>
</span><span id="ModelView.update-459"><a href="#ModelView.update-459"><span class="linenos">459</span></a>        <span class="c1">#---------------------------------------draw items---------------------------------------</span>
</span><span id="ModelView.update-460"><a href="#ModelView.update-460"><span class="linenos">460</span></a>        <span class="k">for</span> <span class="n">item_dic</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">iterate_graphic_dictionaries</span><span class="p">():</span>
</span><span id="ModelView.update-461"><a href="#ModelView.update-461"><span class="linenos">461</span></a>            <span class="n">count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">item_dic</span><span class="p">)</span>
</span><span id="ModelView.update-462"><a href="#ModelView.update-462"><span class="linenos">462</span></a>            <span class="n">number</span> <span class="o">=</span> <span class="mi">1</span>
</span><span id="ModelView.update-463"><a href="#ModelView.update-463"><span class="linenos">463</span></a>            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">item_dic</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
</span><span id="ModelView.update-464"><a href="#ModelView.update-464"><span class="linenos">464</span></a>                <span class="n">item</span><span class="o">.</span><span class="n">set_display_mode</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_display_mode</span><span class="p">)</span>
</span><span id="ModelView.update-465"><a href="#ModelView.update-465"><span class="linenos">465</span></a>                <span class="c1">#item.set_display_mode(0)</span>
</span><span id="ModelView.update-466"><a href="#ModelView.update-466"><span class="linenos">466</span></a>                <span class="n">x_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_position</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="ModelView.update-467"><a href="#ModelView.update-467"><span class="linenos">467</span></a>                <span class="n">y_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_position</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
</span><span id="ModelView.update-468"><a href="#ModelView.update-468"><span class="linenos">468</span></a>                <span class="n">action</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_action</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_current_step</span><span class="p">())</span>
</span><span id="ModelView.update-469"><a href="#ModelView.update-469"><span class="linenos">469</span></a>                <span class="k">if</span> <span class="n">action</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView.update-470"><a href="#ModelView.update-470"><span class="linenos">470</span></a>                    <span class="n">action_name</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span>
</span><span id="ModelView.update-471"><a href="#ModelView.update-471"><span class="linenos">471</span></a>                    <span class="n">action_value</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView.update-472"><a href="#ModelView.update-472"><span class="linenos">472</span></a>                    <span class="k">if</span> <span class="n">action_name</span> <span class="o">==</span> <span class="s1">&#39;move&#39;</span><span class="p">:</span>
</span><span id="ModelView.update-473"><a href="#ModelView.update-473"><span class="linenos">473</span></a>                        <span class="n">action_x</span> <span class="o">=</span> <span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">number</span>
</span><span id="ModelView.update-474"><a href="#ModelView.update-474"><span class="linenos">474</span></a>                        <span class="n">action_y</span> <span class="o">=</span> <span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">number</span>
</span><span id="ModelView.update-475"><a href="#ModelView.update-475"><span class="linenos">475</span></a>                        <span class="n">x_pos</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">x_pos</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">action_x</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span><span class="p">))))</span>
</span><span id="ModelView.update-476"><a href="#ModelView.update-476"><span class="linenos">476</span></a>                        <span class="n">y_pos</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">y_pos</span> <span class="o">+</span> <span class="nb">float</span><span class="p">(</span><span class="n">action_y</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span><span class="p">))))</span>
</span><span id="ModelView.update-477"><a href="#ModelView.update-477"><span class="linenos">477</span></a>                <span class="n">x_pos</span> <span class="o">=</span> <span class="n">x_pos</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">/</span><span class="mi">2</span>
</span><span id="ModelView.update-478"><a href="#ModelView.update-478"><span class="linenos">478</span></a>                <span class="n">y_pos</span> <span class="o">=</span> <span class="n">y_pos</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">/</span><span class="mi">2</span>
</span><span id="ModelView.update-479"><a href="#ModelView.update-479"><span class="linenos">479</span></a>                <span class="n">item</span><span class="o">.</span><span class="n">set_rect</span><span class="p">(</span><span class="n">QRect</span><span class="p">(</span><span class="n">x_pos</span><span class="p">,</span> <span class="n">y_pos</span><span class="p">,</span>
</span><span id="ModelView.update-480"><a href="#ModelView.update-480"><span class="linenos">480</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">,</span>
</span><span id="ModelView.update-481"><a href="#ModelView.update-481"><span class="linenos">481</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="p">))</span>
</span><span id="ModelView.update-482"><a href="#ModelView.update-482"><span class="linenos">482</span></a>                
</span><span id="ModelView.update-483"><a href="#ModelView.update-483"><span class="linenos">483</span></a>                <span class="n">item</span><span class="o">.</span><span class="n">determine_color</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>
</span><span id="ModelView.update-484"><a href="#ModelView.update-484"><span class="linenos">484</span></a>                
</span><span id="ModelView.update-485"><a href="#ModelView.update-485"><span class="linenos">485</span></a>                <span class="c1">#---------------------------------------draw start point---------------------------------------</span>
</span><span id="ModelView.update-486"><a href="#ModelView.update-486"><span class="linenos">486</span></a>                <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get_draw_startpoint</span><span class="p">():</span>
</span><span id="ModelView.update-487"><a href="#ModelView.update-487"><span class="linenos">487</span></a>
</span><span id="ModelView.update-488"><a href="#ModelView.update-488"><span class="linenos">488</span></a>                    <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="o">*</span><span class="mf">0.5</span>
</span><span id="ModelView.update-489"><a href="#ModelView.update-489"><span class="linenos">489</span></a>                    <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span><span class="o">*</span><span class="mf">0.5</span>
</span><span id="ModelView.update-490"><a href="#ModelView.update-490"><span class="linenos">490</span></a>                                           
</span><span id="ModelView.update-491"><a href="#ModelView.update-491"><span class="linenos">491</span></a>                    <span class="n">x_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_start_position</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span>
</span><span id="ModelView.update-492"><a href="#ModelView.update-492"><span class="linenos">492</span></a>                    <span class="n">y_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_start_position</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span>
</span><span id="ModelView.update-493"><a href="#ModelView.update-493"><span class="linenos">493</span></a>                    <span class="n">x_pos</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">x_pos</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView.update-494"><a href="#ModelView.update-494"><span class="linenos">494</span></a>                    <span class="n">y_pos</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">y_pos</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span> <span class="o">+</span> <span class="mf">0.5</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView.update-495"><a href="#ModelView.update-495"><span class="linenos">495</span></a>
</span><span id="ModelView.update-496"><a href="#ModelView.update-496"><span class="linenos">496</span></a>                    <span class="n">pen</span> <span class="o">=</span> <span class="n">QPen</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get_color</span><span class="p">())</span>
</span><span id="ModelView.update-497"><a href="#ModelView.update-497"><span class="linenos">497</span></a>                    <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get_highlighted</span><span class="p">():</span>
</span><span id="ModelView.update-498"><a href="#ModelView.update-498"><span class="linenos">498</span></a>                        <span class="n">startpoint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addEllipse</span><span class="p">(</span><span class="n">x_pos</span><span class="o">-</span><span class="mf">0.75</span><span class="o">*</span><span class="n">w</span><span class="p">,</span> 
</span><span id="ModelView.update-499"><a href="#ModelView.update-499"><span class="linenos">499</span></a>                                                  <span class="n">y_pos</span><span class="o">-</span><span class="mf">0.75</span><span class="o">*</span><span class="n">h</span><span class="p">,</span>
</span><span id="ModelView.update-500"><a href="#ModelView.update-500"><span class="linenos">500</span></a>                                                  <span class="mf">1.5</span><span class="o">*</span><span class="n">w</span><span class="p">,</span>
</span><span id="ModelView.update-501"><a href="#ModelView.update-501"><span class="linenos">501</span></a>                                                  <span class="mf">1.5</span><span class="o">*</span><span class="n">h</span><span class="p">,</span>
</span><span id="ModelView.update-502"><a href="#ModelView.update-502"><span class="linenos">502</span></a>                                                  <span class="n">pen</span><span class="p">,</span> <span class="n">brush_start_point_highlighted</span><span class="p">)</span>
</span><span id="ModelView.update-503"><a href="#ModelView.update-503"><span class="linenos">503</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">startpoint</span><span class="p">)</span>
</span><span id="ModelView.update-504"><a href="#ModelView.update-504"><span class="linenos">504</span></a>
</span><span id="ModelView.update-505"><a href="#ModelView.update-505"><span class="linenos">505</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="ModelView.update-506"><a href="#ModelView.update-506"><span class="linenos">506</span></a>                        <span class="n">startpoint</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addEllipse</span><span class="p">(</span><span class="n">x_pos</span><span class="o">-</span><span class="n">w</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span> 
</span><span id="ModelView.update-507"><a href="#ModelView.update-507"><span class="linenos">507</span></a>                                                  <span class="n">y_pos</span><span class="o">-</span><span class="n">h</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span>
</span><span id="ModelView.update-508"><a href="#ModelView.update-508"><span class="linenos">508</span></a>                                                  <span class="n">w</span><span class="p">,</span>
</span><span id="ModelView.update-509"><a href="#ModelView.update-509"><span class="linenos">509</span></a>                                                  <span class="n">h</span><span class="p">,</span>
</span><span id="ModelView.update-510"><a href="#ModelView.update-510"><span class="linenos">510</span></a>                                                  <span class="n">pen</span><span class="p">,</span> <span class="n">brush_start_point</span><span class="p">)</span>
</span><span id="ModelView.update-511"><a href="#ModelView.update-511"><span class="linenos">511</span></a>                        <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">startpoint</span><span class="p">)</span>
</span><span id="ModelView.update-512"><a href="#ModelView.update-512"><span class="linenos">512</span></a>                                 
</span><span id="ModelView.update-513"><a href="#ModelView.update-513"><span class="linenos">513</span></a>                <span class="c1">#---------------------------------------draw path---------------------------------------</span>
</span><span id="ModelView.update-514"><a href="#ModelView.update-514"><span class="linenos">514</span></a>                <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get_draw_path</span><span class="p">():</span>
</span><span id="ModelView.update-515"><a href="#ModelView.update-515"><span class="linenos">515</span></a>
</span><span id="ModelView.update-516"><a href="#ModelView.update-516"><span class="linenos">516</span></a>                    <span class="n">x_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_start_position</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ModelView.update-517"><a href="#ModelView.update-517"><span class="linenos">517</span></a>                    <span class="n">y_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_start_position</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView.update-518"><a href="#ModelView.update-518"><span class="linenos">518</span></a>                    <span class="n">pen</span> <span class="o">=</span> <span class="n">QPen</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get_color</span><span class="p">())</span>
</span><span id="ModelView.update-519"><a href="#ModelView.update-519"><span class="linenos">519</span></a>                    <span class="n">pen</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
</span><span id="ModelView.update-520"><a href="#ModelView.update-520"><span class="linenos">520</span></a>                    <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get_highlighted</span><span class="p">():</span>
</span><span id="ModelView.update-521"><a href="#ModelView.update-521"><span class="linenos">521</span></a>                        <span class="n">pen</span> <span class="o">=</span> <span class="n">QPen</span><span class="p">(</span><span class="n">color_travelled_path_highlighted</span><span class="p">)</span>      
</span><span id="ModelView.update-522"><a href="#ModelView.update-522"><span class="linenos">522</span></a>                        <span class="n">pen</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">*</span><span class="mi">4</span><span class="p">)</span>
</span><span id="ModelView.update-523"><a href="#ModelView.update-523"><span class="linenos">523</span></a>
</span><span id="ModelView.update-524"><a href="#ModelView.update-524"><span class="linenos">524</span></a>                    <span class="k">if</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ModelView.update-525"><a href="#ModelView.update-525"><span class="linenos">525</span></a>                        <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DotLine</span><span class="p">)</span>
</span><span id="ModelView.update-526"><a href="#ModelView.update-526"><span class="linenos">526</span></a>                    <span class="k">elif</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ModelView.update-527"><a href="#ModelView.update-527"><span class="linenos">527</span></a>                        <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DashDotDotLine</span><span class="p">)</span>
</span><span id="ModelView.update-528"><a href="#ModelView.update-528"><span class="linenos">528</span></a>                    <span class="k">elif</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ModelView.update-529"><a href="#ModelView.update-529"><span class="linenos">529</span></a>                        <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DashDotLine</span><span class="p">)</span>           
</span><span id="ModelView.update-530"><a href="#ModelView.update-530"><span class="linenos">530</span></a>                    <span class="k">else</span><span class="p">:</span>
</span><span id="ModelView.update-531"><a href="#ModelView.update-531"><span class="linenos">531</span></a>                        <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DashLine</span><span class="p">)</span>           
</span><span id="ModelView.update-532"><a href="#ModelView.update-532"><span class="linenos">532</span></a>
</span><span id="ModelView.update-533"><a href="#ModelView.update-533"><span class="linenos">533</span></a>                    <span class="n">cc</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ModelView.update-534"><a href="#ModelView.update-534"><span class="linenos">534</span></a>                    <span class="k">while</span><span class="p">(</span><span class="n">cc</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_num_steps</span><span class="p">()):</span>
</span><span id="ModelView.update-535"><a href="#ModelView.update-535"><span class="linenos">535</span></a>                        <span class="n">action</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_action</span><span class="p">(</span><span class="n">cc</span><span class="p">)</span>
</span><span id="ModelView.update-536"><a href="#ModelView.update-536"><span class="linenos">536</span></a>                        <span class="k">if</span> <span class="n">action</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView.update-537"><a href="#ModelView.update-537"><span class="linenos">537</span></a>                            
</span><span id="ModelView.update-538"><a href="#ModelView.update-538"><span class="linenos">538</span></a>                            <span class="k">if</span> <span class="n">action</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;move&#39;</span><span class="p">:</span>
</span><span id="ModelView.update-539"><a href="#ModelView.update-539"><span class="linenos">539</span></a>                                <span class="n">action_value</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ModelView.update-540"><a href="#ModelView.update-540"><span class="linenos">540</span></a>                                
</span><span id="ModelView.update-541"><a href="#ModelView.update-541"><span class="linenos">541</span></a>                                <span class="n">x_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_pos</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView.update-542"><a href="#ModelView.update-542"><span class="linenos">542</span></a>                                <span class="n">y_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_pos</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView.update-543"><a href="#ModelView.update-543"><span class="linenos">543</span></a>                                <span class="n">x2_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_pos</span><span class="o">+</span><span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">number</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView.update-544"><a href="#ModelView.update-544"><span class="linenos">544</span></a>                                <span class="n">y2_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_pos</span><span class="o">+</span><span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">number</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView.update-545"><a href="#ModelView.update-545"><span class="linenos">545</span></a>                                
</span><span id="ModelView.update-546"><a href="#ModelView.update-546"><span class="linenos">546</span></a>                                <span class="k">if</span> <span class="p">(</span><span class="n">cc</span> <span class="o">==</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">get_num_steps</span><span class="p">())</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
</span><span id="ModelView.update-547"><a href="#ModelView.update-547"><span class="linenos">547</span></a>
</span><span id="ModelView.update-548"><a href="#ModelView.update-548"><span class="linenos">548</span></a>                                    <span class="n">x2_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_pos</span><span class="o">+</span><span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">number</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span><span class="p">))</span>
</span><span id="ModelView.update-549"><a href="#ModelView.update-549"><span class="linenos">549</span></a>                                            <span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView.update-550"><a href="#ModelView.update-550"><span class="linenos">550</span></a>                                    <span class="n">y2_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_pos</span><span class="o">+</span><span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">number</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span><span class="p">))</span>
</span><span id="ModelView.update-551"><a href="#ModelView.update-551"><span class="linenos">551</span></a>                                            <span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView.update-552"><a href="#ModelView.update-552"><span class="linenos">552</span></a>                                
</span><span id="ModelView.update-553"><a href="#ModelView.update-553"><span class="linenos">553</span></a>                                <span class="n">x_pos</span> <span class="o">=</span> <span class="n">x_pos</span> <span class="o">+</span> <span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">number</span>
</span><span id="ModelView.update-554"><a href="#ModelView.update-554"><span class="linenos">554</span></a>                                <span class="n">y_pos</span> <span class="o">=</span> <span class="n">y_pos</span> <span class="o">+</span> <span class="n">action_value</span><span class="o">.</span><span class="n">arguments</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">number</span>
</span><span id="ModelView.update-555"><a href="#ModelView.update-555"><span class="linenos">555</span></a>
</span><span id="ModelView.update-556"><a href="#ModelView.update-556"><span class="linenos">556</span></a>                                <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addLine</span><span class="p">(</span><span class="n">x_posf</span><span class="p">,</span> <span class="n">y_posf</span><span class="p">,</span> <span class="n">x2_posf</span><span class="p">,</span> <span class="n">y2_posf</span><span class="p">,</span> <span class="n">pen</span><span class="p">)</span>
</span><span id="ModelView.update-557"><a href="#ModelView.update-557"><span class="linenos">557</span></a>                                <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="ModelView.update-558"><a href="#ModelView.update-558"><span class="linenos">558</span></a>                        <span class="n">cc</span> <span class="o">=</span> <span class="n">cc</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="ModelView.update-559"><a href="#ModelView.update-559"><span class="linenos">559</span></a>                        
</span><span id="ModelView.update-560"><a href="#ModelView.update-560"><span class="linenos">560</span></a>                <span class="c1">#---------------------------------------draw future path---------------------------------------</span>
</span><span id="ModelView.update-561"><a href="#ModelView.update-561"><span class="linenos">561</span></a>                <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get_draw_future_path</span><span class="p">():</span>
</span><span id="ModelView.update-562"><a href="#ModelView.update-562"><span class="linenos">562</span></a>                    <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get_future_path</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">):</span>
</span><span id="ModelView.update-563"><a href="#ModelView.update-563"><span class="linenos">563</span></a>                        <span class="n">x_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_future_path</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pos_x</span>
</span><span id="ModelView.update-564"><a href="#ModelView.update-564"><span class="linenos">564</span></a>                        <span class="n">y_pos</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_future_path</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pos_y</span>
</span><span id="ModelView.update-565"><a href="#ModelView.update-565"><span class="linenos">565</span></a>
</span><span id="ModelView.update-566"><a href="#ModelView.update-566"><span class="linenos">566</span></a>                        <span class="n">pen</span> <span class="o">=</span> <span class="n">QPen</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">get_color</span><span class="p">())</span>
</span><span id="ModelView.update-567"><a href="#ModelView.update-567"><span class="linenos">567</span></a>                        <span class="n">pen</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="p">)</span>
</span><span id="ModelView.update-568"><a href="#ModelView.update-568"><span class="linenos">568</span></a>                        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">get_highlighted</span><span class="p">():</span>
</span><span id="ModelView.update-569"><a href="#ModelView.update-569"><span class="linenos">569</span></a>                            <span class="n">pen</span> <span class="o">=</span> <span class="n">QPen</span><span class="p">(</span><span class="n">color_future_path_highlighted</span><span class="p">)</span>      
</span><span id="ModelView.update-570"><a href="#ModelView.update-570"><span class="linenos">570</span></a>                            <span class="n">pen</span><span class="o">.</span><span class="n">setWidth</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_border_size</span><span class="o">*</span><span class="mi">3</span><span class="p">)</span>
</span><span id="ModelView.update-571"><a href="#ModelView.update-571"><span class="linenos">571</span></a>
</span><span id="ModelView.update-572"><a href="#ModelView.update-572"><span class="linenos">572</span></a>                        <span class="k">if</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">4</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ModelView.update-573"><a href="#ModelView.update-573"><span class="linenos">573</span></a>                            <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DotLine</span><span class="p">)</span>
</span><span id="ModelView.update-574"><a href="#ModelView.update-574"><span class="linenos">574</span></a>                        <span class="k">elif</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ModelView.update-575"><a href="#ModelView.update-575"><span class="linenos">575</span></a>                            <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DashDotDotLine</span><span class="p">)</span>
</span><span id="ModelView.update-576"><a href="#ModelView.update-576"><span class="linenos">576</span></a>                        <span class="k">elif</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ModelView.update-577"><a href="#ModelView.update-577"><span class="linenos">577</span></a>                            <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DashDotLine</span><span class="p">)</span>           
</span><span id="ModelView.update-578"><a href="#ModelView.update-578"><span class="linenos">578</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="ModelView.update-579"><a href="#ModelView.update-579"><span class="linenos">579</span></a>                            <span class="n">pen</span><span class="o">.</span><span class="n">setStyle</span><span class="p">(</span><span class="n">Qt</span><span class="o">.</span><span class="n">DashLine</span><span class="p">)</span>           
</span><span id="ModelView.update-580"><a href="#ModelView.update-580"><span class="linenos">580</span></a>
</span><span id="ModelView.update-581"><a href="#ModelView.update-581"><span class="linenos">581</span></a>                        <span class="n">first</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ModelView.update-582"><a href="#ModelView.update-582"><span class="linenos">582</span></a>                        <span class="k">for</span> <span class="n">position</span> <span class="ow">in</span> <span class="n">item</span><span class="o">.</span><span class="n">get_future_path</span><span class="p">()[</span><span class="mi">1</span><span class="p">:]:</span>
</span><span id="ModelView.update-583"><a href="#ModelView.update-583"><span class="linenos">583</span></a>
</span><span id="ModelView.update-584"><a href="#ModelView.update-584"><span class="linenos">584</span></a>                            <span class="k">if</span> <span class="n">position</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ModelView.update-585"><a href="#ModelView.update-585"><span class="linenos">585</span></a>                                <span class="k">break</span>
</span><span id="ModelView.update-586"><a href="#ModelView.update-586"><span class="linenos">586</span></a>
</span><span id="ModelView.update-587"><a href="#ModelView.update-587"><span class="linenos">587</span></a>                            <span class="n">x2_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">position</span><span class="o">.</span><span class="n">pos_x</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView.update-588"><a href="#ModelView.update-588"><span class="linenos">588</span></a>                            <span class="n">y2_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">position</span><span class="o">.</span><span class="n">pos_y</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView.update-589"><a href="#ModelView.update-589"><span class="linenos">589</span></a>                        
</span><span id="ModelView.update-590"><a href="#ModelView.update-590"><span class="linenos">590</span></a>                            <span class="k">if</span> <span class="n">first</span><span class="p">:</span>
</span><span id="ModelView.update-591"><a href="#ModelView.update-591"><span class="linenos">591</span></a>                                <span class="n">first</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="ModelView.update-592"><a href="#ModelView.update-592"><span class="linenos">592</span></a>                                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="ModelView.update-593"><a href="#ModelView.update-593"><span class="linenos">593</span></a>                                    <span class="n">x_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_pos</span><span class="o">-</span><span class="mf">0.5</span><span class="o">+</span><span class="p">(</span><span class="n">position</span><span class="o">.</span><span class="n">pos_x</span><span class="o">-</span><span class="n">x_pos</span><span class="p">)</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span><span class="p">)</span>
</span><span id="ModelView.update-594"><a href="#ModelView.update-594"><span class="linenos">594</span></a>                                                                                        <span class="p">))</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView.update-595"><a href="#ModelView.update-595"><span class="linenos">595</span></a>                                    <span class="n">y_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_pos</span><span class="o">-</span><span class="mf">0.5</span><span class="o">+</span><span class="p">(</span><span class="n">position</span><span class="o">.</span><span class="n">pos_y</span><span class="o">-</span><span class="n">y_pos</span><span class="p">)</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span><span class="p">)</span>
</span><span id="ModelView.update-596"><a href="#ModelView.update-596"><span class="linenos">596</span></a>                                                                                        <span class="p">))</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView.update-597"><a href="#ModelView.update-597"><span class="linenos">597</span></a>                                <span class="k">else</span><span class="p">:</span>
</span><span id="ModelView.update-598"><a href="#ModelView.update-598"><span class="linenos">598</span></a>                                    <span class="n">x_posf</span> <span class="o">=</span> <span class="n">x2_posf</span>
</span><span id="ModelView.update-599"><a href="#ModelView.update-599"><span class="linenos">599</span></a>                                    <span class="n">y_posf</span> <span class="o">=</span> <span class="n">y2_posf</span>
</span><span id="ModelView.update-600"><a href="#ModelView.update-600"><span class="linenos">600</span></a>                                
</span><span id="ModelView.update-601"><a href="#ModelView.update-601"><span class="linenos">601</span></a>                            <span class="k">else</span><span class="p">:</span>
</span><span id="ModelView.update-602"><a href="#ModelView.update-602"><span class="linenos">602</span></a>                                <span class="n">x_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">x_pos</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_w_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView.update-603"><a href="#ModelView.update-603"><span class="linenos">603</span></a>                                <span class="n">y_posf</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_pos</span><span class="o">-</span><span class="mf">0.5</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_h_distance</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_scaling</span>
</span><span id="ModelView.update-604"><a href="#ModelView.update-604"><span class="linenos">604</span></a>
</span><span id="ModelView.update-605"><a href="#ModelView.update-605"><span class="linenos">605</span></a>                            <span class="n">x_pos</span> <span class="o">=</span> <span class="n">position</span><span class="o">.</span><span class="n">pos_x</span>
</span><span id="ModelView.update-606"><a href="#ModelView.update-606"><span class="linenos">606</span></a>                            <span class="n">y_pos</span> <span class="o">=</span> <span class="n">position</span><span class="o">.</span><span class="n">pos_y</span>
</span><span id="ModelView.update-607"><a href="#ModelView.update-607"><span class="linenos">607</span></a>                            
</span><span id="ModelView.update-608"><a href="#ModelView.update-608"><span class="linenos">608</span></a>                            <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addLine</span><span class="p">(</span><span class="n">x_posf</span><span class="p">,</span> <span class="n">y_posf</span><span class="p">,</span> <span class="n">x2_posf</span><span class="p">,</span> <span class="n">y2_posf</span><span class="p">,</span> <span class="n">pen</span><span class="p">)</span>
</span><span id="ModelView.update-609"><a href="#ModelView.update-609"><span class="linenos">609</span></a>                            <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="ModelView.update-610"><a href="#ModelView.update-610"><span class="linenos">610</span></a>                            <span class="n">first</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="ModelView.update-611"><a href="#ModelView.update-611"><span class="linenos">611</span></a>
</span><span id="ModelView.update-612"><a href="#ModelView.update-612"><span class="linenos">612</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="ModelView.update-613"><a href="#ModelView.update-613"><span class="linenos">613</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="ModelView.update-614"><a href="#ModelView.update-614"><span class="linenos">614</span></a>                <span class="n">number</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="ModelView.update-615"><a href="#ModelView.update-615"><span class="linenos">615</span></a>                
</span><span id="ModelView.update-616"><a href="#ModelView.update-616"><span class="linenos">616</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update_windows</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>This function draws the map, the items and other elements in the window. </p>

<p>Following elements will be plotted:</p>

<ul>
<li>vertical and horizontal lines</li>
<li>disabled nodes (=blocked spots)</li>
<li>every graphic item in the model</li>
</ul>

<p>Following elements are optional and will be plotted only if activated by the user:</p>

<ul>
<li>start points of the items</li>
<li>driven path by the items</li>
<li>future/calculated path for the items</li>
</ul>
</div>


                            </div>
                            <div id="ModelView.update_model" class="classattr">
                                        <input id="ModelView.update_model-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">update_model</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">forced</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.update_model-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.update_model"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.update_model-618"><a href="#ModelView.update_model-618"><span class="linenos">618</span></a>    <span class="k">def</span> <span class="nf">update_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">forced</span><span class="p">):</span>
</span><span id="ModelView.update_model-619"><a href="#ModelView.update_model-619"><span class="linenos">619</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView.update_model-620"><a href="#ModelView.update_model-620"><span class="linenos">620</span></a><span class="sd">        This function will be called every time the timer is running out. </span>
</span><span id="ModelView.update_model-621"><a href="#ModelView.update_model-621"><span class="linenos">621</span></a><span class="sd">        The function changes the state of this class depending on </span>
</span><span id="ModelView.update_model-622"><a href="#ModelView.update_model-622"><span class="linenos">622</span></a><span class="sd">        the actual state of this class and the data received by the model through ROS2. </span>
</span><span id="ModelView.update_model-623"><a href="#ModelView.update_model-623"><span class="linenos">623</span></a><span class="sd">        Depending on the state of this class different actions will be performed by the model.</span>
</span><span id="ModelView.update_model-624"><a href="#ModelView.update_model-624"><span class="linenos">624</span></a><span class="sd">        </span>
</span><span id="ModelView.update_model-625"><a href="#ModelView.update_model-625"><span class="linenos">625</span></a><span class="sd">        Following states are accepted: </span>
</span><span id="ModelView.update_model-626"><a href="#ModelView.update_model-626"><span class="linenos">626</span></a><span class="sd">        -   PUBLISH: model sends information about the map (MapInfo.msg) and every robot (RobotInfo.msg) to the CONTROLLER</span>
</span><span id="ModelView.update_model-627"><a href="#ModelView.update_model-627"><span class="linenos">627</span></a><span class="sd">        -   WAIT:    no action until the model has received all information about the next actions from the CONTROLLER</span>
</span><span id="ModelView.update_model-628"><a href="#ModelView.update_model-628"><span class="linenos">628</span></a><span class="sd">        -   EXEC:    modelView executes all received actions from the CONTROLLER by the model for the next step incrementally.</span>
</span><span id="ModelView.update_model-629"><a href="#ModelView.update_model-629"><span class="linenos">629</span></a><span class="sd">                     After completing the step by the modelview the model will be updated with new positions of the robots and </span>
</span><span id="ModelView.update_model-630"><a href="#ModelView.update_model-630"><span class="linenos">630</span></a><span class="sd">                     the simulation changes it&#39;s state to PUBLISH again!</span>
</span><span id="ModelView.update_model-631"><a href="#ModelView.update_model-631"><span class="linenos">631</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView.update_model-632"><a href="#ModelView.update_model-632"><span class="linenos">632</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> 
</span><span id="ModelView.update_model-633"><a href="#ModelView.update_model-633"><span class="linenos">633</span></a>            <span class="k">return</span>        
</span><span id="ModelView.update_model-634"><a href="#ModelView.update_model-634"><span class="linenos">634</span></a>                
</span><span id="ModelView.update_model-635"><a href="#ModelView.update_model-635"><span class="linenos">635</span></a>        <span class="c1">#STATE 0: PUBLISH ROS MESSAGES</span>
</span><span id="ModelView.update_model-636"><a href="#ModelView.update_model-636"><span class="linenos">636</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="n">PUBLISH</span><span class="p">:</span>
</span><span id="ModelView.update_model-637"><a href="#ModelView.update_model-637"><span class="linenos">637</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MODE: PUBLISH INFO (MapInfo.msg and RobotInfo.msg)&quot;</span><span class="p">)</span>    
</span><span id="ModelView.update_model-638"><a href="#ModelView.update_model-638"><span class="linenos">638</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">mapf_init_next_step</span><span class="p">()</span>
</span><span id="ModelView.update_model-639"><a href="#ModelView.update_model-639"><span class="linenos">639</span></a>            <span class="c1">#set time for next timeout, after timeout come back</span>
</span><span id="ModelView.update_model-640"><a href="#ModelView.update_model-640"><span class="linenos">640</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_timeout_end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_next_ros_timeout</span><span class="p">()</span>
</span><span id="ModelView.update_model-641"><a href="#ModelView.update_model-641"><span class="linenos">641</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">WAIT</span>
</span><span id="ModelView.update_model-642"><a href="#ModelView.update_model-642"><span class="linenos">642</span></a>            
</span><span id="ModelView.update_model-643"><a href="#ModelView.update_model-643"><span class="linenos">643</span></a>        <span class="c1">#STATE 1: UPDATE, WAIT</span>
</span><span id="ModelView.update_model-644"><a href="#ModelView.update_model-644"><span class="linenos">644</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="n">WAIT</span><span class="p">:</span>
</span><span id="ModelView.update_model-645"><a href="#ModelView.update_model-645"><span class="linenos">645</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MODE: WAITING (for RobotAction.msg)&quot;</span><span class="p">)</span>    
</span><span id="ModelView.update_model-646"><a href="#ModelView.update_model-646"><span class="linenos">646</span></a>            <span class="n">simulation_ready</span><span class="p">,</span> <span class="n">timeout</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">mapf_spin_once</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_timeout_end</span><span class="p">)</span>        
</span><span id="ModelView.update_model-647"><a href="#ModelView.update_model-647"><span class="linenos">647</span></a>            <span class="k">if</span> <span class="n">simulation_ready</span><span class="p">:</span>
</span><span id="ModelView.update_model-648"><a href="#ModelView.update_model-648"><span class="linenos">648</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">EXEC</span>
</span><span id="ModelView.update_model-649"><a href="#ModelView.update_model-649"><span class="linenos">649</span></a>            <span class="k">elif</span> <span class="n">timeout</span><span class="p">:</span>
</span><span id="ModelView.update_model-650"><a href="#ModelView.update_model-650"><span class="linenos">650</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">PUBLISH</span>
</span><span id="ModelView.update_model-651"><a href="#ModelView.update_model-651"><span class="linenos">651</span></a>                
</span><span id="ModelView.update_model-652"><a href="#ModelView.update_model-652"><span class="linenos">652</span></a>        <span class="c1">#STATE 2: EXECUTE ONE STEP</span>
</span><span id="ModelView.update_model-653"><a href="#ModelView.update_model-653"><span class="linenos">653</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="n">EXEC</span><span class="p">:</span>
</span><span id="ModelView.update_model-654"><a href="#ModelView.update_model-654"><span class="linenos">654</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MODE: EXEC (moving robots)&quot;</span><span class="p">)</span>    
</span><span id="ModelView.update_model-655"><a href="#ModelView.update_model-655"><span class="linenos">655</span></a>            <span class="c1">#if self._timer_count &gt;= 10 or forced:</span>
</span><span id="ModelView.update_model-656"><a href="#ModelView.update_model-656"><span class="linenos">656</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count_max</span> <span class="ow">or</span> <span class="n">forced</span><span class="p">:</span>
</span><span id="ModelView.update_model-657"><a href="#ModelView.update_model-657"><span class="linenos">657</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span><span id="ModelView.update_model-658"><a href="#ModelView.update_model-658"><span class="linenos">658</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="ModelView.update_model-659"><a href="#ModelView.update_model-659"><span class="linenos">659</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_timeout_end</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_next_ros_timeout</span><span class="p">()</span>
</span><span id="ModelView.update_model-660"><a href="#ModelView.update_model-660"><span class="linenos">660</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">PUBLISH</span>
</span><span id="ModelView.update_model-661"><a href="#ModelView.update_model-661"><span class="linenos">661</span></a>            <span class="k">else</span><span class="p">:</span> 
</span><span id="ModelView.update_model-662"><a href="#ModelView.update_model-662"><span class="linenos">662</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">_timer_count</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="ModelView.update_model-663"><a href="#ModelView.update_model-663"><span class="linenos">663</span></a>    
</span><span id="ModelView.update_model-664"><a href="#ModelView.update_model-664"><span class="linenos">664</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>This function will be called every time the timer is running out. 
The function changes the state of this class depending on 
the actual state of this class and the data received by the model through ROS2. 
Depending on the state of this class different actions will be performed by the model.</p>

<p>Following states are accepted: </p>

<ul>
<li>PUBLISH: model sends information about the map (MapInfo.msg) and every robot (RobotInfo.msg) to the CONTROLLER</li>
<li>WAIT:    no action until the model has received all information about the next actions from the CONTROLLER</li>
<li>EXEC:    modelView executes all received actions from the CONTROLLER by the model for the next step incrementally.
After completing the step by the modelview the model will be updated with new positions of the robots and 
the simulation changes it's state to PUBLISH again!</li>
</ul>
</div>


                            </div>
                            <div id="ModelView.do_model" class="classattr">
                                        <input id="ModelView.do_model-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">do_model</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.do_model-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.do_model"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.do_model-666"><a href="#ModelView.do_model-666"><span class="linenos">666</span></a>    <span class="k">def</span> <span class="nf">do_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView.do_model-667"><a href="#ModelView.do_model-667"><span class="linenos">667</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView.do_model-668"><a href="#ModelView.do_model-668"><span class="linenos">668</span></a><span class="sd">        This function performs a step forward when the button &quot;&gt;&quot; in the GUI was pressed</span>
</span><span id="ModelView.do_model-669"><a href="#ModelView.do_model-669"><span class="linenos">669</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView.do_model-670"><a href="#ModelView.do_model-670"><span class="linenos">670</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span> 
</span><span id="ModelView.do_model-671"><a href="#ModelView.do_model-671"><span class="linenos">671</span></a>            <span class="k">return</span>
</span><span id="ModelView.do_model-672"><a href="#ModelView.do_model-672"><span class="linenos">672</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">redo</span><span class="p">()</span>
</span><span id="ModelView.do_model-673"><a href="#ModelView.do_model-673"><span class="linenos">673</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span> 
</span></pre></div>


            <div class="docstring"><p>This function performs a step forward when the button ">" in the GUI was pressed</p>
</div>


                            </div>
                            <div id="ModelView.undo_model" class="classattr">
                                        <input id="ModelView.undo_model-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">undo_model</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.undo_model-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.undo_model"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.undo_model-675"><a href="#ModelView.undo_model-675"><span class="linenos">675</span></a>    <span class="k">def</span> <span class="nf">undo_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView.undo_model-676"><a href="#ModelView.undo_model-676"><span class="linenos">676</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView.undo_model-677"><a href="#ModelView.undo_model-677"><span class="linenos">677</span></a><span class="sd">        This function performs a step back when the button &quot;&lt;&quot; in the GUI was pressed</span>
</span><span id="ModelView.undo_model-678"><a href="#ModelView.undo_model-678"><span class="linenos">678</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView.undo_model-679"><a href="#ModelView.undo_model-679"><span class="linenos">679</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span> 
</span><span id="ModelView.undo_model-680"><a href="#ModelView.undo_model-680"><span class="linenos">680</span></a>            <span class="k">return</span>
</span><span id="ModelView.undo_model-681"><a href="#ModelView.undo_model-681"><span class="linenos">681</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_model</span><span class="o">.</span><span class="n">undo</span><span class="p">()</span>
</span><span id="ModelView.undo_model-682"><a href="#ModelView.undo_model-682"><span class="linenos">682</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>This function performs a step back when the button "&lt;" in the GUI was pressed</p>
</div>


                            </div>
                            <div id="ModelView.clear" class="classattr">
                                        <input id="ModelView.clear-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">clear</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.clear-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.clear"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.clear-709"><a href="#ModelView.clear-709"><span class="linenos">709</span></a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView.clear-710"><a href="#ModelView.clear-710"><span class="linenos">710</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView.clear-711"><a href="#ModelView.clear-711"><span class="linenos">711</span></a><span class="sd">        This function removes the items from the window which belong to the previous paint. </span>
</span><span id="ModelView.clear-712"><a href="#ModelView.clear-712"><span class="linenos">712</span></a><span class="sd">        Every time the visualization is updated all old elements are removed from the window. </span>
</span><span id="ModelView.clear-713"><a href="#ModelView.clear-713"><span class="linenos">713</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView.clear-714"><a href="#ModelView.clear-714"><span class="linenos">714</span></a>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lines</span><span class="p">:</span>
</span><span id="ModelView.clear-715"><a href="#ModelView.clear-715"><span class="linenos">715</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</span><span id="ModelView.clear-716"><a href="#ModelView.clear-716"><span class="linenos">716</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_lines</span> <span class="o">=</span> <span class="p">[]</span>        
</span><span id="ModelView.clear-717"><a href="#ModelView.clear-717"><span class="linenos">717</span></a>
</span><span id="ModelView.clear-718"><a href="#ModelView.clear-718"><span class="linenos">718</span></a>        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span><span class="p">:</span>
</span><span id="ModelView.clear-719"><a href="#ModelView.clear-719"><span class="linenos">719</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_scene</span><span class="o">.</span><span class="n">removeItem</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</span><span id="ModelView.clear-720"><a href="#ModelView.clear-720"><span class="linenos">720</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_items_in_scene</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="ModelView.clear-721"><a href="#ModelView.clear-721"><span class="linenos">721</span></a>        <span class="c1">#self._scene.clear()</span>
</span></pre></div>


            <div class="docstring"><p>This function removes the items from the window which belong to the previous paint. 
Every time the visualization is updated all old elements are removed from the window.</p>
</div>


                            </div>
                            <div id="ModelView.get_next_ros_timeout" class="classattr">
                                        <input id="ModelView.get_next_ros_timeout-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">get_next_ros_timeout</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ModelView.get_next_ros_timeout-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ModelView.get_next_ros_timeout"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ModelView.get_next_ros_timeout-750"><a href="#ModelView.get_next_ros_timeout-750"><span class="linenos">750</span></a>    <span class="k">def</span> <span class="nf">get_next_ros_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ModelView.get_next_ros_timeout-751"><a href="#ModelView.get_next_ros_timeout-751"><span class="linenos">751</span></a><span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
</span><span id="ModelView.get_next_ros_timeout-752"><a href="#ModelView.get_next_ros_timeout-752"><span class="linenos">752</span></a><span class="sd">        This function returns the next timeout for ROS2 after which the simulation should move back to the mode PUBLISH.  </span>
</span><span id="ModelView.get_next_ros_timeout-753"><a href="#ModelView.get_next_ros_timeout-753"><span class="linenos">753</span></a><span class="sd">        </span>
</span><span id="ModelView.get_next_ros_timeout-754"><a href="#ModelView.get_next_ros_timeout-754"><span class="linenos">754</span></a><span class="sd">        This timeout is needed in the case the simulation has not received the needed information from the controller after </span>
</span><span id="ModelView.get_next_ros_timeout-755"><a href="#ModelView.get_next_ros_timeout-755"><span class="linenos">755</span></a><span class="sd">        a specific time. In this case the complete cycle should be restarted. </span>
</span><span id="ModelView.get_next_ros_timeout-756"><a href="#ModelView.get_next_ros_timeout-756"><span class="linenos">756</span></a><span class="sd">        This done by the simulation publishing the information about the map and the items once again.</span>
</span><span id="ModelView.get_next_ros_timeout-757"><a href="#ModelView.get_next_ros_timeout-757"><span class="linenos">757</span></a><span class="sd">        &#39;&#39;&#39;</span>
</span><span id="ModelView.get_next_ros_timeout-758"><a href="#ModelView.get_next_ros_timeout-758"><span class="linenos">758</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">+</span> <span class="mi">60</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>This function returns the next timeout for ROS2 after which the simulation should move back to the mode PUBLISH.  </p>

<p>This timeout is needed in the case the simulation has not received the needed information from the controller after 
a specific time. In this case the complete cycle should be restarted. 
This done by the simulation publishing the information about the map and the items once again.</p>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt>PyQt5.QtWidgets.QGraphicsView</dt>
                                <dd id="ModelView.CacheMode" class="class">CacheMode</dd>
                <dd id="ModelView.CacheModeFlag" class="class">CacheModeFlag</dd>
                <dd id="ModelView.DragMode" class="class">DragMode</dd>
                <dd id="ModelView.OptimizationFlag" class="class">OptimizationFlag</dd>
                <dd id="ModelView.OptimizationFlags" class="class">OptimizationFlags</dd>
                <dd id="ModelView.ViewportAnchor" class="class">ViewportAnchor</dd>
                <dd id="ModelView.ViewportUpdateMode" class="class">ViewportUpdateMode</dd>
                <dd id="ModelView.alignment" class="function">alignment</dd>
                <dd id="ModelView.backgroundBrush" class="function">backgroundBrush</dd>
                <dd id="ModelView.cacheMode" class="function">cacheMode</dd>
                <dd id="ModelView.centerOn" class="function">centerOn</dd>
                <dd id="ModelView.dragEnterEvent" class="function">dragEnterEvent</dd>
                <dd id="ModelView.dragLeaveEvent" class="function">dragLeaveEvent</dd>
                <dd id="ModelView.dragMode" class="function">dragMode</dd>
                <dd id="ModelView.dragMoveEvent" class="function">dragMoveEvent</dd>
                <dd id="ModelView.drawBackground" class="function">drawBackground</dd>
                <dd id="ModelView.drawForeground" class="function">drawForeground</dd>
                <dd id="ModelView.dropEvent" class="function">dropEvent</dd>
                <dd id="ModelView.ensureVisible" class="function">ensureVisible</dd>
                <dd id="ModelView.fitInView" class="function">fitInView</dd>
                <dd id="ModelView.focusInEvent" class="function">focusInEvent</dd>
                <dd id="ModelView.focusNextPrevChild" class="function">focusNextPrevChild</dd>
                <dd id="ModelView.focusOutEvent" class="function">focusOutEvent</dd>
                <dd id="ModelView.foregroundBrush" class="function">foregroundBrush</dd>
                <dd id="ModelView.inputMethodEvent" class="function">inputMethodEvent</dd>
                <dd id="ModelView.inputMethodQuery" class="function">inputMethodQuery</dd>
                <dd id="ModelView.invalidateScene" class="function">invalidateScene</dd>
                <dd id="ModelView.isInteractive" class="function">isInteractive</dd>
                <dd id="ModelView.isTransformed" class="function">isTransformed</dd>
                <dd id="ModelView.itemAt" class="function">itemAt</dd>
                <dd id="ModelView.items" class="function">items</dd>
                <dd id="ModelView.keyPressEvent" class="function">keyPressEvent</dd>
                <dd id="ModelView.keyReleaseEvent" class="function">keyReleaseEvent</dd>
                <dd id="ModelView.mapFromScene" class="function">mapFromScene</dd>
                <dd id="ModelView.mapToScene" class="function">mapToScene</dd>
                <dd id="ModelView.mouseDoubleClickEvent" class="function">mouseDoubleClickEvent</dd>
                <dd id="ModelView.mouseMoveEvent" class="function">mouseMoveEvent</dd>
                <dd id="ModelView.mouseReleaseEvent" class="function">mouseReleaseEvent</dd>
                <dd id="ModelView.optimizationFlags" class="function">optimizationFlags</dd>
                <dd id="ModelView.paintEvent" class="function">paintEvent</dd>
                <dd id="ModelView.render" class="function">render</dd>
                <dd id="ModelView.renderHints" class="function">renderHints</dd>
                <dd id="ModelView.resetCachedContent" class="function">resetCachedContent</dd>
                <dd id="ModelView.resetTransform" class="function">resetTransform</dd>
                <dd id="ModelView.resizeAnchor" class="function">resizeAnchor</dd>
                <dd id="ModelView.rotate" class="function">rotate</dd>
                <dd id="ModelView.rubberBandRect" class="function">rubberBandRect</dd>
                <dd id="ModelView.rubberBandSelectionMode" class="function">rubberBandSelectionMode</dd>
                <dd id="ModelView.scale" class="function">scale</dd>
                <dd id="ModelView.scene" class="function">scene</dd>
                <dd id="ModelView.sceneRect" class="function">sceneRect</dd>
                <dd id="ModelView.scrollContentsBy" class="function">scrollContentsBy</dd>
                <dd id="ModelView.setAlignment" class="function">setAlignment</dd>
                <dd id="ModelView.setBackgroundBrush" class="function">setBackgroundBrush</dd>
                <dd id="ModelView.setCacheMode" class="function">setCacheMode</dd>
                <dd id="ModelView.setDragMode" class="function">setDragMode</dd>
                <dd id="ModelView.setForegroundBrush" class="function">setForegroundBrush</dd>
                <dd id="ModelView.setInteractive" class="function">setInteractive</dd>
                <dd id="ModelView.setOptimizationFlag" class="function">setOptimizationFlag</dd>
                <dd id="ModelView.setOptimizationFlags" class="function">setOptimizationFlags</dd>
                <dd id="ModelView.setRenderHint" class="function">setRenderHint</dd>
                <dd id="ModelView.setRenderHints" class="function">setRenderHints</dd>
                <dd id="ModelView.setResizeAnchor" class="function">setResizeAnchor</dd>
                <dd id="ModelView.setRubberBandSelectionMode" class="function">setRubberBandSelectionMode</dd>
                <dd id="ModelView.setScene" class="function">setScene</dd>
                <dd id="ModelView.setSceneRect" class="function">setSceneRect</dd>
                <dd id="ModelView.setTransform" class="function">setTransform</dd>
                <dd id="ModelView.setTransformationAnchor" class="function">setTransformationAnchor</dd>
                <dd id="ModelView.setViewportUpdateMode" class="function">setViewportUpdateMode</dd>
                <dd id="ModelView.setupViewport" class="function">setupViewport</dd>
                <dd id="ModelView.shear" class="function">shear</dd>
                <dd id="ModelView.showEvent" class="function">showEvent</dd>
                <dd id="ModelView.sizeHint" class="function">sizeHint</dd>
                <dd id="ModelView.transform" class="function">transform</dd>
                <dd id="ModelView.transformationAnchor" class="function">transformationAnchor</dd>
                <dd id="ModelView.translate" class="function">translate</dd>
                <dd id="ModelView.updateScene" class="function">updateScene</dd>
                <dd id="ModelView.updateSceneRect" class="function">updateSceneRect</dd>
                <dd id="ModelView.viewportEvent" class="function">viewportEvent</dd>
                <dd id="ModelView.viewportTransform" class="function">viewportTransform</dd>
                <dd id="ModelView.viewportUpdateMode" class="function">viewportUpdateMode</dd>
                <dd id="ModelView.AnchorUnderMouse" class="variable">AnchorUnderMouse</dd>
                <dd id="ModelView.AnchorViewCenter" class="variable">AnchorViewCenter</dd>
                <dd id="ModelView.BoundingRectViewportUpdate" class="variable">BoundingRectViewportUpdate</dd>
                <dd id="ModelView.CacheBackground" class="variable">CacheBackground</dd>
                <dd id="ModelView.CacheNone" class="variable">CacheNone</dd>
                <dd id="ModelView.DontAdjustForAntialiasing" class="variable">DontAdjustForAntialiasing</dd>
                <dd id="ModelView.DontClipPainter" class="variable">DontClipPainter</dd>
                <dd id="ModelView.DontSavePainterState" class="variable">DontSavePainterState</dd>
                <dd id="ModelView.FullViewportUpdate" class="variable">FullViewportUpdate</dd>
                <dd id="ModelView.MinimalViewportUpdate" class="variable">MinimalViewportUpdate</dd>
                <dd id="ModelView.NoAnchor" class="variable">NoAnchor</dd>
                <dd id="ModelView.NoDrag" class="variable">NoDrag</dd>
                <dd id="ModelView.NoViewportUpdate" class="variable">NoViewportUpdate</dd>
                <dd id="ModelView.RubberBandDrag" class="variable">RubberBandDrag</dd>
                <dd id="ModelView.ScrollHandDrag" class="variable">ScrollHandDrag</dd>
                <dd id="ModelView.SmartViewportUpdate" class="variable">SmartViewportUpdate</dd>
                <dd id="ModelView.rubberBandChanged" class="function">rubberBandChanged</dd>

            </div>
            <div><dt>PyQt5.QtWidgets.QAbstractScrollArea</dt>
                                <dd id="ModelView.SizeAdjustPolicy" class="class">SizeAdjustPolicy</dd>
                <dd id="ModelView.addScrollBarWidget" class="function">addScrollBarWidget</dd>
                <dd id="ModelView.cornerWidget" class="function">cornerWidget</dd>
                <dd id="ModelView.eventFilter" class="function">eventFilter</dd>
                <dd id="ModelView.horizontalScrollBar" class="function">horizontalScrollBar</dd>
                <dd id="ModelView.horizontalScrollBarPolicy" class="function">horizontalScrollBarPolicy</dd>
                <dd id="ModelView.maximumViewportSize" class="function">maximumViewportSize</dd>
                <dd id="ModelView.minimumSizeHint" class="function">minimumSizeHint</dd>
                <dd id="ModelView.scrollBarWidgets" class="function">scrollBarWidgets</dd>
                <dd id="ModelView.setCornerWidget" class="function">setCornerWidget</dd>
                <dd id="ModelView.setHorizontalScrollBar" class="function">setHorizontalScrollBar</dd>
                <dd id="ModelView.setHorizontalScrollBarPolicy" class="function">setHorizontalScrollBarPolicy</dd>
                <dd id="ModelView.setSizeAdjustPolicy" class="function">setSizeAdjustPolicy</dd>
                <dd id="ModelView.setVerticalScrollBar" class="function">setVerticalScrollBar</dd>
                <dd id="ModelView.setVerticalScrollBarPolicy" class="function">setVerticalScrollBarPolicy</dd>
                <dd id="ModelView.setViewport" class="function">setViewport</dd>
                <dd id="ModelView.setViewportMargins" class="function">setViewportMargins</dd>
                <dd id="ModelView.sizeAdjustPolicy" class="function">sizeAdjustPolicy</dd>
                <dd id="ModelView.verticalScrollBar" class="function">verticalScrollBar</dd>
                <dd id="ModelView.verticalScrollBarPolicy" class="function">verticalScrollBarPolicy</dd>
                <dd id="ModelView.viewport" class="function">viewport</dd>
                <dd id="ModelView.viewportMargins" class="function">viewportMargins</dd>
                <dd id="ModelView.viewportSizeHint" class="function">viewportSizeHint</dd>
                <dd id="ModelView.AdjustIgnored" class="variable">AdjustIgnored</dd>
                <dd id="ModelView.AdjustToContents" class="variable">AdjustToContents</dd>
                <dd id="ModelView.AdjustToContentsOnFirstShow" class="variable">AdjustToContentsOnFirstShow</dd>

            </div>
            <div><dt>PyQt5.QtWidgets.QFrame</dt>
                                <dd id="ModelView.Shadow" class="class">Shadow</dd>
                <dd id="ModelView.Shape" class="class">Shape</dd>
                <dd id="ModelView.StyleMask" class="class">StyleMask</dd>
                <dd id="ModelView.changeEvent" class="function">changeEvent</dd>
                <dd id="ModelView.drawFrame" class="function">drawFrame</dd>
                <dd id="ModelView.frameRect" class="function">frameRect</dd>
                <dd id="ModelView.frameShadow" class="function">frameShadow</dd>
                <dd id="ModelView.frameShape" class="function">frameShape</dd>
                <dd id="ModelView.frameStyle" class="function">frameStyle</dd>
                <dd id="ModelView.frameWidth" class="function">frameWidth</dd>
                <dd id="ModelView.initStyleOption" class="function">initStyleOption</dd>
                <dd id="ModelView.lineWidth" class="function">lineWidth</dd>
                <dd id="ModelView.midLineWidth" class="function">midLineWidth</dd>
                <dd id="ModelView.setFrameRect" class="function">setFrameRect</dd>
                <dd id="ModelView.setFrameShadow" class="function">setFrameShadow</dd>
                <dd id="ModelView.setFrameShape" class="function">setFrameShape</dd>
                <dd id="ModelView.setFrameStyle" class="function">setFrameStyle</dd>
                <dd id="ModelView.setLineWidth" class="function">setLineWidth</dd>
                <dd id="ModelView.setMidLineWidth" class="function">setMidLineWidth</dd>
                <dd id="ModelView.Box" class="variable">Box</dd>
                <dd id="ModelView.HLine" class="variable">HLine</dd>
                <dd id="ModelView.NoFrame" class="variable">NoFrame</dd>
                <dd id="ModelView.Panel" class="variable">Panel</dd>
                <dd id="ModelView.Plain" class="variable">Plain</dd>
                <dd id="ModelView.Raised" class="variable">Raised</dd>
                <dd id="ModelView.Shadow_Mask" class="variable">Shadow_Mask</dd>
                <dd id="ModelView.Shape_Mask" class="variable">Shape_Mask</dd>
                <dd id="ModelView.StyledPanel" class="variable">StyledPanel</dd>
                <dd id="ModelView.Sunken" class="variable">Sunken</dd>
                <dd id="ModelView.VLine" class="variable">VLine</dd>
                <dd id="ModelView.WinPanel" class="variable">WinPanel</dd>

            </div>
            <div><dt>PyQt5.QtWidgets.QWidget</dt>
                                <dd id="ModelView.RenderFlag" class="class">RenderFlag</dd>
                <dd id="ModelView.RenderFlags" class="class">RenderFlags</dd>
                <dd id="ModelView.acceptDrops" class="function">acceptDrops</dd>
                <dd id="ModelView.accessibleDescription" class="function">accessibleDescription</dd>
                <dd id="ModelView.accessibleName" class="function">accessibleName</dd>
                <dd id="ModelView.actionEvent" class="function">actionEvent</dd>
                <dd id="ModelView.actions" class="function">actions</dd>
                <dd id="ModelView.activateWindow" class="function">activateWindow</dd>
                <dd id="ModelView.addAction" class="function">addAction</dd>
                <dd id="ModelView.addActions" class="function">addActions</dd>
                <dd id="ModelView.adjustSize" class="function">adjustSize</dd>
                <dd id="ModelView.autoFillBackground" class="function">autoFillBackground</dd>
                <dd id="ModelView.backgroundRole" class="function">backgroundRole</dd>
                <dd id="ModelView.baseSize" class="function">baseSize</dd>
                <dd id="ModelView.childAt" class="function">childAt</dd>
                <dd id="ModelView.childrenRect" class="function">childrenRect</dd>
                <dd id="ModelView.childrenRegion" class="function">childrenRegion</dd>
                <dd id="ModelView.clearFocus" class="function">clearFocus</dd>
                <dd id="ModelView.clearMask" class="function">clearMask</dd>
                <dd id="ModelView.close" class="function">close</dd>
                <dd id="ModelView.closeEvent" class="function">closeEvent</dd>
                <dd id="ModelView.contentsMargins" class="function">contentsMargins</dd>
                <dd id="ModelView.contentsRect" class="function">contentsRect</dd>
                <dd id="ModelView.contextMenuPolicy" class="function">contextMenuPolicy</dd>
                <dd id="ModelView.create" class="function">create</dd>
                <dd id="ModelView.createWindowContainer" class="function">createWindowContainer</dd>
                <dd id="ModelView.cursor" class="function">cursor</dd>
                <dd id="ModelView.destroy" class="function">destroy</dd>
                <dd id="ModelView.devType" class="function">devType</dd>
                <dd id="ModelView.effectiveWinId" class="function">effectiveWinId</dd>
                <dd id="ModelView.ensurePolished" class="function">ensurePolished</dd>
                <dd id="ModelView.enterEvent" class="function">enterEvent</dd>
                <dd id="ModelView.find" class="function">find</dd>
                <dd id="ModelView.focusNextChild" class="function">focusNextChild</dd>
                <dd id="ModelView.focusPolicy" class="function">focusPolicy</dd>
                <dd id="ModelView.focusPreviousChild" class="function">focusPreviousChild</dd>
                <dd id="ModelView.focusProxy" class="function">focusProxy</dd>
                <dd id="ModelView.focusWidget" class="function">focusWidget</dd>
                <dd id="ModelView.font" class="function">font</dd>
                <dd id="ModelView.fontInfo" class="function">fontInfo</dd>
                <dd id="ModelView.fontMetrics" class="function">fontMetrics</dd>
                <dd id="ModelView.foregroundRole" class="function">foregroundRole</dd>
                <dd id="ModelView.frameGeometry" class="function">frameGeometry</dd>
                <dd id="ModelView.frameSize" class="function">frameSize</dd>
                <dd id="ModelView.geometry" class="function">geometry</dd>
                <dd id="ModelView.getContentsMargins" class="function">getContentsMargins</dd>
                <dd id="ModelView.grab" class="function">grab</dd>
                <dd id="ModelView.grabGesture" class="function">grabGesture</dd>
                <dd id="ModelView.grabKeyboard" class="function">grabKeyboard</dd>
                <dd id="ModelView.grabMouse" class="function">grabMouse</dd>
                <dd id="ModelView.grabShortcut" class="function">grabShortcut</dd>
                <dd id="ModelView.graphicsEffect" class="function">graphicsEffect</dd>
                <dd id="ModelView.graphicsProxyWidget" class="function">graphicsProxyWidget</dd>
                <dd id="ModelView.hasFocus" class="function">hasFocus</dd>
                <dd id="ModelView.hasHeightForWidth" class="function">hasHeightForWidth</dd>
                <dd id="ModelView.hasMouseTracking" class="function">hasMouseTracking</dd>
                <dd id="ModelView.hasTabletTracking" class="function">hasTabletTracking</dd>
                <dd id="ModelView.height" class="function">height</dd>
                <dd id="ModelView.heightForWidth" class="function">heightForWidth</dd>
                <dd id="ModelView.hide" class="function">hide</dd>
                <dd id="ModelView.hideEvent" class="function">hideEvent</dd>
                <dd id="ModelView.initPainter" class="function">initPainter</dd>
                <dd id="ModelView.inputMethodHints" class="function">inputMethodHints</dd>
                <dd id="ModelView.insertAction" class="function">insertAction</dd>
                <dd id="ModelView.insertActions" class="function">insertActions</dd>
                <dd id="ModelView.isActiveWindow" class="function">isActiveWindow</dd>
                <dd id="ModelView.isAncestorOf" class="function">isAncestorOf</dd>
                <dd id="ModelView.isEnabled" class="function">isEnabled</dd>
                <dd id="ModelView.isEnabledTo" class="function">isEnabledTo</dd>
                <dd id="ModelView.isFullScreen" class="function">isFullScreen</dd>
                <dd id="ModelView.isHidden" class="function">isHidden</dd>
                <dd id="ModelView.isLeftToRight" class="function">isLeftToRight</dd>
                <dd id="ModelView.isMaximized" class="function">isMaximized</dd>
                <dd id="ModelView.isMinimized" class="function">isMinimized</dd>
                <dd id="ModelView.isModal" class="function">isModal</dd>
                <dd id="ModelView.isRightToLeft" class="function">isRightToLeft</dd>
                <dd id="ModelView.isVisible" class="function">isVisible</dd>
                <dd id="ModelView.isVisibleTo" class="function">isVisibleTo</dd>
                <dd id="ModelView.isWindow" class="function">isWindow</dd>
                <dd id="ModelView.isWindowModified" class="function">isWindowModified</dd>
                <dd id="ModelView.keyboardGrabber" class="function">keyboardGrabber</dd>
                <dd id="ModelView.layout" class="function">layout</dd>
                <dd id="ModelView.layoutDirection" class="function">layoutDirection</dd>
                <dd id="ModelView.leaveEvent" class="function">leaveEvent</dd>
                <dd id="ModelView.locale" class="function">locale</dd>
                <dd id="ModelView.lower" class="function">lower</dd>
                <dd id="ModelView.mapFrom" class="function">mapFrom</dd>
                <dd id="ModelView.mapFromGlobal" class="function">mapFromGlobal</dd>
                <dd id="ModelView.mapFromParent" class="function">mapFromParent</dd>
                <dd id="ModelView.mapTo" class="function">mapTo</dd>
                <dd id="ModelView.mapToGlobal" class="function">mapToGlobal</dd>
                <dd id="ModelView.mapToParent" class="function">mapToParent</dd>
                <dd id="ModelView.mask" class="function">mask</dd>
                <dd id="ModelView.maximumHeight" class="function">maximumHeight</dd>
                <dd id="ModelView.maximumSize" class="function">maximumSize</dd>
                <dd id="ModelView.maximumWidth" class="function">maximumWidth</dd>
                <dd id="ModelView.metric" class="function">metric</dd>
                <dd id="ModelView.minimumHeight" class="function">minimumHeight</dd>
                <dd id="ModelView.minimumSize" class="function">minimumSize</dd>
                <dd id="ModelView.minimumWidth" class="function">minimumWidth</dd>
                <dd id="ModelView.mouseGrabber" class="function">mouseGrabber</dd>
                <dd id="ModelView.move" class="function">move</dd>
                <dd id="ModelView.moveEvent" class="function">moveEvent</dd>
                <dd id="ModelView.nativeEvent" class="function">nativeEvent</dd>
                <dd id="ModelView.nativeParentWidget" class="function">nativeParentWidget</dd>
                <dd id="ModelView.nextInFocusChain" class="function">nextInFocusChain</dd>
                <dd id="ModelView.normalGeometry" class="function">normalGeometry</dd>
                <dd id="ModelView.overrideWindowFlags" class="function">overrideWindowFlags</dd>
                <dd id="ModelView.overrideWindowState" class="function">overrideWindowState</dd>
                <dd id="ModelView.paintEngine" class="function">paintEngine</dd>
                <dd id="ModelView.palette" class="function">palette</dd>
                <dd id="ModelView.parentWidget" class="function">parentWidget</dd>
                <dd id="ModelView.pos" class="function">pos</dd>
                <dd id="ModelView.previousInFocusChain" class="function">previousInFocusChain</dd>
                <dd id="ModelView.raise_" class="function">raise_</dd>
                <dd id="ModelView.rect" class="function">rect</dd>
                <dd id="ModelView.releaseKeyboard" class="function">releaseKeyboard</dd>
                <dd id="ModelView.releaseMouse" class="function">releaseMouse</dd>
                <dd id="ModelView.releaseShortcut" class="function">releaseShortcut</dd>
                <dd id="ModelView.removeAction" class="function">removeAction</dd>
                <dd id="ModelView.repaint" class="function">repaint</dd>
                <dd id="ModelView.resize" class="function">resize</dd>
                <dd id="ModelView.restoreGeometry" class="function">restoreGeometry</dd>
                <dd id="ModelView.saveGeometry" class="function">saveGeometry</dd>
                <dd id="ModelView.scroll" class="function">scroll</dd>
                <dd id="ModelView.setAcceptDrops" class="function">setAcceptDrops</dd>
                <dd id="ModelView.setAccessibleDescription" class="function">setAccessibleDescription</dd>
                <dd id="ModelView.setAccessibleName" class="function">setAccessibleName</dd>
                <dd id="ModelView.setAttribute" class="function">setAttribute</dd>
                <dd id="ModelView.setAutoFillBackground" class="function">setAutoFillBackground</dd>
                <dd id="ModelView.setBackgroundRole" class="function">setBackgroundRole</dd>
                <dd id="ModelView.setBaseSize" class="function">setBaseSize</dd>
                <dd id="ModelView.setContentsMargins" class="function">setContentsMargins</dd>
                <dd id="ModelView.setContextMenuPolicy" class="function">setContextMenuPolicy</dd>
                <dd id="ModelView.setCursor" class="function">setCursor</dd>
                <dd id="ModelView.setDisabled" class="function">setDisabled</dd>
                <dd id="ModelView.setEnabled" class="function">setEnabled</dd>
                <dd id="ModelView.setFixedHeight" class="function">setFixedHeight</dd>
                <dd id="ModelView.setFixedSize" class="function">setFixedSize</dd>
                <dd id="ModelView.setFixedWidth" class="function">setFixedWidth</dd>
                <dd id="ModelView.setFocus" class="function">setFocus</dd>
                <dd id="ModelView.setFocusPolicy" class="function">setFocusPolicy</dd>
                <dd id="ModelView.setFocusProxy" class="function">setFocusProxy</dd>
                <dd id="ModelView.setFont" class="function">setFont</dd>
                <dd id="ModelView.setForegroundRole" class="function">setForegroundRole</dd>
                <dd id="ModelView.setGeometry" class="function">setGeometry</dd>
                <dd id="ModelView.setGraphicsEffect" class="function">setGraphicsEffect</dd>
                <dd id="ModelView.setHidden" class="function">setHidden</dd>
                <dd id="ModelView.setInputMethodHints" class="function">setInputMethodHints</dd>
                <dd id="ModelView.setLayout" class="function">setLayout</dd>
                <dd id="ModelView.setLayoutDirection" class="function">setLayoutDirection</dd>
                <dd id="ModelView.setLocale" class="function">setLocale</dd>
                <dd id="ModelView.setMask" class="function">setMask</dd>
                <dd id="ModelView.setMaximumHeight" class="function">setMaximumHeight</dd>
                <dd id="ModelView.setMaximumSize" class="function">setMaximumSize</dd>
                <dd id="ModelView.setMaximumWidth" class="function">setMaximumWidth</dd>
                <dd id="ModelView.setMinimumHeight" class="function">setMinimumHeight</dd>
                <dd id="ModelView.setMinimumSize" class="function">setMinimumSize</dd>
                <dd id="ModelView.setMinimumWidth" class="function">setMinimumWidth</dd>
                <dd id="ModelView.setMouseTracking" class="function">setMouseTracking</dd>
                <dd id="ModelView.setPalette" class="function">setPalette</dd>
                <dd id="ModelView.setParent" class="function">setParent</dd>
                <dd id="ModelView.setShortcutAutoRepeat" class="function">setShortcutAutoRepeat</dd>
                <dd id="ModelView.setShortcutEnabled" class="function">setShortcutEnabled</dd>
                <dd id="ModelView.setSizeIncrement" class="function">setSizeIncrement</dd>
                <dd id="ModelView.setSizePolicy" class="function">setSizePolicy</dd>
                <dd id="ModelView.setStatusTip" class="function">setStatusTip</dd>
                <dd id="ModelView.setStyle" class="function">setStyle</dd>
                <dd id="ModelView.setStyleSheet" class="function">setStyleSheet</dd>
                <dd id="ModelView.setTabOrder" class="function">setTabOrder</dd>
                <dd id="ModelView.setTabletTracking" class="function">setTabletTracking</dd>
                <dd id="ModelView.setToolTip" class="function">setToolTip</dd>
                <dd id="ModelView.setToolTipDuration" class="function">setToolTipDuration</dd>
                <dd id="ModelView.setUpdatesEnabled" class="function">setUpdatesEnabled</dd>
                <dd id="ModelView.setVisible" class="function">setVisible</dd>
                <dd id="ModelView.setWhatsThis" class="function">setWhatsThis</dd>
                <dd id="ModelView.setWindowFilePath" class="function">setWindowFilePath</dd>
                <dd id="ModelView.setWindowFlag" class="function">setWindowFlag</dd>
                <dd id="ModelView.setWindowFlags" class="function">setWindowFlags</dd>
                <dd id="ModelView.setWindowIcon" class="function">setWindowIcon</dd>
                <dd id="ModelView.setWindowIconText" class="function">setWindowIconText</dd>
                <dd id="ModelView.setWindowModality" class="function">setWindowModality</dd>
                <dd id="ModelView.setWindowModified" class="function">setWindowModified</dd>
                <dd id="ModelView.setWindowOpacity" class="function">setWindowOpacity</dd>
                <dd id="ModelView.setWindowRole" class="function">setWindowRole</dd>
                <dd id="ModelView.setWindowState" class="function">setWindowState</dd>
                <dd id="ModelView.setWindowTitle" class="function">setWindowTitle</dd>
                <dd id="ModelView.sharedPainter" class="function">sharedPainter</dd>
                <dd id="ModelView.show" class="function">show</dd>
                <dd id="ModelView.showFullScreen" class="function">showFullScreen</dd>
                <dd id="ModelView.showMaximized" class="function">showMaximized</dd>
                <dd id="ModelView.showMinimized" class="function">showMinimized</dd>
                <dd id="ModelView.showNormal" class="function">showNormal</dd>
                <dd id="ModelView.size" class="function">size</dd>
                <dd id="ModelView.sizeIncrement" class="function">sizeIncrement</dd>
                <dd id="ModelView.sizePolicy" class="function">sizePolicy</dd>
                <dd id="ModelView.stackUnder" class="function">stackUnder</dd>
                <dd id="ModelView.statusTip" class="function">statusTip</dd>
                <dd id="ModelView.style" class="function">style</dd>
                <dd id="ModelView.styleSheet" class="function">styleSheet</dd>
                <dd id="ModelView.tabletEvent" class="function">tabletEvent</dd>
                <dd id="ModelView.testAttribute" class="function">testAttribute</dd>
                <dd id="ModelView.toolTip" class="function">toolTip</dd>
                <dd id="ModelView.toolTipDuration" class="function">toolTipDuration</dd>
                <dd id="ModelView.underMouse" class="function">underMouse</dd>
                <dd id="ModelView.ungrabGesture" class="function">ungrabGesture</dd>
                <dd id="ModelView.unsetCursor" class="function">unsetCursor</dd>
                <dd id="ModelView.unsetLayoutDirection" class="function">unsetLayoutDirection</dd>
                <dd id="ModelView.unsetLocale" class="function">unsetLocale</dd>
                <dd id="ModelView.updateGeometry" class="function">updateGeometry</dd>
                <dd id="ModelView.updateMicroFocus" class="function">updateMicroFocus</dd>
                <dd id="ModelView.updatesEnabled" class="function">updatesEnabled</dd>
                <dd id="ModelView.visibleRegion" class="function">visibleRegion</dd>
                <dd id="ModelView.whatsThis" class="function">whatsThis</dd>
                <dd id="ModelView.width" class="function">width</dd>
                <dd id="ModelView.winId" class="function">winId</dd>
                <dd id="ModelView.window" class="function">window</dd>
                <dd id="ModelView.windowFilePath" class="function">windowFilePath</dd>
                <dd id="ModelView.windowFlags" class="function">windowFlags</dd>
                <dd id="ModelView.windowHandle" class="function">windowHandle</dd>
                <dd id="ModelView.windowIcon" class="function">windowIcon</dd>
                <dd id="ModelView.windowIconText" class="function">windowIconText</dd>
                <dd id="ModelView.windowModality" class="function">windowModality</dd>
                <dd id="ModelView.windowOpacity" class="function">windowOpacity</dd>
                <dd id="ModelView.windowRole" class="function">windowRole</dd>
                <dd id="ModelView.windowState" class="function">windowState</dd>
                <dd id="ModelView.windowTitle" class="function">windowTitle</dd>
                <dd id="ModelView.windowType" class="function">windowType</dd>
                <dd id="ModelView.x" class="function">x</dd>
                <dd id="ModelView.y" class="function">y</dd>
                <dd id="ModelView.DrawChildren" class="variable">DrawChildren</dd>
                <dd id="ModelView.DrawWindowBackground" class="variable">DrawWindowBackground</dd>
                <dd id="ModelView.IgnoreMask" class="variable">IgnoreMask</dd>
                <dd id="ModelView.windowIconTextChanged" class="function">windowIconTextChanged</dd>
                <dd id="ModelView.windowIconChanged" class="function">windowIconChanged</dd>
                <dd id="ModelView.windowTitleChanged" class="function">windowTitleChanged</dd>
                <dd id="ModelView.customContextMenuRequested" class="function">customContextMenuRequested</dd>

            </div>
            <div><dt>PyQt5.QtCore.QObject</dt>
                                <dd id="ModelView.blockSignals" class="function">blockSignals</dd>
                <dd id="ModelView.childEvent" class="function">childEvent</dd>
                <dd id="ModelView.children" class="function">children</dd>
                <dd id="ModelView.connectNotify" class="function">connectNotify</dd>
                <dd id="ModelView.customEvent" class="function">customEvent</dd>
                <dd id="ModelView.deleteLater" class="function">deleteLater</dd>
                <dd id="ModelView.disconnect" class="function">disconnect</dd>
                <dd id="ModelView.disconnectNotify" class="function">disconnectNotify</dd>
                <dd id="ModelView.dumpObjectInfo" class="function">dumpObjectInfo</dd>
                <dd id="ModelView.dumpObjectTree" class="function">dumpObjectTree</dd>
                <dd id="ModelView.dynamicPropertyNames" class="function">dynamicPropertyNames</dd>
                <dd id="ModelView.findChild" class="function">findChild</dd>
                <dd id="ModelView.findChildren" class="function">findChildren</dd>
                <dd id="ModelView.inherits" class="function">inherits</dd>
                <dd id="ModelView.installEventFilter" class="function">installEventFilter</dd>
                <dd id="ModelView.isSignalConnected" class="function">isSignalConnected</dd>
                <dd id="ModelView.isWidgetType" class="function">isWidgetType</dd>
                <dd id="ModelView.isWindowType" class="function">isWindowType</dd>
                <dd id="ModelView.killTimer" class="function">killTimer</dd>
                <dd id="ModelView.metaObject" class="function">metaObject</dd>
                <dd id="ModelView.moveToThread" class="function">moveToThread</dd>
                <dd id="ModelView.objectName" class="function">objectName</dd>
                <dd id="ModelView.parent" class="function">parent</dd>
                <dd id="ModelView.property" class="function">property</dd>
                <dd id="ModelView.pyqtConfigure" class="function">pyqtConfigure</dd>
                <dd id="ModelView.receivers" class="function">receivers</dd>
                <dd id="ModelView.removeEventFilter" class="function">removeEventFilter</dd>
                <dd id="ModelView.sender" class="function">sender</dd>
                <dd id="ModelView.senderSignalIndex" class="function">senderSignalIndex</dd>
                <dd id="ModelView.setObjectName" class="function">setObjectName</dd>
                <dd id="ModelView.setProperty" class="function">setProperty</dd>
                <dd id="ModelView.signalsBlocked" class="function">signalsBlocked</dd>
                <dd id="ModelView.startTimer" class="function">startTimer</dd>
                <dd id="ModelView.thread" class="function">thread</dd>
                <dd id="ModelView.timerEvent" class="function">timerEvent</dd>
                <dd id="ModelView.tr" class="function">tr</dd>
                <dd id="ModelView.staticMetaObject" class="variable">staticMetaObject</dd>
                <dd id="ModelView.objectNameChanged" class="function">objectNameChanged</dd>
                <dd id="ModelView.destroyed" class="function">destroyed</dd>

            </div>
            <div><dt>PyQt5.QtGui.QPaintDevice</dt>
                                <dd id="ModelView.PaintDeviceMetric" class="class">PaintDeviceMetric</dd>
                <dd id="ModelView.colorCount" class="function">colorCount</dd>
                <dd id="ModelView.depth" class="function">depth</dd>
                <dd id="ModelView.devicePixelRatio" class="function">devicePixelRatio</dd>
                <dd id="ModelView.devicePixelRatioF" class="function">devicePixelRatioF</dd>
                <dd id="ModelView.devicePixelRatioFScale" class="function">devicePixelRatioFScale</dd>
                <dd id="ModelView.heightMM" class="function">heightMM</dd>
                <dd id="ModelView.logicalDpiX" class="function">logicalDpiX</dd>
                <dd id="ModelView.logicalDpiY" class="function">logicalDpiY</dd>
                <dd id="ModelView.paintingActive" class="function">paintingActive</dd>
                <dd id="ModelView.physicalDpiX" class="function">physicalDpiX</dd>
                <dd id="ModelView.physicalDpiY" class="function">physicalDpiY</dd>
                <dd id="ModelView.widthMM" class="function">widthMM</dd>
                <dd id="ModelView.PdmDepth" class="variable">PdmDepth</dd>
                <dd id="ModelView.PdmDevicePixelRatio" class="variable">PdmDevicePixelRatio</dd>
                <dd id="ModelView.PdmDevicePixelRatioScaled" class="variable">PdmDevicePixelRatioScaled</dd>
                <dd id="ModelView.PdmDpiX" class="variable">PdmDpiX</dd>
                <dd id="ModelView.PdmDpiY" class="variable">PdmDpiY</dd>
                <dd id="ModelView.PdmHeight" class="variable">PdmHeight</dd>
                <dd id="ModelView.PdmHeightMM" class="variable">PdmHeightMM</dd>
                <dd id="ModelView.PdmNumColors" class="variable">PdmNumColors</dd>
                <dd id="ModelView.PdmPhysicalDpiX" class="variable">PdmPhysicalDpiX</dd>
                <dd id="ModelView.PdmPhysicalDpiY" class="variable">PdmPhysicalDpiY</dd>
                <dd id="ModelView.PdmWidth" class="variable">PdmWidth</dd>
                <dd id="ModelView.PdmWidthMM" class="variable">PdmWidthMM</dd>

            </div>
                                </dl>
                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>